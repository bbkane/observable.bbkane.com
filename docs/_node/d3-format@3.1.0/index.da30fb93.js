function V(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function z(i,r){if((o=(i=r?i.toExponential(r-1):i.toExponential()).indexOf("e"))<0)return null;var o,e=i.slice(0,o);return[e.length>1?e[0]+e.slice(2):e,+i.slice(o+1)]}function M(i){return i=z(Math.abs(i)),i?i[1]:NaN}function W(i,r){return function(o,e){for(var n=o.length,s=[],m=0,l=i[0],y=0;n>0&&l>0&&(y+l+1>e&&(l=Math.max(1,e-y)),s.push(o.substring(n-=l,n+l)),!((y+=l+1)>e));)l=i[m=(m+1)%i.length];return s.reverse().join(r)}}function _(i){return function(r){return r.replace(/[0-9]/g,function(o){return i[+o]})}}var ii=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function A(i){if(!(r=ii.exec(i)))throw new Error("invalid format: "+i);var r;return new N({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}A.prototype=N.prototype;function N(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}N.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ri(i){i:for(var r=i.length,o=1,e=-1,n;o<r;++o)switch(i[o]){case".":e=n=o;break;case"0":e===0&&(e=o),n=o;break;default:if(!+i[o])break i;e>0&&(e=0);break}return e>0?i.slice(0,e)+i.slice(n+1):i}var G;function ti(i,r){var o=z(i,r);if(!o)return i+"";var e=o[0],n=o[1],s=n-(G=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,m=e.length;return s===m?e:s>m?e+new Array(s-m+1).join("0"):s>0?e.slice(0,s)+"."+e.slice(s):"0."+new Array(1-s).join("0")+z(i,Math.max(0,r+s-1))[0]}function T(i,r){var o=z(i,r);if(!o)return i+"";var e=o[0],n=o[1];return n<0?"0."+new Array(-n).join("0")+e:e.length>n+1?e.slice(0,n+1)+"."+e.slice(n+1):e+new Array(n-e.length+2).join("0")}var Y={"%":(i,r)=>(i*100).toFixed(r),b:i=>Math.round(i).toString(2),c:i=>i+"",d:V,e:(i,r)=>i.toExponential(r),f:(i,r)=>i.toFixed(r),g:(i,r)=>i.toPrecision(r),o:i=>Math.round(i).toString(8),p:(i,r)=>T(i*100,r),r:T,s:ti,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function Z(i){return i}var q=Array.prototype.map,D=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function I(i){var r=i.grouping===void 0||i.thousands===void 0?Z:W(q.call(i.grouping,Number),i.thousands+""),o=i.currency===void 0?"":i.currency[0]+"",e=i.currency===void 0?"":i.currency[1]+"",n=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?Z:_(q.call(i.numerals,String)),m=i.percent===void 0?"%":i.percent+"",l=i.minus===void 0?"\u2212":i.minus+"",y=i.nan===void 0?"NaN":i.nan+"";function F(a){a=A(a);var b=a.fill,x=a.align,h=a.sign,w=a.symbol,p=a.zero,$=a.width,E=a.comma,d=a.precision,L=a.trim,c=a.type;c==="n"?(E=!0,c="g"):Y[c]||(d===void 0&&(d=12),L=!0,c="g"),(p||b==="0"&&x==="=")&&(p=!0,b="0",x="=");var J=w==="$"?o:w==="#"&&/[boxX]/.test(c)?"0"+c.toLowerCase():"",K=w==="$"?e:/[%p]/.test(c)?m:"",C=Y[c],Q=/[defgprs%]/.test(c);d=d===void 0?6:/[gprs]/.test(c)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d));function X(t){var g=J,u=K,v,B,S;if(c==="c")u=C(t)+u,t="";else{t=+t;var k=t<0||1/t<0;if(t=isNaN(t)?y:C(Math.abs(t),d),L&&(t=ri(t)),k&&+t==0&&h!=="+"&&(k=!1),g=(k?h==="("?h:l:h==="-"||h==="("?"":h)+g,u=(c==="s"?D[8+G/3]:"")+u+(k&&h==="("?")":""),Q){for(v=-1,B=t.length;++v<B;)if(S=t.charCodeAt(v),48>S||S>57){u=(S===46?n+t.slice(v+1):t.slice(v))+u,t=t.slice(0,v);break}}}E&&!p&&(t=r(t,1/0));var j=g.length+t.length+u.length,f=j<$?new Array($-j+1).join(b):"";switch(E&&p&&(t=r(f+t,f.length?$-u.length:1/0),f=""),x){case"<":t=g+t+u+f;break;case"=":t=g+f+t+u;break;case"^":t=f.slice(0,j=f.length>>1)+g+t+u+f.slice(j);break;default:t=f+g+t+u;break}return s(t)}return X.toString=function(){return a+""},X}function H(a,b){var x=F((a=A(a),a.type="f",a)),h=Math.max(-8,Math.min(8,Math.floor(M(b)/3)))*3,w=Math.pow(10,-h),p=D[8+h/3];return function($){return x(w*$)+p}}return{format:F,formatPrefix:H}}var P,O,R;U({thousands:",",grouping:[3],currency:["$",""]});function U(i){return P=I(i),O=P.format,R=P.formatPrefix,P}function ei(i){return Math.max(0,-M(Math.abs(i)))}function oi(i,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(M(r)/3)))*3-M(Math.abs(i)))}function ni(i,r){return i=Math.abs(i),r=Math.abs(r)-i,Math.max(0,M(r)-M(i))+1}export{N as FormatSpecifier,O as format,U as formatDefaultLocale,I as formatLocale,R as formatPrefix,A as formatSpecifier,ei as precisionFixed,oi as precisionPrefix,ni as precisionRound};
