const c=Math.PI,f=2*c,l=1e-6,q=f-l;function A($){this._+=$[0];for(let t=1,h=$.length;t<h;++t)this._+=arguments[t]+$[t]}function C($){let t=Math.floor($);if(!(t>=0))throw new Error(`invalid digits: ${$}`);if(t>15)return A;const h=10**t;return function(s){this._+=s[0];for(let i=1,_=s.length;i<_;++i)this._+=Math.round(arguments[i]*h)/h+s[i]}}class d{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?A:C(t)}moveTo(t,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+h}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,h){this._append`L${this._x1=+t},${this._y1=+h}`}quadraticCurveTo(t,h,s,i){this._append`Q${+t},${+h},${this._x1=+s},${this._y1=+i}`}bezierCurveTo(t,h,s,i,_,e){this._append`C${+t},${+h},${+s},${+i},${this._x1=+_},${this._y1=+e}`}arcTo(t,h,s,i,_){if(t=+t,h=+h,s=+s,i=+i,_=+_,_<0)throw new Error(`negative radius: ${_}`);let e=this._x1,u=this._y1,p=s-t,r=i-h,n=e-t,o=u-h,a=n*n+o*o;if(this._x1===null)this._append`M${this._x1=t},${this._y1=h}`;else if(a>l)if(!(Math.abs(o*p-r*n)>l)||!_)this._append`L${this._x1=t},${this._y1=h}`;else{let x=s-e,y=i-u,w=p*p+r*r,m=x*x+y*y,g=Math.sqrt(w),v=Math.sqrt(a),b=_*Math.tan((c-Math.acos((w+a-m)/(2*g*v)))/2),M=b/v,T=b/g;Math.abs(M-1)>l&&this._append`L${t+M*n},${h+M*o}`,this._append`A${_},${_},0,0,${+(o*x>n*y)},${this._x1=t+T*p},${this._y1=h+T*r}`}}arc(t,h,s,i,_,e){if(t=+t,h=+h,s=+s,e=!!e,s<0)throw new Error(`negative radius: ${s}`);let u=s*Math.cos(i),p=s*Math.sin(i),r=t+u,n=h+p,o=1^e,a=e?i-_:_-i;this._x1===null?this._append`M${r},${n}`:(Math.abs(this._x1-r)>l||Math.abs(this._y1-n)>l)&&this._append`L${r},${n}`,s&&(a<0&&(a=a%f+f),a>q?this._append`A${s},${s},0,1,${o},${t-u},${h-p}A${s},${s},0,1,${o},${this._x1=r},${this._y1=n}`:a>l&&this._append`A${s},${s},0,${+(a>=c)},${o},${this._x1=t+s*Math.cos(_)},${this._y1=h+s*Math.sin(_)}`)}rect(t,h,s,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+h}h${s=+s}v${+i}h${-s}Z`}toString(){return this._}}function L(){return new d}L.prototype=d.prototype;function E($=3){return new d(+$)}export{d as Path,L as path,E as pathRound};
