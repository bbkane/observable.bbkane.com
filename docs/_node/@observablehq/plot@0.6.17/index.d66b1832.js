import{descending as _e,ascending as cr,timeSecond as Ua,timeMinute as Za,timeHour as Ka,timeDay as Ja,timeMonday as Qh,timeTuesday as td,timeWednesday as ed,timeThursday as nd,timeFriday as rd,timeSaturday as od,timeSunday as id,timeWeek as ad,timeMonth as Qa,timeYear as tl,utcSecond as el,utcMinute as nl,utcHour as rl,unixDay as ol,utcMonday as ld,utcTuesday as sd,utcWednesday as cd,utcThursday as ud,utcFriday as fd,utcSaturday as hd,utcSunday as dd,utcWeek as pd,utcMonth as il,utcYear as al,max as zt,pairs as md,timeFormat as yd,utcFormat as zo,bisector as gd,range as wn,quantile as bn,symbolAsterisk as $d,symbolCircle as So,symbolCross as vd,symbolDiamond as xd,symbolDiamond2 as wd,symbolPlus as bd,symbolSquare as kd,symbolSquare2 as Md,symbolStar as Ad,symbolTimes as Ld,symbolTriangle as zd,symbolTriangle2 as Sd,symbolWye as Ed,randomLcg as Eo,sort as ll,rollup as kn,sum as qt,InternSet as Mn,group as Oe,mode as sl,variance as cl,median as An,mean as ur,maxIndex as Od,minIndex as Cd,min as Nt,deviation as fr,rollups as Rd,quantize as Bt,schemeAccent as Nd,schemeCategory10 as Td,schemeDark2 as Id,schemeObservable10 as Bd,schemePaired as Wd,schemePastel1 as jd,schemePastel2 as Fd,schemeSet1 as Dd,schemeSet2 as qd,schemeSet3 as Yd,schemeTableau10 as Pd,interpolateBrBG as ul,interpolatePRGn as fl,interpolatePiYG as hl,interpolatePuOr as dl,interpolateRdBu as hr,interpolateRdGy as pl,interpolateRdYlBu as dr,interpolateRdYlGn as ml,interpolateSpectral as yl,interpolateBlues as gl,interpolateGreens as $l,interpolateGreys as vl,interpolatePurples as xl,interpolateReds as wl,interpolateOranges as bl,interpolateTurbo as kl,interpolateViridis as Ml,interpolateMagma as Al,interpolateInferno as Ll,interpolatePlasma as zl,interpolateCividis as Sl,interpolateCubehelixDefault as El,interpolateWarm as Ol,interpolateCool as Cl,interpolateBuGn as Rl,interpolateBuPu as Nl,interpolateGnBu as Tl,interpolateOrRd as Il,interpolatePuBuGn as Bl,interpolatePuBu as Wl,interpolatePuRd as jl,interpolateRdPu as Fl,interpolateYlGnBu as Dl,interpolateYlGn as ql,interpolateYlOrBr as Yl,interpolateYlOrRd as Pl,interpolateRainbow as _l,interpolateSinebow as Xl,schemeBrBG as _d,schemePRGn as Xd,schemePiYG as Gd,schemePuOr as Vd,schemeRdBu as Gl,schemeRdGy as Hd,schemeRdYlBu as Vl,schemeRdYlGn as Ud,schemeSpectral as Zd,schemeBlues as Kd,schemeGreens as Jd,schemeGreys as Qd,schemeOranges as tp,schemePurples as ep,schemeReds as np,schemeBuGn as rp,schemeBuPu as op,schemeGnBu as ip,schemeOrRd as ap,schemePuBu as lp,schemePuBuGn as sp,schemePuRd as cp,schemeRdPu as up,schemeYlGn as fp,schemeYlGnBu as hp,schemeYlOrBr as dp,schemeYlOrRd as pp,scaleIdentity as mp,scaleSymlog as yp,scaleLog as gp,scalePow as $p,extent as gt,ticks as Oo,interpolateNumber as Ln,scaleQuantile as vp,scaleThreshold as xp,reverse as pr,scaleLinear as Hl,interpolateRgb as Co,interpolateRound as wp,piecewise as Ro,interpolateHsl as bp,interpolateHcl as kp,interpolateLab as Mp,scaleDivergingSymlog as Ap,scaleDivergingLog as Lp,scaleDivergingPow as zp,scaleDiverging as Sp,scaleTime as Ep,scaleUtc as Op,scaleBand as Ul,scalePoint as Cp,scaleImplicit as Rp,scaleOrdinal as Np,symbolsStroke as Tp,symbolsFill as Ip,InternMap as No,cross as Bp,geoTransform as mr,geoPath as zn,geoStream as Wp,geoClipRectangle as jp,geoTransverseMercator as Fp,geoStereographic as Dp,geoOrthographic as qp,geoMercator as Yp,geoGnomonic as Pp,geoEquirectangular as _p,geoEqualEarth as Xp,geoConicEquidistant as Gp,geoConicEqualArea as Vp,geoConicConformal as Hp,geoAzimuthalEquidistant as Up,geoAzimuthalEqualArea as Zp,geoAlbers as Kp,geoAlbersUsa as Jp,select as Kt,creator as Zl,namespaces as Ce,pointer as Qp,format as To,axisBottom as tm,pathRound as Jt,rgb as Sn,cumsum as em,groupSort as Io,greatest as Bo,curveLinear as Wo,curveBasis as nm,curveBasisClosed as rm,curveBasisOpen as om,curveBundle as im,curveBumpX as am,curveBumpY as lm,curveCardinal as sm,curveCardinalClosed as cm,curveCardinalOpen as um,curveCatmullRom as fm,curveCatmullRomClosed as hm,curveCatmullRomOpen as dm,curveLinearClosed as pm,curveMonotoneX as mm,curveMonotoneY as ym,curveNatural as gm,curveStep as $m,curveStepAfter as vm,curveStepBefore as xm,thresholdSturges as Kl,thresholdScott as Jl,thresholdFreedmanDiaconis as wm,utcTickInterval as bm,tickIncrement as km,bisect as Mm,area as jo,line as Am,rank as Ql,count as Lm,blurImage as zm,Delaunay as Xe,blur2 as Sm,contours as Em,nice as Om,contourDensity as Cm,geoCentroid as Rm,geoGraticule10 as Nm,stratify as ts,tree as yr,cluster as es,least as Tm}from"../../d3@7.9.0/index.8946009e.js";import{parse as ns,format as Im}from"../../isoformat@0.2.1/index.0882e9d9.js";import Bm from"../../interval-tree-1d@1.0.4/index.eeaa354d.js";function vt(t){return t!=null&&!Number.isNaN(t)}function Tt(t,e){return+vt(e)-+vt(t)||cr(t,e)}function gr(t,e){return+vt(e)-+vt(t)||_e(t,e)}function Fo(t){return t!=null&&`${t}`!=""}function $r(t){return isFinite(t)?t:NaN}function Qt(t){return t>0&&isFinite(t)?t:NaN}function vr(t){return t<0&&isFinite(t)?t:NaN}function Ge(t){if(t==null)return;const e=t[0],n=t[t.length-1];return _e(e,n)}const Ve=1e3,he=Ve*60,de=he*60,Yt=de*24,Pt=Yt*7,Re=Yt*30,pe=Yt*365,Do=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ve],["5 seconds",5*Ve],["15 seconds",15*Ve],["30 seconds",30*Ve],["minute",he],["5 minutes",5*he],["15 minutes",15*he],["30 minutes",30*he],["hour",de],["3 hours",3*de],["6 hours",6*de],["12 hours",12*de],["day",Yt],["2 days",2*Yt],["week",Pt],["2 weeks",2*Pt],["month",Re],["3 months",3*Re],["6 months",6*Re],["year",pe],["2 years",2*pe],["5 years",5*pe],["10 years",10*pe],["20 years",20*pe],["50 years",50*pe],["100 years",100*pe]],qo=new Map([["second",Ve],["minute",he],["hour",de],["day",Yt],["monday",Pt],["tuesday",Pt],["wednesday",Pt],["thursday",Pt],["friday",Pt],["saturday",Pt],["sunday",Pt],["week",Pt],["month",Re],["year",pe]]),rs=new Map([["second",Ua],["minute",Za],["hour",Ka],["day",Ja],["monday",Qh],["tuesday",td],["wednesday",ed],["thursday",nd],["friday",rd],["saturday",od],["sunday",id],["week",ad],["month",Qa],["year",tl]]),Yo=new Map([["second",el],["minute",nl],["hour",rl],["day",ol],["monday",ld],["tuesday",sd],["wednesday",cd],["thursday",ud],["friday",fd],["saturday",hd],["sunday",dd],["week",pd],["month",il],["year",al]]),En=Symbol("intervalDuration"),xr=Symbol("intervalType");for(const[t,e]of rs)e[En]=qo.get(t),e[xr]="time";for(const[t,e]of Yo)e[En]=qo.get(t),e[xr]="utc";const On=[["year",al,"utc"],["month",il,"utc"],["day",ol,"utc",6*Re],["hour",rl,"utc",3*Yt],["minute",nl,"utc",6*de],["second",el,"utc",30*he]],wr=[["year",tl,"time"],["month",Qa,"time"],["day",Ja,"time",6*Re],["hour",Ka,"time",3*Yt],["minute",Za,"time",6*de],["second",Ua,"time",30*he]],Wm=[On[0],wr[0],On[1],wr[1],On[2],wr[2],...On.slice(3)];function Po(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(e);switch(r&&(e=e.slice(r[0].length),n=+r[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let o=Yo.get(e);if(!o)throw new Error(`unknown interval: ${t}`);if(n>1&&!o.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function _o(t){return os(Po(t),"time")}function br(t){return os(Po(t),"utc")}function os([t,e],n){let r=(n==="time"?rs:Yo).get(t);return e>1&&(r=r.every(e),r[En]=qo.get(t)*e,r[xr]=n),r}function is(t,e){if(!(e>1))return;const n=t[En];if(!Do.some(([,o])=>o===n)||n%Yt===0&&Yt<n&&n<Re)return;const[r]=Do[gd(([,o])=>Math.log(o)).center(Do,Math.log(n*e))];return(t[xr]==="time"?_o:br)(r)}function as(t,e,n){const r=e==="time"?yd:zo;if(n==null)return r(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const o=jm(n);switch(t){case"millisecond":return He(r(".%L"),r(":%M:%S"),o);case"second":return He(r(":%S"),r("%-I:%M"),o);case"minute":return He(r("%-I:%M"),r("%p"),o);case"hour":return He(r("%-I %p"),r("%b %-d"),o);case"day":return He(r("%-d"),r("%b"),o);case"month":return He(r("%b"),r("%Y"),o);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function jm(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function Fm(t){return t==="time"?wr:t==="utc"?On:Wm}function Dm(t,e,n){const r=zt(md(e,(o,i)=>Math.abs(i-o)));if(r<1e3)return as("millisecond","utc",n);for(const[o,i,a,l]of Fm(t)){if(r>l||o==="hour"&&!r)break;if(e.every(s=>i.floor(s)>=s))return as(o,a,n)}}function He(t,e,n){return(r,o,i)=>{const a=t(r,o),l=e(r,o),s=o-Ge(i);return o!==s&&i[s]!==void 0&&l===e(i[s],s)?a:n(a,l)}}const kr=Object.getPrototypeOf(Uint8Array),qm=Object.prototype.toString;function te(t){return t instanceof Array||t instanceof kr}function ls(t){return t instanceof kr&&!Ym(t)}function ss(t){return t?.prototype instanceof kr&&!Pm(t)}function Ym(t){return t instanceof BigInt64Array||t instanceof BigUint64Array}function Pm(t){return t===BigInt64Array||t===BigUint64Array}const cs=Symbol("reindex");function H(t,e,n){const r=typeof e;return r==="string"?As(t)?Go(t.getChild(e),n):us(t,hs(e),n):r==="function"?us(t,e,n):r==="number"||e instanceof Date||r==="boolean"?Q(t,wt(e),n):typeof e?.transform=="function"?Xo(e.transform(t),n):_m(Xo(e,n),t?.[cs])}function _m(t,e){return t!=null&&e?Ar(t,e):t}function us(t,e,n){return Q(t,ss(n)?(r,o)=>Uo(e(r,o)):e,n)}function Xo(t,e){return e===void 0?me(t):Ls(t)?Go(t,e):t instanceof e?t:e.from(t,ss(e)&&!ls(t)?Uo:void 0)}function Go(t,e){return t==null?t:(e===void 0||e===Array)&&oy(t.type)?ds(fs(t)):Xo(fs(t),e)}function fs(t){return t.nullCount?t.toJSON():t.toArray()}const Cn=[null],hs=t=>e=>{const n=e[t];return n===void 0&&e.type==="Feature"?e.properties?.[t]:n},pt={transform:ee},q={transform:t=>t},Vo=()=>1,Xm=()=>!0,xt=t=>t==null?t:`${t}`,rt=t=>t==null?t:+t,Mr=t=>t?t[0]:void 0,Rn=t=>t?t[1]:void 0,Gm=t=>t?t[2]:void 0,wt=t=>()=>t;function Ho(t){const e=+`${t}`.slice(1)/100;return(n,r)=>bn(n,e,r)}function St(t){return ls(t)?t:Q(t,Uo,Float64Array)}function Uo(t){return t==null?NaN:Number(t)}function ds(t){return Q(t,ps)}function ps(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?ns(t):t==null||isNaN(t=Number(t))?void 0:new Date(t)}function At(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:In(t)?[void 0,t]:[t,void 0]}function ht(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function ms(t,e,n){if(t!=null)return Ot(t,e,n)}function Ot(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function Ue(t){return As(t)?t:me(t)}function me(t){if(t==null||te(t))return t;if(Ls(t))return Go(t);if(ys(t))switch(t.type){case"FeatureCollection":return t.features;case"GeometryCollection":return t.geometries;default:return[t]}return Array.from(t)}function ys(t){switch(t?.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function Q(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Nn(t,e=Array){return t instanceof e?t.slice():e.from(t)}function gs({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function $s({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function Ze(t){return gs(t)||$s(t)||t.interval!==void 0}function Ct(t){return t?.toString===qm}function Ne(t){return Ct(t)&&(t.type!==void 0||t.domain!==void 0)}function _t(t){return Ct(t)&&typeof t.transform!="function"}function ye(t){return _t(t)&&t.value===void 0&&t.channel===void 0}function vs(t,e,n,r=q){return e===void 0&&n===void 0?(e=0,n=t===void 0?r:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function Wt(t,e){return t===void 0&&e===void 0?[Mr,Rn]:[t,e]}function ge({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=At(e)),t===void 0&&([t]=At(n)),t}function Tn(t){return te(t)?t.length:t?.numRows}function ee(t){const e=Tn(t),n=new Uint32Array(e);for(let r=0;r<e;++r)n[r]=r;return n}function Ar(t,e){return te(t)?Q(e,n=>t[n],t.constructor):Q(e,n=>t.at(n))}function Zo(t){return t.length===1?(e,n)=>t(Ar(n,e)):t}function Te(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function ne(t){return t!==null&&typeof t=="object"?t.valueOf():t}function xs(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function Rt(t){let e;return[{transform:()=>e,label:Xt(t)},n=>e=n]}function Et(t){return t==null?[t]:Rt(t)}function Xt(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function Lr(t,e){return{transform(n){const r=t.transform(n),o=e.transform(n);return Lt(r)||Lt(o)?Q(r,(i,a)=>new Date((+r[a]+ +o[a])/2)):Q(r,(i,a)=>(+r[a]+ +o[a])/2,Float64Array)},label:t.label}}function zr(t,e){const n=ws(e?.interval,e?.type);return n?Q(t,n):t}function ws(t,e){const n=Sr(t,e);return n&&(r=>vt(r)?n.floor(r):r)}function Sr(t,e){if(t!=null){if(typeof t=="number")return bs(t);if(typeof t=="string")return(e==="time"?_o:br)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function bs(t){t=+t,0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const e=Math.abs(t);return t<0?{floor:n=>Math.floor(n*e)/e,offset:(n,r=1)=>(n*e+Math.floor(r))/e,range:(n,r)=>wn(Math.ceil(n*e),r*e).map(o=>o/e)}:{floor:n=>Math.floor(n/e)*e,offset:(n,r=1)=>n+e*Math.floor(r),range:(n,r)=>wn(Math.ceil(n/e),r/e).map(o=>o*e)}}function Ke(t,e){if(t=Sr(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function Vm(t,e){if(t=Ke(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function Hm(t){return Je(t)&&typeof t?.floor=="function"&&t.floor()instanceof Date}function Je(t){return typeof t?.range=="function"}function Qe(t){return t===void 0||_t(t)?t:{value:t}}function Um(t){return t==null?null:{transform:e=>H(e,t,Float64Array),label:Xt(t)}}function Zm(t){if(!re(t))return!1;for(const e of t)if(e!=null)return typeof e=="object"&&"0"in e&&"1"in e}function re(t){return t&&typeof t[Symbol.iterator]=="function"}function ks(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function ut(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function Lt(t){for(const e of t)if(e!=null)return e instanceof Date}function Km(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&ns(e)}function Jm(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function tn(t){for(const e of t)if(e!=null)return typeof e=="number"}function Ko(t,e){let n;for(const r of t)if(r!=null){if(!e(r))return!1;n=!0}return n}const Qm=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function In(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||Qm.has(t))}function ty(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function lt(t){return t==null||en(t)}function en(t){return/^\s*none\s*$/i.test(t)}function ey(t){return/^\s*round\s*$/i.test(t)}function Jo(t,e){return ms(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Bn(t="middle"){return Jo(t,"frameAnchor")}function ny(t={},...e){let n=t;for(const r of e)for(const o in r)if(n[o]===void 0){const i=r[o];n===t?n={...n,[o]:i}:n[o]=i}return n}function ry(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const o=`${r}`;if(o==="__proto__")throw new Error(`illegal name: ${o}`);if(e.has(o))throw new Error(`duplicate name: ${o}`);return e.add(o),[r,n]}))}function Qo(t){return re(t)?ry(t):t}function Ms(t){return t===!0?t="frame":t===!1?t=null:!ys(t)&&t!=null&&(t=Ot(t,"clip",["frame","sphere"]),t==="sphere"&&(t={type:"Sphere"})),t}function As(t){return t&&typeof t.getChild=="function"&&typeof t.toArray=="function"&&t.schema&&Array.isArray(t.schema.fields)}function Ls(t){return t&&typeof t.toArray=="function"&&t.type}function oy(t){return t&&(t.typeId===8||t.typeId===10)&&t.unit===1}const Gt=Symbol("position"),oe=Symbol("color"),Wn=Symbol("radius"),jn=Symbol("length"),Fn=Symbol("opacity"),Er=Symbol("symbol"),zs=Symbol("projection"),st=new Map([["x",Gt],["y",Gt],["fx",Gt],["fy",Gt],["r",Wn],["color",oe],["opacity",Fn],["symbol",Er],["length",jn],["projection",zs]]);function iy(t){return t===Gt||t===zs}function ay(t){return t===Gt||t===Wn||t===jn||t===Fn}const Ss=Math.sqrt(3),Es=2/Ss,ly={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*Es,o=r/2;t.moveTo(0,r),t.lineTo(n,o),t.lineTo(n,-o),t.lineTo(0,-r),t.lineTo(-n,-o),t.lineTo(-n,o),t.closePath()}},ti=new Map([["asterisk",$d],["circle",So],["cross",vd],["diamond",xd],["diamond2",wd],["hexagon",ly],["plus",bd],["square",kd],["square2",Md],["star",Ad],["times",Ld],["triangle",zd],["triangle2",Sd],["wye",Ed]]);function ei(t){return t&&typeof t.draw=="function"}function sy(t){return ei(t)?!0:typeof t!="string"?!1:ti.has(t.toLowerCase())}function ni(t){if(t==null||ei(t))return t;const e=ti.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function cy(t){if(t==null||ei(t))return[void 0,t];if(typeof t=="string"){const e=ti.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function jt({filter:t,sort:e,reverse:n,transform:r,initializer:o,...i}={},a){if(r===void 0&&(t!=null&&(r=ii(t)),e!=null&&!ye(e)&&(r=ri(r,li(e))),n&&(r=ri(r,ai))),a!=null&&o!=null)throw new Error("transforms cannot be applied after initializers");return{...i,...(e===null||ye(e))&&{sort:e},transform:ri(r,a)}}function Mt({filter:t,sort:e,reverse:n,initializer:r,...o}={},i){return r===void 0&&(t!=null&&(r=ii(t)),e!=null&&!ye(e)&&(r=oi(r,li(e))),n&&(r=oi(r,ai))),{...o,...(e===null||ye(e))&&{sort:e},initializer:oi(r,i)}}function ri(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,o){return{data:n,facets:r}=t.call(this,n,r,o),e.call(this,Ue(n),r,o)}}function oi(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,o,...i){let a,l,s,c,u,f;return{data:l=n,facets:s=r,channels:a}=t.call(this,n,r,o,...i),{data:u=l,facets:f=s,channels:c}=e.call(this,l,s,{...o,...a},...i),{data:u,facets:f,channels:{...a,...c}}}}function Or(t,e){return(t.initializer!=null?Mt:jt)(t,e)}function uy(t,e){return Or(e,ii(t))}function ii(t){return(e,n)=>{const r=H(e,t);return{data:e,facets:n.map(o=>o.filter(i=>r[i]))}}}function fy({sort:t,...e}={}){return{...Or(e,ai),sort:ye(t)?t:null}}function ai(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function hy({seed:t,sort:e,...n}={}){return{...Or(n,Cs(t==null?Math.random:Eo(t))),sort:ye(e)?e:null}}function Os(t,{sort:e,...n}={}){return{...(_t(t)&&t.channel!==void 0?Mt:Or)(n,li(t)),sort:ye(e)?e:null}}function li(t){return(typeof t=="function"&&t.length!==1?dy:Cs)(t)}function dy(t){return(e,n)=>{const r=te(e)?(o,i)=>t(e[o],e[i]):(o,i)=>t(e.get(o),e.get(i));return{data:e,facets:n.map(o=>o.slice().sort(r))}}}function Cs(t){let e,n;({channel:e,value:t,order:n}={...Qe(t)});const r=e?.startsWith("-");if(r&&(e=e.slice(1)),n===void 0&&(n=r?gr:Tt),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Tt;break;case"descending":n=gr;break;default:throw new Error(`invalid order: ${n}`)}return(o,i,a)=>{let l;if(e===void 0)l=H(o,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(l=a[e],!l)return{};l=l.value}const s=(c,u)=>n(l[c],l[u]);return{data:o,facets:i.map(c=>c.slice().sort(s))}}}function si(t,e){return Cr(null,null,t,e)}function Dn(t={y:"count"},e={}){const{x:n=q}=e;if(n==null)throw new Error("missing channel: x");return Cr(n,null,t,e)}function qn(t={x:"count"},e={}){const{y:n=q}=e;if(n==null)throw new Error("missing channel: y");return Cr(null,n,t,e)}function ci(t={fill:"count"},e={}){let{x:n,y:r}=e;if([n,r]=Wt(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return Cr(n,r,t,e)}function Cr(t,e,{data:n=di,filter:r,sort:o,reverse:i,...a}={},l={}){a=Ns(a,l),n=Bs(n,q),o=o==null?void 0:Ts("sort",o,l),r=r==null?void 0:Is("filter",r,l);const[s,c]=Et(t),[u,f]=Et(e),{z:h,fill:d,stroke:p,x1:m,x2:v,y1:y,y2:g,...w}=l,[$,b]=Et(h),[x]=At(d),[k]=At(p),[M,A]=Et(x),[z,E]=Et(k);return{..."z"in l&&{z:$||h},..."fill"in l&&{fill:M||d},..."stroke"in l&&{stroke:z||p},...jt(w,(L,R,S)=>{const O=zr(H(L,t),S?.x),N=zr(H(L,e),S?.y),C=H(L,h),D=H(L,x),T=H(L,k),I=hi(a,{z:C,fill:D,stroke:T}),W=[],j=[],F=O&&c([]),G=N&&f([]),V=C&&b([]),_=D&&A([]),B=T&&E([]);let P=0;for(const X of a)X.initialize(L);o&&o.initialize(L),r&&r.initialize(L);for(const X of R){const Z=[];for(const K of a)K.scope("facet",X);o&&o.scope("facet",X),r&&r.scope("facet",X);for(const[K,nt]of Ie(X,I))for(const[ft,at]of Ie(nt,N))for(const[dt,yt]of Ie(at,O)){const kt={data:L};if(O&&(kt.x=dt),N&&(kt.y=ft),I&&(kt.z=K),!(r&&!r.reduce(yt,kt))){Z.push(P++),j.push(n.reduceIndex(yt,L,kt)),O&&F.push(dt),N&&G.push(ft),C&&V.push(I===C?K:C[yt[0]]),D&&_.push(I===D?K:D[yt[0]]),T&&B.push(I===T?K:T[yt[0]]);for(const Se of a)Se.reduce(yt,kt);o&&o.reduce(yt,kt)}}W.push(Z)}return Ws(W,o,i),{data:j,facets:W}}),...!$e(a,"x")&&(s?{x:s}:{x1:m,x2:v}),...!$e(a,"y")&&(u?{y:u}:{y1:y,y2:g}),...Object.fromEntries(a.map(({name:L,output:R})=>[L,R]))}}function $e(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function Rs(t,e,n=ui){const r=Object.entries(t);return e.title!=null&&t.title===void 0&&r.push(["title",vy]),e.href!=null&&t.href===void 0&&r.push(["href",pi]),r.filter(([,o])=>o!==void 0).map(([o,i])=>i===null?py(o):n(o,i,e))}function ui(t,e,n,r=fi){let o;Ct(e)&&"reduce"in e&&(o=e.scale,e=e.reduce);const i=r(t,e,n),[a,l]=Rt(i.label);let s;return{name:t,output:o===void 0?a:{value:a,scale:o},initialize(c){i.initialize(c),s=l([])},scope(c,u){i.scope(c,u)},reduce(c,u){s.push(i.reduce(c,u))}}}function py(t){return{name:t,initialize(){},scope(){},reduce(){}}}function fi(t,e,n,r=Rr){const o=xs(t,n),i=r(e,o);let a,l;return{label:Xt(i===Nr?null:o,i.label),initialize(s){a=o===void 0?s:H(s,o),i.scope==="data"&&(l=i.reduceIndex(ee(s),a))},scope(s,c){i.scope===s&&(l=i.reduceIndex(c,a))},reduce(s,c){return i.scope==null?i.reduceIndex(s,a,c):i.reduceIndex(s,a,l,c)}}}function Ie(t,e){return e?Oe(t,n=>e[n]):[[,t]]}function Rr(t,e,n=my){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&Ct(t))return gy(t);if(typeof t=="function")return $y(t);if(/^p\d{2}$/i.test(t))return ie(Ho(t));switch(`${t}`.toLowerCase()){case"first":return pi;case"last":return xy;case"identity":return di;case"count":return Nr;case"distinct":return wy;case"sum":return e==null?Nr:by;case"proportion":return Fs(e,"data");case"proportion-facet":return Fs(e,"facet");case"deviation":return ie(fr);case"min":return ie(Nt);case"min-index":return ie(Cd);case"max":return ie(zt);case"max-index":return ie(Od);case"mean":return js(ur);case"median":return js(An);case"variance":return ie(cl);case"mode":return ie(sl)}return n(t)}function my(t){throw new Error(`invalid reduce: ${t}`)}function Ns(t,e){return Rs(t,e,Ts)}function Ts(t,e,n){return ui(t,e,n,Is)}function Is(t,e,n){return fi(t,e,n,Bs)}function Bs(t,e){return Rr(t,e,yy)}function yy(t){switch(`${t}`.toLowerCase()){case"x":return ky;case"y":return My;case"z":return Ds}throw new Error(`invalid group reduce: ${t}`)}function hi(t,e){for(const n in e){const r=e[n];if(r!==void 0&&!t.some(o=>o.name===n))return r}}function Ws(t,e,n){if(e){const r=e.output.transform(),o=(i,a)=>Tt(r[i],r[a]);t.forEach(i=>i.sort(o))}n&&t.forEach(r=>r.reverse())}function gy(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function $y(t){return{reduceIndex(e,n,r){return t(Ar(n,e),r)}}}function ie(t){return{reduceIndex(e,n){return t(e,r=>n[r])}}}function js(t){return{reduceIndex(e,n){const r=t(e,o=>n[o]);return Lt(n)?new Date(r):r}}}const di={reduceIndex(t,e){return Ar(e,t)}},pi={reduceIndex(t,e){return e[t[0]]}},vy={reduceIndex(t,e){const n=ll(kn(t,o=>o.length,o=>e[o]),Rn),r=n.slice(-5).reverse();if(r.length<n.length){const o=n.slice(0,-4);r[4]=[`\u2026 ${o.length.toLocaleString("en-US")} more`,qt(o,Rn)]}return r.map(([o,i])=>`${o} (${i.toLocaleString("en-US")})`).join(`
`)}},xy={reduceIndex(t,e){return e[t[t.length-1]]}},Nr={label:"Frequency",reduceIndex(t){return t.length}},wy={label:"Distinct",reduceIndex(t,e){const n=new Mn;for(const r of t)n.add(e[r]);return n.size}},by=ie(qt);function Fs(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,r,o=1)=>n.length/o}:{scope:e,reduceIndex:(n,r,o=1)=>qt(n,i=>r[i])/o}}const ky={reduceIndex(t,e,{x:n}){return n}},My={reduceIndex(t,e,{y:n}){return n}},Ds={reduceIndex(t,e,{z:n}){return n}};function Ay(t){if(typeof t!="function")throw new Error(`invalid test function: ${t}`);return{reduceIndex(e,n,{data:r}){return n[e.find(te(r)?o=>t(r[o],o,r):o=>t(r.get(o),o,r))]}}}function Yn(t,{scale:e,type:n,value:r,filter:o,hint:i,label:a=Xt(r)},l){return i===void 0&&typeof r?.transform=="function"&&(i=r.hint),Ys(l,{scale:e,type:n,value:H(t,r),label:a,filter:o,hint:i})}function qs(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Yn(e,r,n)]))}function Tr(t,e){const n=Object.fromEntries(Object.entries(t).map(([r,{scale:o,value:i}])=>{const a=o==null?null:e[o];return[r,a==null?i:Q(i,a)]}));return n.channels=t,n}function Ys(t,e){const{scale:n,value:r}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&Ko(r,In)?null:"color",e.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&Ko(r,ty)?null:"opacity",e.defaultScale="opacity";break;case"symbol":n!==!0&&Ko(r,sy)?(e.scale=null,e.value=Q(r,ni)):e.scale="symbol",e.defaultScale="symbol";break;default:e.scale=st.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!st.has(n))throw new Error(`unknown scale: ${n}`);return e}function Ly(t,e,n,r,o){const{order:i,reverse:a,reduce:l=!0,limit:s}=o;for(const c in o){if(!st.has(c))continue;let{value:u,order:f=i,reverse:h=a,reduce:d=l,limit:p=s}=Qe(o[c]);const m=u?.startsWith("-");if(m&&(u=u.slice(1)),f=f===void 0?m!==(u==="width"||u==="height")?Xs:_s:Ey(f),d==null||d===!1)continue;const v=c==="fx"||c==="fy"?Sy(e,r[c]):zy(n,c);if(!v)throw new Error(`missing channel for scale: ${c}`);const y=v.value,[g=0,w=1/0]=re(p)?p:p<0?[p]:[0,p];if(u==null)v.domain=()=>{let $=Array.from(new Mn(y));return h&&($=$.reverse()),(g!==0||w!==1/0)&&($=$.slice(g,w)),$};else{const $=u==="data"?t:u==="height"?Ps(n,"y1","y2"):u==="width"?Ps(n,"x1","x2"):mi(n,u,u==="y"?"y2":u==="x"?"x2":void 0),b=Rr(d===!0?"max":d,$);v.domain=()=>{let x=Rd(ee(y),k=>b.reduceIndex(k,$),k=>y[k]);return f&&x.sort(f),h&&x.reverse(),(g!==0||w!==1/0)&&(x=x.slice(g,w)),x.map(Mr)}}}}function zy(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function Sy(t,e){const n=t.original;if(n===t)return e;const r=e.value,o=e.value=[];for(let i=0;i<n.length;++i){const a=r[n[i][0]];for(const l of t[i])o[l]=a}return e}function Ps(t,e,n){const r=mi(t,e),o=mi(t,n);return Q(o,(i,a)=>Math.abs(i-r[a]),Float64Array)}function mi(t,e,n){let r=t[e];if(!r&&n!==void 0&&(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function Ey(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return _s;case"descending":return Xs}throw new Error(`invalid order: ${t}`)}function _s([t,e],[n,r]){return Tt(e,r)||Tt(t,n)}function Xs([t,e],[n,r]){return gr(e,r)||Tt(t,n)}function yi(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}const Gs=new Map([["accent",Nd],["category10",Td],["dark2",Id],["observable10",Bd],["paired",Wd],["pastel1",jd],["pastel2",Fd],["set1",Dd],["set2",qd],["set3",Yd],["tableau10",Pd]]);function Oy(t){return t!=null&&Gs.has(`${t}`.toLowerCase())}const Vs=new Map([...Gs,["brbg",ae(_d,ul)],["prgn",ae(Xd,fl)],["piyg",ae(Gd,hl)],["puor",ae(Vd,dl)],["rdbu",ae(Gl,hr)],["rdgy",ae(Hd,pl)],["rdylbu",ae(Vl,dr)],["rdylgn",ae(Ud,ml)],["spectral",ae(Zd,yl)],["burd",Hs(Gl,hr)],["buylrd",Hs(Vl,dr)],["blues",$t(Kd,gl)],["greens",$t(Jd,$l)],["greys",$t(Qd,vl)],["oranges",$t(tp,bl)],["purples",$t(ep,xl)],["reds",$t(np,wl)],["turbo",le(kl)],["viridis",le(Ml)],["magma",le(Al)],["inferno",le(Ll)],["plasma",le(zl)],["cividis",le(Sl)],["cubehelix",le(El)],["warm",le(Ol)],["cool",le(Cl)],["bugn",$t(rp,Rl)],["bupu",$t(op,Nl)],["gnbu",$t(ip,Tl)],["orrd",$t(ap,Il)],["pubu",$t(lp,Wl)],["pubugn",$t(sp,Bl)],["purd",$t(cp,jl)],["rdpu",$t(up,Fl)],["ylgn",$t(fp,ql)],["ylgnbu",$t(hp,Dl)],["ylorbr",$t(dp,Yl)],["ylorrd",$t(pp,Pl)],["rainbow",Us(_l)],["sinebow",Us(Xl)]]);function $t(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Bt(e,n):t[n])}function ae(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Bt(e,n):t[n])}function Hs(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Bt(r=>e(1-r),n):t[n].slice().reverse())}function le(t){return({length:e})=>Bt(t,Math.max(2,Math.floor(e)))}function Us(t){return({length:e})=>Bt(t,Math.floor(e)+1).slice(0,-1)}function Zs(t){const e=`${t}`.toLowerCase();if(!Vs.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return Vs.get(e)}function Ir(t,e){const n=Zs(t),r=typeof n=="function"?n({length:e}):n;return r.length!==e?r.slice(0,e):r}function Cy(t,e="greys"){const n=new Set,[r,o]=Ir(e,2);for(const i of t)if(i!=null)if(i===!0)n.add(o);else if(i===!1)n.add(r);else return;return[...n]}const Ks=new Map([["brbg",ul],["prgn",fl],["piyg",hl],["puor",dl],["rdbu",hr],["rdgy",pl],["rdylbu",dr],["rdylgn",ml],["spectral",yl],["burd",t=>hr(1-t)],["buylrd",t=>dr(1-t)],["blues",gl],["greens",$l],["greys",vl],["purples",xl],["reds",wl],["oranges",bl],["turbo",kl],["viridis",Ml],["magma",Al],["inferno",Ll],["plasma",zl],["cividis",Sl],["cubehelix",El],["warm",Ol],["cool",Cl],["bugn",Rl],["bupu",Nl],["gnbu",Tl],["orrd",Il],["pubugn",Bl],["pubu",Wl],["purd",jl],["rdpu",Fl],["ylgnbu",Dl],["ylgn",ql],["ylorbr",Yl],["ylorrd",Pl],["rainbow",_l],["sinebow",Xl]]);function gi(t){const e=`${t}`.toLowerCase();if(!Ks.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Ks.get(e)}const Ry=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Ny(t){return t!=null&&Ry.has(`${t}`.toLowerCase())}const Js=t=>e=>t(1-e),$i=[0,1],Qs=new Map([["number",Ln],["rgb",Co],["hsl",bp],["hcl",kp],["lab",Mp]]);function tc(t){const e=`${t}`.toLowerCase();if(!Qs.has(e))throw new Error(`unknown interpolator: ${e}`);return Qs.get(e)}function Pn(t,e,n,{type:r,nice:o,clamp:i,zero:a,domain:l=rc(t,n),unknown:s,round:c,scheme:u,interval:f,range:h=st.get(t)===Wn?_y(n,l):st.get(t)===jn?Xy(n,l):st.get(t)===Fn?$i:void 0,interpolate:d=st.get(t)===oe?u==null&&h!==void 0?Co:gi(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):c?wp:Ln,reverse:p}){if(l=ec(l),f=Ke(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=tc(d)),p=!!p,h!==void 0){const m=l.length,v=(h=ec(h)).length;if(m!==v){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Ro(d,h),h=void 0}}if(d.length===1?(p&&(d=Js(d),p=!1),h===void 0&&(h=Float64Array.from(l,(m,v)=>v/(l.length-1)),h.length===2&&(h=$i)),e.interpolate((h===$i?wt:xi)(d))):e.interpolate(d),a){const[m,v]=gt(l);(m>0||v<0)&&(l=Nn(l),(Ge(l)||1)===Math.sign(m)?l[0]=0:l[l.length-1]=0)}return p&&(l=pr(l)),e.domain(l).unknown(s),o&&(e.nice(Ty(o,r)),l=e.domain()),h!==void 0&&e.range(h),i&&e.clamp(i),{type:r,domain:l,range:h,scale:e,interpolate:d,interval:f}}function ec(t){return t=me(t),t.length>=2?t:[t[0],t[0]]}function Ty(t,e){return t===!0?void 0:typeof t=="number"?t:Vm(t,e)}function Iy(t,e,n){return Pn(t,Hl(),e,n)}function By(t,e,n){return nc(t,e,{...n,exponent:.5})}function nc(t,e,{exponent:n=1,...r}){return Pn(t,$p().exponent(n),e,{...r,type:"pow"})}function Wy(t,e,{base:n=10,domain:r=Gy(e),...o}){return Pn(t,gp().base(n),e,{...o,domain:r})}function jy(t,e,{constant:n=1,...r}){return Pn(t,yp().constant(n),e,r)}function Fy(t,e,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:o=r,scheme:i="rdylbu",domain:a=Vy(e),unknown:l,interpolate:s,reverse:c}){return n===void 0&&(n=s!==void 0?Bt(s,o):st.get(t)===oe?Ir(i,o):void 0),a.length>0&&(a=vp(a,n===void 0?{length:o}:n).quantiles()),vi(t,e,{domain:a,range:n,reverse:c,unknown:l})}function Dy(t,e,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:o="rdylbu",domain:i=rc(t,e),unknown:a,interpolate:l,reverse:s}){const[c,u]=gt(i);let f;return n===void 0?(f=Oo(c,u,r),f[0]<=c&&f.splice(0,1),f[f.length-1]>=u&&f.pop(),r=f.length+1,n=l!==void 0?Bt(l,r):st.get(t)===oe?Ir(o,r):void 0):(f=Bt(Ln(c,u),r+1).slice(1,-1),c instanceof Date&&(f=f.map(h=>new Date(h)))),Ge(me(i))<0&&f.reverse(),vi(t,e,{domain:f,range:n,reverse:s,unknown:a})}function vi(t,e,{domain:n=[0],unknown:r,scheme:o="rdylbu",interpolate:i,range:a=i!==void 0?Bt(i,n.length+1):st.get(t)===oe?Ir(o,n.length+1):void 0,reverse:l}){n=me(n);const s=Ge(n);if(!isNaN(s)&&!qy(n,s))throw new Error(`the ${t} scale has a non-monotonic domain`);return l&&(a=pr(a)),{type:"threshold",scale:xp(s<0?pr(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function qy(t,e){for(let n=1,r=t.length,o=t[0];n<r;++n){const i=_e(o,o=t[n]);if(i!==0&&i!==e)return!1}return!0}function Yy(t){return{type:"identity",scale:ay(st.get(t))?mp():e=>e}}function _n(t,e=$r){return t.length?[Nt(t,({value:n})=>n===void 0?n:Nt(n,e)),zt(t,({value:n})=>n===void 0?n:zt(n,e))]:[0,1]}function rc(t,e){const n=st.get(t);return(n===Wn||n===Fn||n===jn?Py:_n)(e)}function Py(t){return[0,t.length?zt(t,({value:e})=>e===void 0?e:zt(e,$r)):1]}function _y(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=bn(t,.5,({value:a})=>a===void 0?NaN:bn(a,.25,Qt)),o=e.map(a=>3*Math.sqrt(a/r)),i=30/zt(o);return i<1?o.map(a=>a*i):o}function Xy(t,e){const n=An(t,({value:i})=>i===void 0?NaN:An(i,Math.abs)),r=e.map(i=>12*i/n),o=60/zt(r);return o<1?r.map(i=>i*o):r}function Gy(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return _n(t,Qt);if(n<0)return _n(t,vr)}return[1,10]}function Vy(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const r of n)e.push(r);return e}function xi(t){return(e,n)=>r=>t(e+r*(n-e))}let wi=0,bi;function Hy(){const t=wi;return wi=0,bi=void 0,t}function se(t){t!==bi&&(bi=t,console.warn(t),++wi)}function Br(t,e,n,r,{type:o,nice:i,clamp:a,domain:l=_n(r),unknown:s,pivot:c=0,scheme:u,range:f,symmetric:h=!0,interpolate:d=st.get(t)===oe?u==null&&f!==void 0?Co:gi(u!==void 0?u:"rdbu"):Ln,reverse:p}){c=+c,l=me(l);let[m,v]=l;if(l.length>2&&se(`Warning: the diverging ${t} scale domain contains extra elements.`),_e(m,v)<0&&([m,v]=[v,m],p=!p),m=Math.min(m,c),v=Math.max(v,c),typeof d!="function"&&(d=tc(d)),f!==void 0&&(d=d.length===1?xi(d)(...f):Ro(d,f)),p&&(d=Js(d)),h){const y=n.apply(c),g=y-n.apply(m),w=n.apply(v)-y;g<w?m=n.invert(y-w):g>w&&(v=n.invert(y+g))}return e.domain([m,c,v]).unknown(s).interpolator(d),a&&e.clamp(a),i&&e.nice(i),{type:o,domain:[m,v],pivot:c,interpolate:d,scale:e}}function Uy(t,e,n){return Br(t,Sp(),Qy,e,n)}function Zy(t,e,n){return oc(t,e,{...n,exponent:.5})}function oc(t,e,{exponent:n=1,...r}){return Br(t,zp().exponent(n=+n),ng(n),e,{...r,type:"diverging-pow"})}function Ky(t,e,{base:n=10,pivot:r=1,domain:o=_n(e,r<0?vr:Qt),...i}){return Br(t,Lp().base(n=+n),tg,e,{domain:o,pivot:r,...i})}function Jy(t,e,{constant:n=1,...r}){return Br(t,Ap().constant(n=+n),rg(n),e,r)}const Qy={apply(t){return t},invert(t){return t}},tg={apply:Math.log,invert:Math.exp},eg={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function ng(t){return t===.5?eg:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function rg(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function ic(t,e,n,r){return Pn(t,e,n,r)}function og(t,e,n){return ic(t,Ep(),e,n)}function ig(t,e,n){return ic(t,Op(),e,n)}const Xn=Symbol("ordinal");function ac(t,e,n,{type:r,interval:o,domain:i,range:a,reverse:l,hint:s}){return o=Ke(o,r),i===void 0&&(i=sc(n,o,t)),(r==="categorical"||r===Xn)&&(r="ordinal"),l&&(i=pr(i)),i=e.domain(i).domain(),a!==void 0&&(typeof a=="function"&&(a=a(i)),e.range(a)),{type:r,domain:i,range:a,scale:e,hint:s,interval:o}}function ag(t,e,{type:n,interval:r,domain:o,range:i,scheme:a,unknown:l,...s}){r=Ke(r,n),o===void 0&&(o=sc(e,r,t));let c;if(st.get(t)===Er)c=cg(e),i=i===void 0?ug(c):Q(i,ni);else if(st.get(t)===oe&&(i===void 0&&(n==="ordinal"||n===Xn)&&(i=Cy(o,a),i!==void 0&&(a=void 0)),a===void 0&&i===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(i!==void 0){const u=gi(a),f=i[0],h=i[1]-i[0];i=({length:d})=>Bt(p=>u(f+h*p),d)}else i=Zs(a);if(l===Rp)throw new Error(`implicit unknown on ${t} scale is not supported`);return ac(t,Np().unknown(l),e,{...s,type:n,domain:o,range:i,hint:c})}function lg(t,e,{align:n=.5,padding:r=.5,...o}){return lc(Cp().align(n).padding(r),e,o,t)}function sg(t,e,{align:n=.5,padding:r=.1,paddingInner:o=r,paddingOuter:i=t==="fx"||t==="fy"?0:r,...a}){return lc(Ul().align(n).paddingInner(o).paddingOuter(i),e,a,t)}function lc(t,e,n,r){let{round:o}=n;return o!==void 0&&t.round(o=!!o),t=ac(r,t,e,n),t.round=o,t}function sc(t,e,n){const r=new Mn;for(const{value:o,domain:i}of t){if(i!==void 0)return i();if(o!==void 0)for(const a of o)r.add(a)}if(e!==void 0){const[o,i]=gt(r).map(e.floor,e);return e.range(o,e.offset(i))}if(r.size>1e4&&st.get(n)===Gt)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return ll(r,Tt)}function cc(t,e){let n;for(const{hint:r}of t){const o=r?.[e];if(o!==void 0){if(n===void 0)n=o;else if(n!==o)return}}return n}function cg(t){return{fill:cc(t,"fill"),stroke:cc(t,"stroke")}}function ug(t){return lt(t.fill)?Tp:Ip}function ki(t,{label:e,inset:n=0,insetTop:r=n,insetRight:o=n,insetBottom:i=n,insetLeft:a=n,round:l,nice:s,clamp:c,zero:u,align:f,padding:h,projection:d,facet:{label:p=e}={},...m}={}){const v={};for(const[y,g]of t){const w=m[y],$=gc(y,g,{round:st.get(y)===Gt?l:void 0,nice:s,clamp:c,zero:u,align:f,padding:h,projection:d,...w});if($){let{label:b=y==="fx"||y==="fy"?p:e,percent:x,transform:k,inset:M,insetTop:A=M!==void 0?M:y==="y"?r:0,insetRight:z=M!==void 0?M:y==="x"?o:0,insetBottom:E=M!==void 0?M:y==="y"?i:0,insetLeft:L=M!==void 0?M:y==="x"?a:0}=w||{};if(k==null)k=void 0;else if(typeof k!="function")throw new Error("invalid scale transform; not a function");$.percent=!!x,$.label=b===void 0?hg(g,$):b,$.transform=k,y==="x"||y==="fx"?($.insetLeft=+L,$.insetRight=+z):(y==="y"||y==="fy")&&($.insetTop=+A,$.insetBottom=+E),v[y]=$}}return v}function uc(t){const e={},n={scales:e};for(const[r,o]of Object.entries(t)){const{scale:i,type:a,interval:l,label:s}=o;e[r]=wc(o),n[r]=i,i.type=a,l!=null&&(i.interval=l),s!=null&&(i.label=s)}return n}function fg(t,e){const{x:n,y:r,fx:o,fy:i}=t,a=o||i?Mi(e):e;o&&dc(o,a),i&&pc(i,a);const l=o||i?hc(t,e):e;n&&dc(n,l),r&&pc(r,l)}function hg(t=[],e){let n;for(const{label:r}of t)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Be(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function fc(t){return Math.sign(Ge(t.domain()))*Math.sign(Ge(t.range()))}function Mi(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:o,width:i,height:a,facet:{marginTop:l,marginRight:s,marginBottom:c,marginLeft:u}}=t;return{marginTop:Math.max(e,l),marginRight:Math.max(n,s),marginBottom:Math.max(r,c),marginLeft:Math.max(o,u),width:i,height:a}}function hc({fx:t,fy:e},n){const{marginTop:r,marginRight:o,marginBottom:i,marginLeft:a,width:l,height:s}=Mi(n);return{marginTop:r,marginRight:o,marginBottom:i,marginLeft:a,width:t?t.scale.bandwidth()+a+o:l,height:e?e.scale.bandwidth()+r+i:s,facet:{width:l,height:s}}}function dc(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:r}=t,{width:o,marginLeft:i=0,marginRight:a=0}=e,l=i+n,s=o-a-r;t.range=[l,Math.max(l,s)],Be(t)||(t.range=yc(t)),t.scale.range(t.range)}mc(t)}function pc(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:r}=t,{height:o,marginTop:i=0,marginBottom:a=0}=e,l=i+n,s=o-a-r;t.range=[Math.max(l,s),l],Be(t)?t.range.reverse():t.range=yc(t),t.scale.range(t.range)}mc(t)}function mc(t){t.round===void 0&&mg(t)&&dg(t)<=30&&t.scale.round(!0)}function dg({scale:t}){const e=t.domain().length,[n,r]=t.range(),o=t.paddingInner?t.paddingInner():1,i=t.paddingOuter?t.paddingOuter():t.padding(),a=e-o,l=Math.abs(r-n)/Math.max(1,a+i*2);return(l-Math.floor(l))*a}function yc(t){const e=t.scale.domain().length+xc(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},(o,i)=>n+i/(e-1)*(r-n))}function Ai(t,e,n){return gc(t,n===void 0?void 0:[{hint:n}],{...e})}function gc(t,e=[],n={}){const r=pg(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&Be({type:r})){const o=e.map(({value:i})=>i).filter(i=>i!==void 0);o.some(Lt)?se(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${nn(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${nn(r)}".`):o.some(Km)?se(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${nn(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${nn(r)}".`):o.some(Jm)&&se(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${nn(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${nn(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Wr(e,n,St);break;case"identity":switch(st.get(t)){case Gt:n=Wr(e,n,St);break;case Er:n=Wr(e,n,yg);break}break;case"utc":case"time":n=Wr(e,n,ds);break}switch(r){case"diverging":return Uy(t,e,n);case"diverging-sqrt":return Zy(t,e,n);case"diverging-pow":return oc(t,e,n);case"diverging-log":return Ky(t,e,n);case"diverging-symlog":return Jy(t,e,n);case"categorical":case"ordinal":case Xn:return ag(t,e,n);case"cyclical":case"sequential":case"linear":return Iy(t,e,n);case"sqrt":return By(t,e,n);case"threshold":return vi(t,e,n);case"quantile":return Fy(t,e,n);case"quantize":return Dy(t,e,n);case"pow":return nc(t,e,n);case"log":return Wy(t,e,n);case"symlog":return jy(t,e,n);case"utc":return ig(t,e,n);case"time":return og(t,e,n);case"point":return lg(t,e,n);case"band":return sg(t,e,n);case"identity":return Yy(t);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function nn(t){return typeof t=="symbol"?t.description:t}function $c(t){return typeof t=="string"?`${t}`.toLowerCase():t}const vc={toString:()=>"projection"};function pg(t,e,{type:n,domain:r,range:o,scheme:i,pivot:a,projection:l}){if(n=$c(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&l!=null&&(n=vc);for(const u of e){const f=$c(u.type);if(f!==void 0){if(n===void 0)n=f;else if(n!==f)throw new Error(`scale incompatible with channel: ${n} !== ${f}`)}}if(n===vc)return;if(n!==void 0)return n;if(r===void 0&&!e.some(({value:u})=>u!==void 0))return;const s=st.get(t);if(s===Wn)return"sqrt";if(s===Fn||s===jn)return"linear";if(s===Er)return"ordinal";const c=(r??o)?.length;if(c<2||c>2)return Li(s);if(r!==void 0){if(ut(r))return Li(s);if(Lt(r))return"utc"}else{const u=e.map(({value:f})=>f).filter(f=>f!==void 0);if(u.some(ut))return Li(s);if(u.some(Lt))return"utc"}if(s===oe){if(a!=null||Ny(i))return"diverging";if(Oy(i))return"categorical"}return"linear"}function Li(t){switch(t){case Gt:return"point";case oe:return Xn;default:return"ordinal"}}function Be({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Xn}function xc({type:t}){return t==="threshold"}function mg({type:t}){return t==="point"||t==="band"}function Vt(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,o=e.length;r<o;++r)if(t(e[r])-n)return!1;return!0}function Wr(t,{domain:e,...n},r){for(const o of t)o.value!==void 0&&(e===void 0&&(e=o.value?.domain),o.value=r(o.value));return{domain:e===void 0?e:r(e),...n}}function yg(t){return Q(t,ni)}function gg(t={}){let e;for(const n in t)if(st.has(n)&&Ne(t[n])){if(e!==void 0)throw new Error("ambiguous scale definition; multiple scales found");e=wc(Ai(n,t[n]))}if(e===void 0)throw new Error("invalid scale definition; no scale found");return e}function $g(t){return e=>{if(!st.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function wc({scale:t,type:e,domain:n,range:r,interpolate:o,interval:i,transform:a,percent:l,pivot:s}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=t.unknown?t.unknown():void 0;return{type:e,domain:Nn(n),...r!==void 0&&{range:Nn(r)},...a!==void 0&&{transform:a},...l&&{percent:l},...c!==void 0&&{unknown:c},...i!==void 0&&{interval:i},...o!==void 0&&{interpolate:o},...t.clamp&&{clamp:t.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function vg(t,e){const{fx:n,fy:r}=ki(t,e),o=n?.scale.domain(),i=r?.scale.domain();return o&&i?Bp(o,i).map(([a,l],s)=>({x:a,y:l,i:s})):o?o.map((a,l)=>({x:a,i:l})):i?i.map((a,l)=>({y:a,i:l})):void 0}function xg(t,{x:e,y:n}){return e&&=Si(e),n&&=Si(n),t.filter(e&&n?r=>e.has(r.x)&&n.has(r.y):e?r=>e.has(r.x):r=>n.has(r.y)).sort(e&&n?(r,o)=>e.get(r.x)-e.get(o.x)||n.get(r.y)-n.get(o.y):e?(r,o)=>e.get(r.x)-e.get(o.x):(r,o)=>n.get(r.y)-n.get(o.y))}function zi(t,{fx:e,fy:n}){const r=ee(t),o=e?.value,i=n?.value;return e&&n?kn(r,a=>(a.fx=o[a[0]],a.fy=i[a[0]],a),a=>o[a],a=>i[a]):e?kn(r,a=>(a.fx=o[a[0]],a),a=>o[a]):kn(r,a=>(a.fy=i[a[0]],a),a=>i[a])}function wg(t,e,{marginTop:n,marginLeft:r}){const o=t?({x:a})=>t(a)-r:()=>0,i=e?({y:a})=>e(a)-n:()=>0;return function(a){this.tagName==="svg"?(this.setAttribute("x",o(a)),this.setAttribute("y",i(a))):this.setAttribute("transform",`translate(${o(a)},${i(a)})`)}}function bg(t){const e=[],n=new Uint32Array(qt(t,r=>r.length));for(const r of t){let o=0;for(const i of t)r!==i&&(n.set(i,o),o+=i.length);e.push(n.slice(0,o))}return e}const kg=new Map([["top",Ei],["right",Ri],["bottom",Oi],["left",Ci],["top-left",Fr(Ei,Ci)],["top-right",Fr(Ei,Ri)],["bottom-left",Fr(Oi,Ci)],["bottom-right",Fr(Oi,Ri)],["top-empty",Lg],["right-empty",Eg],["bottom-empty",zg],["left-empty",Sg],["empty",Og]]);function Mg(t){if(t==null)return null;const e=kg.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const bc=new WeakMap;function Si(t){let e=bc.get(t);return e||bc.set(t,e=new No(Q(t,(n,r)=>[n,r]))),e}function ve(t,e){return Si(t).get(e)}function Ag(t,e,n){return e=ne(e),n=ne(n),t.find(r=>Object.is(ne(r.x),e)&&Object.is(ne(r.y),n))}function jr(t,e,n){return Ag(t,e,n)?.empty}function Ei(t,{y:e},{y:n}){return e?ve(e,n)===0:!0}function Oi(t,{y:e},{y:n}){return e?ve(e,n)===e.length-1:!0}function Ci(t,{x:e},{x:n}){return e?ve(e,n)===0:!0}function Ri(t,{x:e},{x:n}){return e?ve(e,n)===e.length-1:!0}function Lg(t,{y:e},{x:n,y:r,empty:o}){if(o)return!1;if(!e)return;const i=ve(e,r);if(i>0)return jr(t,n,e[i-1])}function zg(t,{y:e},{x:n,y:r,empty:o}){if(o)return!1;if(!e)return;const i=ve(e,r);if(i<e.length-1)return jr(t,n,e[i+1])}function Sg(t,{x:e},{x:n,y:r,empty:o}){if(o)return!1;if(!e)return;const i=ve(e,n);if(i>0)return jr(t,e[i-1],r)}function Eg(t,{x:e},{x:n,y:r,empty:o}){if(o)return!1;if(!e)return;const i=ve(e,n);if(i<e.length-1)return jr(t,e[i+1],r)}function Og(t,e,{empty:n}){return n}function Fr(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Ni(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map(({x:o,y:i})=>r.get(o)?.get(i)??[]):e?t.map(({x:o})=>r.get(o)??[]):t.map(({y:o})=>r.get(o)??[])}const kc=Math.PI,ce=2*kc,Ti=.618;function Cg({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:o=e,insetLeft:i=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let l,s,c="frame";if(Ct(t)){let b;if({type:t,domain:s,inset:b,insetTop:n=b!==void 0?b:n,insetRight:r=b!==void 0?b:r,insetBottom:o=b!==void 0?b:o,insetLeft:i=b!==void 0?b:i,clip:c=c,...l}=t,t==null)return}typeof t!="function"&&({type:t}=Ii(t));const{width:u,height:f,marginLeft:h,marginRight:d,marginTop:p,marginBottom:m}=a,v=u-h-d-i-r,y=f-p-m-n-o;if(t=t?.({width:v,height:y,clip:c,...l}),t==null)return;c=Rg(c,h,p,u-d,f-m);let g=h+i,w=p+n,$;if(s!=null){const[[b,x],[k,M]]=zn(t).bounds(s),A=Math.min(v/(k-b),y/(M-x));A>0?(g-=(A*(b+k)-v)/2,w-=(A*(x+M)-y)/2,$=mr({point(z,E){this.stream.point(z*A+g,E*A+w)}})):se("Warning: the projection could not be fit to the specified domain; using the default scale.")}return $??=g===0&&w===0?Mc():mr({point(b,x){this.stream.point(b+g,x+w)}}),{stream:b=>t.stream($.stream(c(b)))}}function Ii(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Ft(Jp,.7463,.4673);case"albers":return Dr(Kp,.7463,.4673);case"azimuthal-equal-area":return Ft(Zp,4,4);case"azimuthal-equidistant":return Ft(Up,ce,ce);case"conic-conformal":return Dr(Hp,ce,ce);case"conic-equal-area":return Dr(Vp,6.1702,2.9781);case"conic-equidistant":return Dr(Gp,7.312,3.6282);case"equal-earth":return Ft(Xp,5.4133,2.6347);case"equirectangular":return Ft(_p,ce,kc);case"gnomonic":return Ft(Pp,3.4641,3.4641);case"identity":return{type:Mc};case"reflect-y":return{type:Ng};case"mercator":return Ft(Yp,ce,ce);case"orthographic":return Ft(qp,2,2);case"stereographic":return Ft(Dp,2,2);case"transverse-mercator":return Ft(Fp,ce,ce);default:throw new Error(`unknown projection type: ${t}`)}}function Rg(t,e,n,r,o){if(t===!1||t==null||typeof t=="number")return i=>i;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return jp(e,n,r,o);default:throw new Error(`unknown projection clip type: ${t}`)}}function Ft(t,e,n){return{type:({width:r,height:o,rotate:i,precision:a=.15,clip:l})=>{const s=t();return a!=null&&s.precision?.(a),i!=null&&s.rotate?.(i),typeof l=="number"&&s.clipAngle?.(l),r!=null&&(s.scale(Math.min(r/e,o/n)),s.translate([r/2,o/2])),s},aspectRatio:n/e}}function Dr(t,e,n){const{type:r,aspectRatio:o}=Ft(t,e,n);return{type:i=>{const{parallels:a,domain:l,width:s,height:c}=i,u=r(i);return a!=null&&(u.parallels(a),l===void 0&&s!=null&&u.fitSize([s,c],{type:"Sphere"})),u},aspectRatio:o}}const Mc=wt({stream:t=>t}),Ng=wt(mr({point(t,e){this.stream.point(t,-e)}}));function Ac(t,e,n,r){const o=n[t],i=n[e],a=o.length,l=n[t]=new Float64Array(a).fill(NaN),s=n[e]=new Float64Array(a).fill(NaN);let c;const u=r.stream({point(f,h){l[c]=f,s[c]=h}});for(c=0;c<a;++c)u.point(o[c],i[c])}function Tg({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(Ct(t)&&(t=t.type),t!=null)}function Ig(t){if(typeof t?.stream=="function")return Ti;if(Ct(t)){let e,n;if({domain:e,type:t,...n}=t,e!=null&&t!=null){const r=typeof t=="string"?Ii(t).type:t,[[o,i],[a,l]]=zn(r({...n,width:100,height:100})).bounds(e),s=(l-i)/(a-o);return s&&isFinite(s)?s<.2?.2:s>5?5:s:Ti}}if(t!=null){if(typeof t!="function"){const{aspectRatio:e}=Ii(t);if(e)return e}return Ti}}function Gn(t,e,{projection:n}){const{x:r,y:o}=t;let i={};return r&&(i.x=r),o&&(i.y=o),i=Tr(i,e),n&&r?.scale==="x"&&o?.scale==="y"&&Ac("x","y",i,n),r&&(i.x=St(i.x)),o&&(i.y=St(i.y)),i}function Bg(t){const e=[],n=[],r={scale:"x",value:e},o={scale:"y",value:n},i={point(a,l){e.push(a),n.push(l)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)Wp(a,i);return[r,o]}function Wg({x:t,y:e}){if(t||e)return t??=n=>n,e??=n=>n,mr({point(n,r){this.stream.point(t(n),e(r))}})}function qr(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:Ms(n)}}function U(t,{document:e}){return Kt(Zl(t).call(e.documentElement))}const Bi=Symbol("unset");function rn(t){return(t.length===1?jg:Fg)(t)}function jg(t){let e,n=Bi;return r=>(Object.is(n,r)||(n=r,e=t(r)),e)}function Fg(t){let e,n;return(...r)=>((n?.length!==r.length||n.some((o,i)=>!Object.is(o,r[i])))&&(n=r,e=t(...r)),e)}const Dg=rn(t=>new Intl.NumberFormat(t)),qg=rn((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{month:e}})),Yg=rn((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{weekday:e}}));function Lc(t="en-US"){const e=Dg(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function Pg(t="en-US",e="short"){const n=qg(t,e);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2e3,+r)))?n.format(r):void 0}function _g(t="en-US",e="short"){const n=Yg(t,e);return r=>r!=null&&!isNaN(r=+new Date(Date.UTC(2001,0,+r)))?n.format(r):void 0}function zc(t){return Im(t,"Invalid Date")}function Xg(t="en-US"){const e=Lc(t);return n=>(n instanceof Date?zc:typeof n=="number"?e:xt)(n)}const on=Xg(),bt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let Gg=0,Vg=0;function Wi(){return`plot-clip-${++Gg}`}function Hg(){return`plot-pattern-${++Vg}`}function Sc(t,{title:e,href:n,ariaLabel:r,ariaDescription:o,ariaHidden:i,target:a,fill:l,fillOpacity:s,stroke:c,strokeWidth:u,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:v,opacity:y,mixBlendMode:g,imageFilter:w,paintOrder:$,pointerEvents:b,shapeRendering:x,channels:k},{ariaLabel:M,fill:A="currentColor",fillOpacity:z,stroke:E="none",strokeOpacity:L,strokeWidth:R,strokeLinecap:S,strokeLinejoin:O,strokeMiterlimit:N,paintOrder:C}){A===null&&(l=null,s=null),E===null&&(c=null,f=null),lt(A)?!lt(E)&&(!lt(l)||k?.fill)&&(E="none"):lt(E)&&(!lt(c)||k?.stroke)&&(A="none");const[D,T]=At(l,A),[I,W]=ht(s,z),[j,F]=At(c,E),[G,V]=ht(f,L),[_,B]=ht(y);en(F)||(u===void 0&&(u=R),d===void 0&&(d=S),h===void 0&&(h=O),p===void 0&&!ey(h)&&(p=N),!en(T)&&$===void 0&&($=C));const[P,X]=ht(u);return A!==null&&(t.fill=mt(T,"currentColor"),t.fillOpacity=Vn(W,1)),E!==null&&(t.stroke=mt(F,"none"),t.strokeWidth=Vn(X,1),t.strokeOpacity=Vn(V,1),t.strokeLinejoin=mt(h,"miter"),t.strokeLinecap=mt(d,"butt"),t.strokeMiterlimit=Vn(p,4),t.strokeDasharray=mt(m,"none"),t.strokeDashoffset=mt(v,"0")),t.target=xt(a),t.ariaLabel=xt(M),t.ariaDescription=xt(o),t.ariaHidden=xt(i),t.opacity=Vn(B,1),t.mixBlendMode=mt(g,"normal"),t.imageFilter=mt(w,"none"),t.paintOrder=mt($,"normal"),t.pointerEvents=mt(b,"auto"),t.shapeRendering=mt(x,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:D,scale:"auto",optional:!0},fillOpacity:{value:I,scale:"auto",optional:!0},stroke:{value:j,scale:"auto",optional:!0},strokeOpacity:{value:G,scale:"auto",optional:!0},strokeWidth:{value:P,optional:!0},opacity:{value:_,scale:"auto",optional:!0}}}function Ug(t,e){e&&t.filter(n=>Fo(e[n])).append("title").call(Kg,e)}function Zg(t,e){e&&t.filter(([n])=>Fo(e[n])).append("title").call(Jg,e)}function Kg(t,e){e&&t.text(n=>on(e[n]))}function Jg(t,e){e&&t.text(([n])=>on(e[n]))}function ct(t,{target:e,tip:n},{ariaLabel:r,title:o,fill:i,fillOpacity:a,stroke:l,strokeOpacity:s,strokeWidth:c,opacity:u,href:f}){r&&Y(t,"aria-label",h=>r[h]),i&&Y(t,"fill",h=>i[h]),a&&Y(t,"fill-opacity",h=>a[h]),l&&Y(t,"stroke",h=>l[h]),s&&Y(t,"stroke-opacity",h=>s[h]),c&&Y(t,"stroke-width",h=>c[h]),u&&Y(t,"opacity",h=>u[h]),f&&Cc(t,h=>f[h],e),n||Ug(t,o)}function Yr(t,{target:e,tip:n},{ariaLabel:r,title:o,fill:i,fillOpacity:a,stroke:l,strokeOpacity:s,strokeWidth:c,opacity:u,href:f}){r&&Y(t,"aria-label",([h])=>r[h]),i&&Y(t,"fill",([h])=>i[h]),a&&Y(t,"fill-opacity",([h])=>a[h]),l&&Y(t,"stroke",([h])=>l[h]),s&&Y(t,"stroke-opacity",([h])=>s[h]),c&&Y(t,"stroke-width",([h])=>c[h]),u&&Y(t,"opacity",([h])=>u[h]),f&&Cc(t,([h])=>f[h],e),n||Zg(t,o)}function Qg({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:o,strokeOpacity:i,strokeWidth:a,opacity:l,href:s},{tip:c}){return[t,c?void 0:e,n,r,o,i,a,l,s].filter(u=>u!==void 0)}function ji(t,e,n){const r=Oe(t,o=>e[o]);return n===void 0&&r.size>1+t.length>>1&&se("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Ec(t,e,n,r){const{z:o}=n,{z:i}=r,a=Qg(r,n),l=[...e,...a];for(const s of i?ji(t,i,o):[t]){let c,u;t:for(const f of s){for(const h of l)if(!vt(h[f])){u&&u.push(-1);continue t}if(c===void 0){u&&(yield u),c=a.map(h=>ne(h[f])),u=[f];continue}u.push(f);for(let h=0;h<a.length;++h)if(ne(a[h][f])!==c[h]){yield u,c=a.map(d=>ne(d[f])),u=[f];continue t}}u&&(yield u)}}function t$(t,e,n,r){let o;const{clip:i=r.clip}=e;i==="frame"?(t=U("svg:g",r).each(function(){this.appendChild(t.node()),t.node=()=>this}),o=n$(r,n)):i&&(o=o$(i,r)),Y(t,"aria-label",e.ariaLabel),Y(t,"aria-description",e.ariaDescription),Y(t,"aria-hidden",e.ariaHidden),Y(t,"clip-path",o)}function e$(t){const e=new WeakMap;return(n,r)=>{let o=e.get(n);if(!o){const i=Wi();Kt(n.ownerSVGElement).append("clipPath").attr("id",i).call(t,n,r),e.set(n,o=`url(#${i})`)}return o}}const n$=e$((t,e,n)=>{const{width:r,height:o,marginLeft:i,marginRight:a,marginTop:l,marginBottom:s}=n;t.append("rect").attr("x",i).attr("y",l).attr("width",r-a-i).attr("height",o-l-s)}),Oc=new WeakMap,r$={type:"Sphere"};function o$(t,e){let n,r;if((n=Oc.get(e))||Oc.set(e,n=new WeakMap),t.type==="Sphere"&&(t=r$),!(r=n.get(t))){const o=Wi();Kt(e.ownerSVGElement).append("clipPath").attr("id",o).append("path").attr("d",e.path()(t)),n.set(t,r=`url(#${o})`)}return r}function ot(t,e,n,r){t$(t,e,n,r),Y(t,"class",e.className),Y(t,"fill",e.fill),Y(t,"fill-opacity",e.fillOpacity),Y(t,"stroke",e.stroke),Y(t,"stroke-width",e.strokeWidth),Y(t,"stroke-opacity",e.strokeOpacity),Y(t,"stroke-linejoin",e.strokeLinejoin),Y(t,"stroke-linecap",e.strokeLinecap),Y(t,"stroke-miterlimit",e.strokeMiterlimit),Y(t,"stroke-dasharray",e.strokeDasharray),Y(t,"stroke-dashoffset",e.strokeDashoffset),Y(t,"shape-rendering",e.shapeRendering),Y(t,"filter",e.imageFilter),Y(t,"paint-order",e.paintOrder);const{pointerEvents:o=r.pointerSticky===!1?"none":void 0}=e;Y(t,"pointer-events",o)}function J(t,e){i$(t,"mix-blend-mode",e.mixBlendMode),Y(t,"opacity",e.opacity)}function Cc(t,e,n){t.each(function(r){const o=e(r);if(o!=null){const i=this.ownerDocument.createElementNS(Ce.svg,"a");i.setAttribute("fill","inherit"),i.setAttributeNS(Ce.xlink,"href",o),n!=null&&i.setAttribute("target",n),this.parentNode.insertBefore(i,this).appendChild(this)}})}function Y(t,e,n){n!=null&&t.attr(e,n)}function i$(t,e,n){n!=null&&t.style(e,n)}function tt(t,e,{x:n,y:r},o=bt,i=bt){o+=e.dx,i+=e.dy,n?.bandwidth&&(o+=n.bandwidth()/2),r?.bandwidth&&(i+=r.bandwidth()/2),(o||i)&&t.attr("transform",`translate(${o},${i})`)}function mt(t,e){if((t=xt(t))!==e)return t}function Vn(t,e){if((t=rt(t))!==e)return t}const a$=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Fi(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!a$.test(t))throw new Error(`invalid class name: ${t}`);return t}function Di(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function Ht({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:o,marginBottom:i,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-o:(a+e-o)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-i:(r+n-i)/2]}let et=class{constructor(e,n={},r={},o){const{facet:i="auto",facetAnchor:a,fx:l,fy:s,sort:c,dx:u=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:p=h,marginBottom:m=h,marginLeft:v=h,className:y,clip:g=o?.clip,channels:w,tip:$,render:b}=r;if(this.data=e,this.sort=ye(c)?c:null,this.initializer=Mt(r).initializer,this.transform=this.initializer?r.transform:jt(r).transform,i===null||i===!1?this.facet=null:(this.facet=Ot(i===!0?"include":i,"facet",["auto","include","exclude","super"]),this.fx=e===Cn&&typeof l=="string"?[l]:l,this.fy=e===Cn&&typeof s=="string"?[s]:s),this.facetAnchor=Mg(a),n=Qo(n),w!==void 0&&(n={...l$(w),...n}),o!==void 0&&(n={...Sc(this,r,o),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,k])=>{if(_t(k.value)){const{value:M,label:A=k.label,scale:z=k.scale}=k.value;k={...k,label:A,scale:z,value:M}}if(e===Cn&&typeof k.value=="string"){const{value:M}=k;k={...k,value:[M]}}return[x,k]}).filter(([x,{value:k,optional:M}])=>{if(k!=null)return!0;if(M)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+u,this.dy=+f,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+v,this.clip=Ms(g),this.tip=s$($),this.className=xt(y),this.facet==="super"){if(l||s)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:k}=n[x];if(!(k!=="x"&&k!=="y"))throw new Error("super-faceting cannot use x or y")}}b!=null&&(this.render=Hn(b,this.render))}initialize(e,n,r){let o=Ue(this.data);e===void 0&&o!=null&&(e=[ee(o)]);const i=e;this.transform!=null&&({facets:e,data:o}=this.transform(o,e,r),o=Ue(o)),e!==void 0&&(e.original=i);const a=qs(this.channels,o);return this.sort!=null&&Ly(o,e,a,n,this.sort),{data:o,facets:e,channels:a}}filter(e,n,r){for(const o in n){const{filter:i=vt}=n[o];if(i!==null){const a=r[o];e=e.filter(l=>i(a[l]))}}return e}project(e,n,r){for(const o in e)if(e[o].scale==="x"&&/^x|x$/.test(o)){const i=o.replace(/^x|x$/,"y");i in e&&e[i].scale==="y"&&Ac(o,i,n,r.projection)}}scale(e,n,r){const o=Tr(e,n);return r.projection&&this.project(e,o,r),o}};function It(...t){return t.plot=et.prototype.plot,t}function Hn(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,r,o,i,a,l){return t.call(this,n,r,o,i,a,(s,c,u,f,h)=>e.call(this,s,c,u,f,h,l))}}function l$(t){return Object.fromEntries(Object.entries(Qo(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:Qe(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function s$(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Ot(t,"tip",["x","y","xy"]):t}function We(t,e){return t?.tip===!0?{...t,tip:e}:Ct(t?.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}function c$(t,e,n={}){let r=.5-bt,o=.5+bt,i=.5+bt,a=.5-bt;for(const{marginTop:m,marginRight:v,marginBottom:y,marginLeft:g}of e)m>r&&(r=m),v>o&&(o=v),y>i&&(i=y),g>a&&(a=g);let{margin:l,marginTop:s=l!==void 0?l:r,marginRight:c=l!==void 0?l:o,marginBottom:u=l!==void 0?l:i,marginLeft:f=l!==void 0?l:a}=n;s=+s,c=+c,u=+u,f=+f;let{width:h=640,height:d=u$(t,n,{width:h,marginTopDefault:r,marginRightDefault:o,marginBottomDefault:i,marginLeftDefault:a})+Math.max(0,s-r+u-i)}=n;h=+h,d=+d;const p={width:h,height:d,marginTop:s,marginRight:c,marginBottom:u,marginLeft:f};if(t.fx||t.fy){let{margin:m,marginTop:v=m!==void 0?m:s,marginRight:y=m!==void 0?m:c,marginBottom:g=m!==void 0?m:u,marginLeft:w=m!==void 0?m:f}=n.facet??{};v=+v,y=+y,g=+g,w=+w,p.facet={marginTop:v,marginRight:y,marginBottom:g,marginLeft:w}}return p}function u$({x:t,y:e,fy:n,fx:r},{projection:o,aspectRatio:i},{width:a,marginTopDefault:l,marginRightDefault:s,marginBottomDefault:c,marginLeftDefault:u}){const f=n&&n.scale.domain().length||1,h=Ig(o);if(h){const p=r?r.scale.domain().length:1,m=(1.1*f-.1)/(1.1*p-.1)*h,v=Math.max(.1,Math.min(10,m));return Math.round((a-u-s)*v+l+c)}const d=e?Be(e)?e.scale.domain().length||1:Math.max(7,17/f):1;if(i!=null){if(i=+i,!(isFinite(i)&&i>0))throw new Error(`invalid aspectRatio: ${i}`);const p=Rc("y",e)/(Rc("x",t)*i),m=r?r.scale.bandwidth():1,v=n?n.scale.bandwidth():1,y=m*(a-u-s)-t.insetLeft-t.insetRight;return(p*y+e.insetTop+e.insetBottom)/v+l+c}return!!(e||n)*Math.max(1,Math.min(60,d*f))*20+!!r*30+60}function Rc(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let o;switch(n){case"linear":case"utc":case"time":o=Number;break;case"pow":{const l=e.scale.exponent();o=s=>Math.pow(s,l);break}case"log":o=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[i,a]=gt(r);return Math.abs(o(a)-o(i))}const Nc=new WeakMap;function qi(t,e,{x:n,y:r,px:o,py:i,maxRadius:a=40,channels:l,render:s,...c}={}){return a=+a,o!=null&&(n??=null,l={...l,px:{value:o,scale:"x"}}),i!=null&&(r??=null,l={...l,py:{value:i,scale:"y"}}),{x:n,y:r,channels:l,...c,render:Hn(function(u,f,h,d,p,m){p={...p,pointerSticky:!1};const v=p.ownerSVGElement,{data:y}=p.getMarkState(this);let g=Nc.get(v);g||Nc.set(v,g={sticky:!1,roots:[],renders:[]});let w=g.renders.push(F)-1;const{x:$,y:b,fx:x,fy:k}=f;let M=x?x(u.fx)-d.marginLeft:0,A=k?k(u.fy)-d.marginTop:0;$?.bandwidth&&(M+=$.bandwidth()/2),b?.bandwidth&&(A+=b.bandwidth()/2);const z=u.fi!=null;let E;if(z){let B=g.facetStates;B||(g.facetStates=B=new Map),E=B.get(this),E||B.set(this,E=new Map)}const[L,R]=Ht(this,d),{px:S,py:O}=h,N=S?B=>S[B]:Tc(h,L),C=O?B=>O[B]:Ic(h,R);let D,T,I,W;function j(B,P){if(z)if(W&&(W=cancelAnimationFrame(W)),B==null)E.delete(u.fi);else{E.set(u.fi,P),W=requestAnimationFrame(()=>{W=null;for(const[X,Z]of E)if(Z<P||Z===P&&X<u.fi){B=null;break}F(B)});return}F(B)}function F(B){if(D===B&&I===g.sticky)return;D=B,I=p.pointerSticky=g.sticky;const P=D==null?[]:[D];z&&(P.fx=u.fx,P.fy=u.fy,P.fi=u.fi);const X=m(P,f,h,d,p);if(T){if(z){const Z=T.parentNode,K=T.getAttribute("transform"),nt=X.getAttribute("transform");K?X.setAttribute("transform",K):X.removeAttribute("transform"),nt?Z.setAttribute("transform",nt):Z.removeAttribute("transform"),X.removeAttribute("aria-label"),X.removeAttribute("aria-description"),X.removeAttribute("aria-hidden")}T.replaceWith(X)}if(g.roots[w]=T=X,!(D==null&&E?.size>1)){const Z=D==null?null:te(y)?y[D]:y.get(D);p.dispatchValue(Z)}return X}function G(B){if(g.sticky||B.pointerType==="mouse"&&B.buttons===1)return;let[P,X]=Qp(B);P-=M,X-=A;const Z=P<d.marginLeft||P>d.width-d.marginRight?1:t,K=X<d.marginTop||X>d.height-d.marginBottom?1:e;let nt=null,ft=a*a;for(const at of u){const dt=Z*(N(at)-P),yt=K*(C(at)-X),kt=dt*dt+yt*yt;kt<=ft&&(nt=at,ft=kt)}if(nt!=null&&(t!==1||e!==1)){const at=N(nt)-P,dt=C(nt)-X;ft=at*at+dt*dt}j(nt,ft)}function V(B){B.pointerType==="mouse"&&D!=null&&(g.sticky&&g.roots.some(P=>P?.contains(B.target))||(g.sticky?(g.sticky=!1,g.renders.forEach(P=>P(null))):(g.sticky=!0,F(D)),B.stopImmediatePropagation()))}function _(B){B.pointerType==="mouse"&&(g.sticky||j(null))}return v.addEventListener("pointerenter",G),v.addEventListener("pointermove",G),v.addEventListener("pointerdown",V),v.addEventListener("pointerleave",_),F(null)},s)}}function Yi(t){return qi(1,1,t)}function Pi(t){return qi(1,.01,t)}function Pr(t){return qi(.01,1,t)}function Tc({x1:t,x2:e,x:n=t},r){return t&&e?o=>(t[o]+e[o])/2:n?o=>n[o]:()=>r}function Ic({y1:t,y2:e,y:n=t},r){return t&&e?o=>(t[o]+e[o])/2:n?o=>n[o]:()=>r}function Bc(t){return Be(t)&&t.interval===void 0?void 0:"tabular-nums"}function f$(t,e){let{label:n=t.label,tickSize:r=6,width:o=240,height:i=44+r,marginTop:a=18,marginRight:l=0,marginBottom:s=16+r,marginLeft:c=0,style:u,ticks:f=(o-c-l)/64,tickFormat:h,fontVariant:d=Bc(t),round:p=!0,opacity:m,className:v}=e;const y=qr(e);v=Fi(v),m=ht(m)[1],h===null&&(h=()=>null);const g=U("svg",y).attr("class",`${v}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",o).attr("height",i).attr("viewBox",`0 0 ${o} ${i}`).call(L=>L.append("style").text(`:where(.${v}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${v}-ramp text) {
  white-space: pre;
}`)).call(Di,u);let w=L=>L.selectAll(".tick line").attr("y1",a+s-i),$;const b=p?(L,R)=>L.rangeRound(R):(L,R)=>L.range(R),{type:x,domain:k,range:M,interpolate:A,scale:z,pivot:E}=t;if(A){const L=M===void 0?A:Ro(A.length===1?xi(A):A,M);$=b(z.copy(),Bt(Ln(c,o-l),Math.min(k.length+(E!==void 0),M===void 0?1/0:M.length)));const R=256,S=y.document.createElement("canvas");S.width=R,S.height=1;const O=S.getContext("2d");for(let N=0,C=R-1;N<R;++N)O.fillStyle=L(N/C),O.fillRect(N,0,1,1);g.append("image").attr("opacity",m).attr("x",c).attr("y",a).attr("width",o-c-l).attr("height",i-a-s).attr("preserveAspectRatio","none").attr("xlink:href",S.toDataURL())}else if(x==="threshold"){const L=k,R=h===void 0?S=>S:typeof h=="string"?To(h):h;$=b(Hl().domain([-1,M.length-1]),[c,o-l]),g.append("g").attr("fill-opacity",m).selectAll().data(M).enter().append("rect").attr("x",(S,O)=>$(O-1)).attr("y",a).attr("width",(S,O)=>$(O)-$(O-1)).attr("height",i-a-s).attr("fill",S=>S),f=Q(L,(S,O)=>O),h=S=>R(L[S],S)}else $=b(Ul().domain(k),[c,o-l]),g.append("g").attr("fill-opacity",m).selectAll().data(k).enter().append("rect").attr("x",$).attr("y",a).attr("width",Math.max(0,$.bandwidth()-1)).attr("height",i-a-s).attr("fill",z),w=()=>{};return g.append("g").attr("transform",`translate(0,${i-s})`).call(tm($).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",mt(d,"normal")).call(w).call(L=>L.select(".domain").remove()),n!==void 0&&g.append("text").attr("x",c).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),g.node()}const _r=Math.PI/180;function an(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:o=e}={}){t.markerStart=_i(n),t.markerMid=_i(r),t.markerEnd=_i(o)}function _i(t){if(t==null||t===!1)return null;if(t===!0)return jc;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Wc("auto");case"arrow-reverse":return Wc("auto-start-reverse");case"dot":return h$;case"circle":case"circle-fill":return jc;case"circle-stroke":return d$;case"tick":return Xi("auto");case"tick-x":return Xi(90);case"tick-y":return Xi(0)}throw new Error(`invalid marker: ${t}`)}function Wc(t){return(e,n)=>U("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function h$(t,e){return U("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function jc(t,e){return U("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function d$(t,e){return U("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Xi(t){return(e,n)=>U("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let p$=0;function Un(t,e,{stroke:n},r){return Dc(t,e,n&&(o=>n[o]),null,r)}function m$(t,e,{stroke:n,z:r},o){return Dc(t,e,n&&(([i])=>n[i]),r,o)}const Gi=1,Fc=2;function y$(t,e){const n=new Uint8Array(e.length),r=t.data().filter(i=>i.length>1),o=r.length;for(let i=0,a=Bi;i<o;++i){const l=r[i];if(l.length>1){const s=l[0];a!==(a=ne(e[s]))&&(n[s]|=Gi)}}for(let i=o-1,a=Bi;i>=0;--i){const l=r[i];if(l.length>1){const s=l[0];a!==(a=ne(e[s]))&&(n[s]|=Fc)}}return([i])=>n[i]}function Dc(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:o},i=()=>o,a,l){if(!e&&!n&&!r)return;const s=new Map,c=a&&y$(t,a);function u(f,h,d){return function(p){if(d&&!d(p))return;const m=i(p);let v=s.get(h);v||s.set(h,v=new Map);let y=v.get(m);if(!y){const g=this.parentNode.insertBefore(h(m,l),this),w=`plot-marker-${++p$}`;g.setAttribute("id",w),v.set(m,y=`url(#${w})`)}this.setAttribute(f,y)}}e&&t.each(u("marker-start",e,c&&(f=>c(f)&Gi))),n&&c&&t.each(u("marker-start",n,f=>!(c(f)&Gi))),n&&t.each(u("marker-mid",n)),r&&t.each(u("marker-end",r,c&&(f=>c(f)&Fc)))}function Zn({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=qc(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function Kn({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=qc(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function qc(t,e,n){return t===void 0&&e===void 0&&n===void 0?bt?[1,0]:[.5,.5]:[e,n]}function Yc(t,{interval:e}){return t={...Qe(t)},t.interval=Sr(t.interval===void 0?e:t.interval),t}function Xr(t,e,n,r){const{[t]:o,[`${t}1`]:i,[`${t}2`]:a}=n,{value:l,interval:s}=Yc(o,n);if(l==null||s==null&&!r)return n;const c=Xt(o);if(s==null){let d;const p={transform:m=>d||(d=H(m,l)),label:c};return{...n,[t]:void 0,[`${t}1`]:i===void 0?p:i,[`${t}2`]:a===void 0&&!(i===a&&r)?p:a}}let u,f;function h(d){return f!==void 0&&d===u?f:f=Q(H(u=d,l),p=>s.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:i===void 0?{transform:h,label:c}:i,[`${t}2`]:a===void 0?{transform:d=>h(d).map(p=>s.offset(p)),label:c}:a})}function Pc(t,e,n){const{[t]:r}=n,{value:o,interval:i}=Yc(r,n);return o==null||i==null?n:e({...n,[t]:{label:Xt(r),transform:a=>{const l=Q(H(a,o),c=>i.floor(c)),s=l.map(c=>i.offset(c));return l.map(Lt(l)?(c,u)=>c==null||isNaN(c=+c)||(u=s[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=s[u],u==null)?NaN:(+c+ +u)/2)}}})}function _c(t={}){return Xr("x",Zn,t,!0)}function Xc(t={}){return Xr("y",Kn,t,!0)}function Vi(t={}){return Xr("x",Zn,t)}function Hi(t={}){return Xr("y",Kn,t)}function Gc(t={}){return Pc("x",Zn,t)}function Vc(t={}){return Pc("y",Kn,t)}const Hc={ariaLabel:"rule",fill:null,stroke:"currentColor"};let Uc=class extends et{constructor(e,n={}){const{x:r,y1:o,y2:i,inset:a=0,insetTop:l=a,insetBottom:s=a}=n;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:o,scale:"y",optional:!0},y2:{value:i,scale:"y",optional:!0}},We(n,"x"),Hc),this.insetTop=rt(l),this.insetBottom=rt(s),an(this,n)}render(e,n,r,o,i){const{x:a,y:l}=n,{x:s,y1:c,y2:u}=r,{width:f,height:h,marginTop:d,marginRight:p,marginLeft:m,marginBottom:v}=o,{insetTop:y,insetBottom:g}=this;return U("svg:g",i).call(ot,this,o,i).call(tt,this,{x:s&&a},bt,0).call(w=>w.selectAll().data(e).enter().append("line").call(J,this).attr("x1",s?$=>s[$]:(m+f-p)/2).attr("x2",s?$=>s[$]:(m+f-p)/2).attr("y1",c&&!Vt(l)?$=>c[$]+y:d+y).attr("y2",u&&!Vt(l)?l.bandwidth?$=>u[$]+l.bandwidth()-g:$=>u[$]-g:h-v-g).call(ct,this,r).call(Un,this,r,i)).node()}},Zc=class extends et{constructor(e,n={}){const{x1:r,x2:o,y:i,inset:a=0,insetRight:l=a,insetLeft:s=a}=n;super(e,{y:{value:i,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:o,scale:"x",optional:!0}},We(n,"y"),Hc),this.insetRight=rt(l),this.insetLeft=rt(s),an(this,n)}render(e,n,r,o,i){const{x:a,y:l}=n,{y:s,x1:c,x2:u}=r,{width:f,height:h,marginTop:d,marginRight:p,marginLeft:m,marginBottom:v}=o,{insetLeft:y,insetRight:g}=this;return U("svg:g",i).call(ot,this,o,i).call(tt,this,{y:s&&l},0,bt).call(w=>w.selectAll().data(e).enter().append("line").call(J,this).attr("x1",c&&!Vt(a)?$=>c[$]+y:m+y).attr("x2",u&&!Vt(a)?a.bandwidth?$=>u[$]+a.bandwidth()-g:$=>u[$]-g:f-p-g).attr("y1",s?$=>s[$]:(d+h-v)/2).attr("y2",s?$=>s[$]:(d+h-v)/2).call(ct,this,r).call(Un,this,r,i)).node()}};function xe(t,e){let{x:n=q,y:r,y1:o,y2:i,...a}=Hi(e);return[o,i]=Kc(r,o,i),new Uc(t,{...a,x:n,y1:o,y2:i})}function we(t,e){let{y:n=q,x:r,x1:o,x2:i,...a}=Vi(e);return[o,i]=Kc(r,o,i),new Zc(t,{...a,y:n,x1:o,x2:i})}function Kc(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function Jn(t,...e){let n=e.length;for(let r=0,o=!0;r<n;++r)typeof e[r]!="function"&&(o&&(t=t.slice(),o=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let o=t[0];for(let i=0;i<n;++i)o+=e[i](r)+t[i+1];return o}}const g$={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Jc="\xAD";let Gr=class extends et{constructor(e,n={}){const{x:r,y:o,text:i=re(e)&&ks(e)?q:pt,frameAnchor:a,textAnchor:l=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:s=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:v,fontWeight:y,rotate:g}=n,[w,$]=ht(g,0),[b,x]=w$(p);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},fontSize:{value:b,optional:!0},rotate:{value:Um(w),optional:!0},text:{value:i,filter:Fo,optional:!0}},n,g$),this.rotate=$,this.textAnchor=mt(l,"middle"),this.lineAnchor=Ot(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=Qc(f),this.monospace=!!h,this.fontFamily=xt(d),this.fontSize=x,this.fontStyle=xt(m),this.fontVariant=xt(v),this.fontWeight=xt(y),this.frameAnchor=Bn(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=ou(this),this.clipLine=iu(this)}render(e,n,r,o,i){const{x:a,y:l}=n,{x:s,y:c,rotate:u,text:f,title:h,fontSize:d}=r,{rotate:p}=this,[m,v]=Ht(this,o);return U("svg:g",i).call(ot,this,o,i).call(nu,this,f,o).call(tt,this,{x:s&&a,y:c&&l}).call(y=>y.selectAll().data(e).enter().append("text").call(J,this).call($$,this,f,h).attr("transform",Jn`translate(${s?g=>s[g]:m},${c?g=>c[g]:v})${u?g=>` rotate(${u[g]})`:p?` rotate(${p})`:""}`).call(Y,"font-size",d&&(g=>d[g])).call(ct,this,r)).node()}};function Qc(t){return t==null?null:Ot(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function $$(t,e,n,r){if(!n)return;const{lineAnchor:o,lineHeight:i,textOverflow:a,splitLines:l,clipLine:s}=e;t.each(function(c){const u=l(on(n[c])??"").map(s),f=u.length,h=o==="top"?.71:o==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let p=0;p<f;++p){if(++d,!u[p])continue;const m=this.ownerDocument.createElementNS(Ce.svg,"tspan");m.setAttribute("x",0),p===d-1?m.setAttribute("y",`${(h+p)*i}em`):m.setAttribute("dy",`${d*i}em`),m.textContent=u[p],this.appendChild(m),d=0}}else h&&this.setAttribute("y",`${h*i}em`),this.textContent=u[0];if(a&&!r&&u[0]!==n[c]){const d=this.ownerDocument.createElementNS(Ce.svg,"title");d.textContent=n[c],this.appendChild(d)}})}function ln(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Wt(e,n)),new Gr(t,{...r,x:e,y:n})}function tu(t,{x:e=q,...n}={}){return new Gr(t,Vc({...n,x:e}))}function eu(t,{y:e=q,...n}={}){return new Gr(t,Gc({...n,y:e}))}function nu(t,e,n){Y(t,"text-anchor",e.textAnchor),Y(t,"font-family",e.fontFamily),Y(t,"font-size",e.fontSize),Y(t,"font-style",e.fontStyle),Y(t,"font-variant",e.fontVariant===void 0?v$(n):e.fontVariant),Y(t,"font-weight",e.fontWeight)}function v$(t){return t&&(tn(t)||Lt(t))?"tabular-nums":void 0}const x$=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function w$(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),x$.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function b$(t,e,n){const r=[];let o,i=0;for(const[a,l,s]of k$(t)){if(o===void 0&&(o=a),i>o&&n(t,o,l)>e&&(r.push(t.slice(o,i)+(t[i-1]===Jc?"-":"")),o=a),s){r.push(t.slice(o,l)),o=void 0;continue}i=l}return r}function*k$(t){let e=0,n=0;const r=t.length;for(;n<r;){let o=1;switch(t[n]){case Jc:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++o;case`
`:yield[e,n,!0],n+=o,e=n;break;default:++n;break}}yield[e,n,!0]}const ru={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"\u2018":31,"\u2019":31,"\u201C":47,"\u201D":47,"\u2026":82};function Ui(t,e=0,n=t.length){let r=0;for(let o=e;o<n;o=un(t,o))r+=ru[t[o]]??(uu(t,o)?120:ru.e);return r}function Zi(t,e=0,n=t.length){let r=0;for(let o=e;o<n;o=un(t,o))r+=uu(t,o)?126:63;return r}function ou({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return i=>i.split(/\r\n?|\n/g);const r=t?Zi:Ui,o=e*100;return i=>b$(i,o,r)}function iu({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return i=>i;const r=t?Zi:Ui,o=e*100;switch(n){case"clip-start":return i=>lu(i,o,r,"");case"clip-end":return i=>au(i,o,r,"");case"ellipsis-start":return i=>lu(i,o,r,sn);case"ellipsis-middle":return i=>M$(i,o,r,sn);case"ellipsis-end":return i=>au(i,o,r,sn)}}const sn="\u2026";function cn(t,e,n,r){const o=[];let i=0;for(let a=0,l=0,s=t.length;a<s;a=l){l=un(t,a);const c=n(t,a,l);if(i+c>e){for(i+=r;i>e&&a>0;)l=a,a=o.pop(),i-=n(t,a,l);return[a,e-i]}i+=c,o.push(a)}return[-1,0]}function au(t,e,n,r){t=t.trim();const o=n(r),[i]=cn(t,e,n,o);return i<0?t:t.slice(0,i).trimEnd()+r}function M$(t,e,n,r){t=t.trim();const o=n(t);if(o<=e)return t;const i=n(r)/2,[a,l]=cn(t,e/2,n,i),[s]=cn(t,o-e/2-l+i,n,-i);return s<0?r:t.slice(0,a).trimEnd()+r+t.slice(un(t,s)).trimStart()}function lu(t,e,n,r){t=t.trim();const o=n(t);if(o<=e)return t;const i=n(r),[a]=cn(t,o-e+i,n,-i);return a<0?r:r+t.slice(un(t,a)).trimStart()}const Ki=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,su=new RegExp("\\p{Extended_Pictographic}","uy");function un(t,e){return e+=A$(t,e)?2:1,z$(t,e)&&(e=Ki.lastIndex),L$(t,e)?un(t,e+1):e}function cu(t,e){return t.charCodeAt(e)<128}function A$(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const r=t.charCodeAt(e+1);return r>=56320&&r<57344}return!1}function L$(t,e){return t.charCodeAt(e)===8205}function z$(t,e){return cu(t,e)?!1:(Ki.lastIndex=e,Ki.test(t))}function uu(t,e){return cu(t,e)?!1:(su.lastIndex=e,su.test(t))}const fu={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},hu=3.5,S$=hu*5,du={draw(t,e,n){const r=e*n/S$;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},pu={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},E$=new Map([["arrow",du],["spike",pu]]);function O$(t){return t&&typeof t.draw=="function"}function C$(t){if(O$(t))return t;const e=E$.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}let Vr=class extends et{constructor(e,n={}){const{x:r,y:o,r:i=hu,length:a,rotate:l,shape:s=du,anchor:c="middle",frameAnchor:u}=n,[f,h]=ht(a,12),[d,p]=ht(l,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,fu),this.r=+i,this.length=h,this.rotate=p,this.shape=C$(s),this.anchor=Ot(c,"anchor",["start","middle","end"]),this.frameAnchor=Bn(u)}render(e,n,r,o,i){const{x:a,y:l}=n,{x:s,y:c,length:u,rotate:f}=r,{length:h,rotate:d,anchor:p,shape:m,r:v}=this,[y,g]=Ht(this,o);return U("svg:g",i).call(ot,this,o,i).call(tt,this,{x:s&&a,y:c&&l}).call(w=>w.selectAll().data(e).enter().append("path").call(J,this).attr("transform",Jn`translate(${s?$=>s[$]:y},${c?$=>c[$]:g})${f?$=>` rotate(${f[$]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?u?$=>` translate(0,${u[$]})`:` translate(0,${h})`:u?$=>` translate(0,${u[$]/2})`:` translate(0,${h/2})`}`).attr("d",u?$=>{const b=Jt();return m.draw(b,u[$],v),b}:(()=>{const $=Jt();return m.draw($,h,v),$})()).call(ct,this,r)).node()}};function mu(t,e={}){let{x:n,y:r,...o}=e;return e.frameAnchor===void 0&&([n,r]=Wt(n,r)),new Vr(t,{...o,x:n,y:r})}function yu(t,e={}){const{x:n=q,...r}=e;return new Vr(t,{...r,x:n})}function gu(t,e={}){const{y:n=q,...r}=e;return new Vr(t,{...r,y:n})}function R$(t,e={}){const{shape:n=pu,stroke:r=fu.stroke,strokeWidth:o=1,fill:i=r,fillOpacity:a=.3,anchor:l="start",...s}=e;return mu(t,{...s,shape:n,stroke:r,strokeWidth:o,fill:i,fillOpacity:a,anchor:l})}function be(t,e){return arguments.length<2&&!re(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Hr({anchor:t}={},e){return t===void 0?e[0]:Ot(t,"anchor",e)}function $u(t){return Hr(t,["left","right"])}function vu(t){return Hr(t,["right","left"])}function xu(t){return Hr(t,["bottom","top"])}function wu(t){return Hr(t,["top","bottom"])}function Ji(){const[t,e]=be(...arguments);return Mu("y",$u(e),t,e)}function bu(){const[t,e]=be(...arguments);return Mu("fy",vu(e),t,e)}function Qi(){const[t,e]=be(...arguments);return Au("x",xu(e),t,e)}function ku(){const[t,e]=be(...arguments);return Au("fx",wu(e),t,e)}function Mu(t,e,n,{color:r="currentColor",opacity:o=1,stroke:i=r,strokeOpacity:a=o,strokeWidth:l=1,fill:s=r,fillOpacity:c=o,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p=t==="y"?6:0,tickPadding:m,tickRotate:v,x:y,margin:g,marginTop:w=g===void 0?20:g,marginRight:$=g===void 0?e==="right"?40:0:g,marginBottom:b=g===void 0?20:g,marginLeft:x=g===void 0?e==="left"?40:0:g,label:k,labelAnchor:M,labelArrow:A,labelOffset:z,ariaLabel:E=`${t}-axis`,...L}){return p=rt(p),m=rt(m),v=rt(v),M!==void 0&&(M=Ot(M,"labelAnchor",["center","top","bottom"])),A=Wu(A),It(p&&!lt(i)?N$(t,e,n,{stroke:i,strokeOpacity:a,strokeWidth:l,tickSize:p,tickPadding:m,tickRotate:v,x:y,ariaLabel:E,...L}):null,lt(s)?null:I$(t,e,n,{fill:s,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:v,x:y,marginTop:w,marginRight:$,marginBottom:b,marginLeft:x,ariaLabel:E,...L}),!lt(s)&&k!==null?ln([],Nu({fill:s,fillOpacity:c,...L},function(R,S,O,N,C){const D=N[t],{marginTop:T,marginRight:I,marginBottom:W,marginLeft:j}=t==="y"&&C.inset||C,F=M??(D.bandwidth?"center":"top"),G=z??(e==="right"?I:j)-3;return F==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=F,this.frameAnchor=`${F}-${e}`,this.rotate=0),this.dy=F==="top"?3-T:F==="bottom"?W-3:0,this.dx=e==="right"?G:-G,this.ariaLabel=`${E} label`,{facets:[[0]],channels:{text:{value:[Bu(t,D,{anchor:e,label:k,labelAnchor:F,labelArrow:A})]}}}})):null)}function Au(t,e,n,{color:r="currentColor",opacity:o=1,stroke:i=r,strokeOpacity:a=o,strokeWidth:l=1,fill:s=r,fillOpacity:c=o,textAnchor:u,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p=t==="x"?6:0,tickPadding:m,tickRotate:v,y,margin:g,marginTop:w=g===void 0?e==="top"?30:0:g,marginRight:$=g===void 0?20:g,marginBottom:b=g===void 0?e==="bottom"?30:0:g,marginLeft:x=g===void 0?20:g,label:k,labelAnchor:M,labelArrow:A,labelOffset:z,ariaLabel:E=`${t}-axis`,...L}){return p=rt(p),m=rt(m),v=rt(v),M!==void 0&&(M=Ot(M,"labelAnchor",["center","left","right"])),A=Wu(A),It(p&&!lt(i)?T$(t,e,n,{stroke:i,strokeOpacity:a,strokeWidth:l,tickSize:p,tickPadding:m,tickRotate:v,y,ariaLabel:E,...L}):null,lt(s)?null:B$(t,e,n,{fill:s,fillOpacity:c,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:v,y,marginTop:w,marginRight:$,marginBottom:b,marginLeft:x,ariaLabel:E,...L}),!lt(s)&&k!==null?ln([],Nu({fill:s,fillOpacity:c,...L},function(R,S,O,N,C){const D=N[t],{marginTop:T,marginRight:I,marginBottom:W,marginLeft:j}=t==="x"&&C.inset||C,F=M??(D.bandwidth?"center":"right"),G=z??(e==="top"?T:W)-3;return F==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${F}`,this.textAnchor=F==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-G:G,this.dx=F==="right"?I-3:F==="left"?3-j:0,this.ariaLabel=`${E} label`,{facets:[[0]],channels:{text:{value:[Bu(t,D,{anchor:e,label:k,labelAnchor:F,labelArrow:A})]}}}})):null)}function N$(t,e,n,{strokeWidth:r=1,strokeLinecap:o=null,strokeLinejoin:i=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:l=e,tickSize:s,inset:c=0,insetLeft:u=c,insetRight:f=c,dx:h=0,y:d=t==="y"?void 0:null,ariaLabel:p,...m}){return fn(gu,t,n,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:o,strokeLinejoin:i,facetAnchor:a,frameAnchor:l,y:d,...m,dx:e==="left"?+h-bt+ +u:+h+bt-f,anchor:"start",length:s,shape:e==="left"?D$:q$})}function T$(t,e,n,{strokeWidth:r=1,strokeLinecap:o=null,strokeLinejoin:i=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:l=e,tickSize:s,inset:c=0,insetTop:u=c,insetBottom:f=c,dy:h=0,x:d=t==="x"?void 0:null,ariaLabel:p,...m}){return fn(yu,t,n,{ariaLabel:`${p} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:i,strokeLinecap:o,facetAnchor:a,frameAnchor:l,x:d,...m,dy:e==="bottom"?+h-bt-f:+h+bt+ +u,anchor:"start",length:s,shape:e==="bottom"?j$:F$})}function I$(t,e,n,{facetAnchor:r=e+(t==="y"?"-empty":""),frameAnchor:o=e,tickSize:i,tickRotate:a=0,tickPadding:l=Math.max(3,9-i)+(Math.abs(a)>60?4*Math.cos(a*_r):0),text:s,textAnchor:c=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:p=h,dx:m=0,ariaLabel:v,y=t==="y"?void 0:null,...g}){return fn(eu,t,n,{ariaLabel:`${v} tick label`},{facetAnchor:r,frameAnchor:o,text:s,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:a,y,...g,dx:e==="left"?+m-i-l+ +d:+m+ +i+ +l-p},function(w,$,b,x,k){f===void 0&&(this.fontVariant=Iu(w)),s===void 0&&(k.text=Tu(w,$,b,x,e))})}function B$(t,e,n,{facetAnchor:r=e+(t==="x"?"-empty":""),frameAnchor:o=e,tickSize:i,tickRotate:a=0,tickPadding:l=Math.max(3,9-i)+(Math.abs(a)>=10?4*Math.cos(a*_r):0),text:s,textAnchor:c=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:p=h,dy:m=0,x:v=t==="x"?void 0:null,ariaLabel:y,...g}){return fn(tu,t,n,{ariaLabel:`${y} tick label`},{facetAnchor:r,frameAnchor:o,text:s===void 0?null:s,textAnchor:c,lineAnchor:u,fontVariant:f,rotate:a,x:v,...g,dy:e==="bottom"?+m+ +i+ +l-p:+m-i-l+ +d},function(w,$,b,x,k){f===void 0&&(this.fontVariant=Iu(w)),s===void 0&&(k.text=Tu(w,$,b,x,e))})}function Lu(){const[t,e]=be(...arguments);return Ou("y",$u(e),t,e)}function zu(){const[t,e]=be(...arguments);return Ou("fy",vu(e),t,e)}function Su(){const[t,e]=be(...arguments);return Cu("x",xu(e),t,e)}function Eu(){const[t,e]=be(...arguments);return Cu("fx",wu(e),t,e)}function Ou(t,e,n,{y:r=t==="y"?void 0:null,x:o=null,x1:i=e==="left"?o:null,x2:a=e==="right"?o:null,ariaLabel:l=`${t}-grid`,ariaHidden:s=!0,...c}){return fn(we,t,n,{ariaLabel:l,ariaHidden:s},{y:r,x1:i,x2:a,...Ru(c)})}function Cu(t,e,n,{x:r=t==="x"?void 0:null,y:o=null,y1:i=e==="top"?o:null,y2:a=e==="bottom"?o:null,ariaLabel:l=`${t}-grid`,ariaHidden:s=!0,...c}){return fn(xe,t,n,{ariaLabel:l,ariaHidden:s},{x:r,y1:i,y2:a,...Ru(c)})}function Ru({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:o=1,...i}){return{stroke:n,strokeOpacity:r,strokeWidth:o,...i}}function Nu({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:o,fontVariant:i,fontWeight:a,monospace:l,pointerEvents:s,shapeRendering:c,clip:u=!1},f){return[,t]=At(t),[,e]=ht(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:o,fontVariant:i,fontWeight:a,monospace:l,pointerEvents:s,shapeRendering:c,clip:u,initializer:f}}function fn(t,e,n,r,o,i){let a;function l(u,f,h,d,p,m){const v=u==null&&(e==="fx"||e==="fy"),{[e]:y}=d;if(!y)throw new Error(`missing scale: ${e}`);const g=y.domain();let{interval:w,ticks:$,tickFormat:b,tickSpacing:x=e==="x"?80:35}=o;if(typeof $=="string"&&ju(y)&&(w=$,$=void 0),$===void 0&&($=Ke(w,y.type)??W$(y,x)),u==null){if(re($))u=me($);else if(Je($))u=ea($,...gt(g));else if(y.interval){let M=y.interval;if(y.ticks){const[A,z]=gt(g),E=(z-A)/M[En];M=is(M,E/$)??M,u=ea(M,A,z)}else{u=g;const A=u.length;M=is(M,A/$)??M,M!==y.interval&&(u=ea(M,...gt(u)))}if(M===y.interval){const A=Math.round(u.length/$);A>1&&(u=u.filter((z,E)=>E%A===0))}}else y.ticks?u=y.ticks($):u=g;if(!y.ticks&&u.length&&u!==g){const M=new Mn(g);u=u.filter(A=>M.has(A)),u.length||se(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?f=[ee(u)]:a[e]={scale:e,value:q}}i?.call(this,y,u,$,b,a);const k=Object.fromEntries(Object.entries(a).map(([M,A])=>[M,{...A,value:H(u,A.value)}]));return v&&(f=m.filterFacets(u,k)),{data:u,facets:f,channels:k}}const s=Mt(o).initializer,c=t(n,Mt({...o,initializer:l},s));return n==null?(a=c.channels,c.channels={}):a={},r!==void 0&&Object.assign(c,r),c.clip===void 0&&(c.clip=!1),c}function W$(t,e){const[n,r]=gt(t.range());return(r-n)/e}function Tu(t,e,n,r,o){return{value:ta(t,e,n,r,o)}}function ta(t,e,n,r,o){return typeof r=="function"&&!(t.type==="log"&&t.tickFormat)?r:r===void 0&&e&&Lt(e)?Dm(t.type,e,o)??on:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,r):typeof r=="string"&&t.domain().length>0?(Lt(t.domain())?zo:To)(r):r===void 0?on:wt(r)}function ea(t,e,n){return t.range(e,t.offset(t.floor(n)))}const j$={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},F$={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},D$={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},q$={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function Iu(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function Bu(t,e,{anchor:n,label:r=e.label,labelAnchor:o,labelArrow:i}={}){if(!(r==null||r.inferred&&ju(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),i==="auto"&&(i=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(r)),!i)return r;if(i===!0){const a=fc(e);a&&(i=/x$/.test(t)||o==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(i){case"left":return`\u2190 ${r}`;case"right":return`${r} \u2192`;case"up":return n==="right"?`${r} \u2191`:`\u2191 ${r}`;case"down":return n==="right"?`${r} \u2193`:`\u2193 ${r}`}return r}}function Wu(t="auto"){return lt(t)?!1:typeof t=="boolean"?t:Ot(t,"labelArrow",["auto","up","right","down","left"])}function ju(t){return Lt(t.domain())}function Fu(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function Y$(t,{opacity:e,...n}={}){if(!Be(t)&&!xc(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return Du(t,n,(r,o,i,a)=>r.append("svg").attr("width",i).attr("height",a).attr("fill",o.scale).attr("fill-opacity",ht(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function P$(t,{fill:e=t.hint?.fill!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:r=t.hint?.stroke!==void 0?t.hint.stroke:lt(e)?"currentColor":"none",strokeOpacity:o=1,strokeWidth:i=1.5,r:a=4.5,...l}={},s){const[c,u]=At(e),[f,h]=At(r),d=Fu(s,c),p=Fu(s,f),m=a*a*Math.PI;return n=ht(n)[1],o=ht(o)[1],i=ht(i)[1],Du(t,l,(v,y,g,w)=>v.append("svg").attr("viewBox","-8 -8 16 16").attr("width",g).attr("height",w).attr("fill",c==="color"?$=>d.scale($):u).attr("fill-opacity",n).attr("stroke",f==="color"?$=>p.scale($):h).attr("stroke-opacity",o).attr("stroke-width",i).append("path").attr("d",$=>{const b=Jt();return t.scale($).draw(b,m),b}))}function Du(t,e={},n){let{columns:r,tickFormat:o,fontVariant:i=Bc(t),swatchSize:a=15,swatchWidth:l=a,swatchHeight:s=a,marginLeft:c=0,className:u,style:f,width:h}=e;const d=qr(e);u=Fi(u),o=ta(t.scale,t.domain,void 0,o);const p=U("div",d).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let m;return r!=null?(m=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,l,s).call(v=>v.append("div").attr("class",`${u}-swatch-label`).attr("title",o).text(o))):(m=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,l,s).append(function(){return this.ownerDocument.createTextNode(o.apply(this,arguments))})),p.call(v=>v.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",c?`${+c}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",mt(i,"normal")).call(Di,f).node()}const Ur=new Map([["symbol",P$],["color",qu],["opacity",G$]]);function _$(t={}){for(const[e,n]of Ur){const r=t[e];if(Ne(r)){const o=qr(t);let i;if(e==="symbol"){const{fill:a,stroke:l=a===void 0&&Ne(t.color)?"color":void 0}=t;i={fill:a,stroke:l}}return n(Ai(e,r,i),na(o,r,t),a=>Ne(t[a])?Ai(a,t[a]):null)}}throw new Error("unknown legend type; no scale found")}function X$(t,e,n={}){return(r,o)=>{if(!Ur.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return Ur.get(r)(t[r],na(e,n[r],o),i=>t[i])}}function na({className:t,...e},{label:n,ticks:r,tickFormat:o}={},i){return ny(i,{className:t,...e},{label:n,ticks:r,tickFormat:o})}function qu(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return Y$(t,n);case"ramp":return f$(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function G$({type:t,interpolate:e,...n},{legend:r=!0,color:o=Sn(0,0,0),...i}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return qu({type:t,...n,interpolate:V$(o)},{legend:r,...i})}function V$(t){const{r:e,g:n,b:r}=Sn(t)||Sn(0,0,0);return o=>`rgba(${e},${n},${r},${o})`}function H$(t,e,n){const r=[];for(const[o,i]of Ur){const a=n[o];if(a?.legend&&o in t){const l=i(t[o],na(e,t[o],a),s=>t[s]);l!=null&&r.push(l)}}return r}function Zr(t={},e="x"){return gs(t)?t:{...t,[e]:q}}function Kr(t={},e="y"){return $s(t)?t:{...t,[e]:q}}function Yu(t,e){if(e.length===1)return{data:t,facets:e};const n=Tn(t),r=new Uint8Array(n);let o=0;for(const l of e)for(const s of l)r[s]&&++o,r[s]=1;if(o===0)return{data:t,facets:e};t=Nn(t);const i=t[cs]=new Uint32Array(n+o);e=e.map(l=>Nn(l,Uint32Array));let a=n;r.fill(0);for(const l of e)for(let s=0,c=l.length;s<c;++s){const u=l[s];r[u]?(l[s]=a,t[a]=t[u],i[a]=u,++a):i[u]=u,r[u]=1}return{data:t,facets:e}}function Pu(t={},e={}){arguments.length===1&&([t,e]=hn(t));const{y1:n,y:r=n,x:o,...i}=e,[a,l,s,c]=dn(r,o,"y","x",t,i);return{...a,y1:n,y:l,x1:s,x2:c,x:Lr(s,c)}}function U$(t={},e={}){arguments.length===1&&([t,e]=hn(t));const{y1:n,y:r=n,x:o}=e,[i,a,l]=dn(r,o,"y","x",t,e);return{...i,y1:n,y:a,x:l}}function Z$(t={},e={}){arguments.length===1&&([t,e]=hn(t));const{y1:n,y:r=n,x:o}=e,[i,a,,l]=dn(r,o,"y","x",t,e);return{...i,y1:n,y:a,x:l}}function _u(t={},e={}){arguments.length===1&&([t,e]=hn(t));const{x1:n,x:r=n,y:o,...i}=e,[a,l,s,c]=dn(r,o,"x","y",t,i);return{...a,x1:n,x:l,y1:s,y2:c,y:Lr(s,c)}}function K$(t={},e={}){arguments.length===1&&([t,e]=hn(t));const{x1:n,x:r=n,y:o}=e,[i,a,l]=dn(r,o,"x","y",t,e);return{...i,x1:n,x:a,y:l}}function J$(t={},e={}){arguments.length===1&&([t,e]=hn(t));const{x1:n,x:r=n,y:o}=e,[i,a,,l]=dn(r,o,"x","y",t,e);return{...i,x1:n,x:a,y:l}}function Jr({x:t,x1:e,x2:n,...r}={}){return r=We(r,"y"),e===void 0&&n===void 0?Pu({x:t,...r}):([e,n]=vs(t,e,n),{...r,x1:e,x2:n})}function Qr({y:t,y1:e,y2:n,...r}={}){return r=We(r,"x"),e===void 0&&n===void 0?_u({y:t,...r}):([e,n]=vs(t,e,n),{...r,y1:e,y2:n})}function hn(t){const{offset:e,order:n,reverse:r,...o}=t;return[{offset:e,order:n,reverse:r},o]}const Q$={length:!0};function dn(t,e=Vo,n,r,{offset:o,order:i,reverse:a},l){if(e===null)throw new Error(`stack requires ${r}`);const s=ge(l),[c,u]=Et(t),[f,h]=Rt(e),[d,p]=Rt(e);return f.hint=d.hint=Q$,o=tv(o),i=rv(i,o,r),[jt(l,(m,v,y)=>{({data:m,facets:v}=Yu(m,v));const g=t==null?void 0:u(zr(H(m,t),y?.[n])),w=H(m,e,Float64Array),$=H(m,s),b=i&&i(m,g,w,$),x=Tn(m),k=h(new Float64Array(x)),M=p(new Float64Array(x)),A=[];for(const z of v){const E=g?Array.from(Oe(z,L=>g[L]).values()):[z];if(b)for(const L of E)L.sort(b);for(const L of E){let R=0,S=0;a&&L.reverse();for(const O of L){const N=w[O];N<0?R=M[O]=(k[O]=R)+N:N>0?S=M[O]=(k[O]=S)+N:M[O]=k[O]=S}}A.push(E)}return o&&o(A,k,M,$),{data:m,facets:v}}),c,f,d]}function tv(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return ev;case"center":case"silhouette":return nv;case"wiggle":return Gu}throw new Error(`unknown offset: ${t}`)}}function Xu(t,e){let n=0,r=0;for(const o of t){const i=e[o];i<n&&(n=i),i>r&&(r=i)}return[n,r]}function ev(t,e,n){for(const r of t)for(const o of r){const[i,a]=Xu(o,n);for(const l of o){const s=1/(a-i||1);e[l]=s*(e[l]-i),n[l]=s*(n[l]-i)}}}function nv(t,e,n){for(const r of t){for(const o of r){const[i,a]=Xu(o,n);for(const l of o){const s=(a+i)/2;e[l]-=s,n[l]-=s}}Vu(r,e,n)}Hu(t,e,n)}function Gu(t,e,n,r){for(const o of t){const i=new No;let a=0;for(const l of o){let s=-1;const c=l.map(d=>Math.abs(n[d]-e[d])),u=l.map(d=>{s=r?r[d]:++s;const p=n[d]-e[d],m=i.has(s)?p-i.get(s):0;return i.set(s,p),m}),f=[0,...em(u)];for(const d of l)e[d]+=a,n[d]+=a;const h=qt(c);h&&(a-=qt(c,(d,p)=>(u[p]/2+f[p])*d)/h)}Vu(o,e,n)}Hu(t,e,n)}function Vu(t,e,n){const r=Nt(t,o=>Nt(o,i=>e[i]));for(const o of t)for(const i of o)e[i]-=r,n[i]-=r}function Hu(t,e,n){const r=t.length;if(r===1)return;const o=t.map(l=>l.flat()),i=o.map(l=>(Nt(l,s=>e[s])+zt(l,s=>n[s]))/2),a=Nt(i);for(let l=0;l<r;l++){const s=a-i[l];for(const c of o[l])e[c]+=s,n[c]+=s}}function rv(t,e,n){if(t===void 0&&e===Gu)return Uu(Tt);if(t!=null){if(typeof t=="string"){const r=t.startsWith("-"),o=r?gr:Tt;switch((r?t.slice(1):t).toLowerCase()){case"value":case n:return ov(o);case"z":return iv(o);case"sum":return av(o);case"appearance":return lv(o);case"inside-out":return Uu(o)}return Zu(hs(t))}if(typeof t=="function")return(t.length===1?Zu:sv)(t);if(te(t))return cv(t);throw new Error(`invalid order: ${t}`)}}function ov(t){return(e,n,r)=>(o,i)=>t(r[o],r[i])}function iv(t){return(e,n,r,o)=>(i,a)=>t(o[i],o[a])}function av(t){return to(t,(e,n,r,o)=>Io(ee(e),i=>qt(i,a=>r[a]),i=>o[i]))}function lv(t){return to(t,(e,n,r,o)=>Io(ee(e),i=>n[Bo(i,a=>r[a])],i=>o[i]))}function Uu(t){return to(t,(e,n,r,o)=>{const i=ee(e),a=Io(i,f=>n[Bo(f,h=>r[h])],f=>o[f]),l=kn(i,f=>qt(f,h=>r[h]),f=>o[f]),s=[],c=[];let u=0;for(const f of a)u<0?(u+=l.get(f),s.push(f)):(u-=l.get(f),c.push(f));return c.reverse().concat(s)})}function Zu(t){return e=>{const n=H(e,t);return(r,o)=>Tt(n[r],n[o])}}function sv(t){return e=>te(e)?(n,r)=>t(e[n],e[r]):(n,r)=>t(e.get(n),e.get(r))}function cv(t){return to(Tt,()=>t)}function to(t,e){return(n,r,o,i)=>{if(!i)throw new Error("missing channel: z");const a=new No(e(n,r,o,i).map((l,s)=>[l,s]));return(l,s)=>t(a.get(i[l]),a.get(i[s]))}}const uv={ariaLabel:"rect"};let eo=class extends et{constructor(e,n={}){const{x1:r,y1:o,x2:i,y2:a}=n;super(e,{x1:{value:r,scale:"x",type:r!=null&&i==null?"band":void 0,optional:!0},y1:{value:o,scale:"y",type:o!=null&&a==null?"band":void 0,optional:!0},x2:{value:i,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,uv),ra(this,n),oa(this,n)}render(e,n,r,o,i){const{x:a,y:l}=n;let{x1:s,y1:c,x2:u,y2:f}=r;const{marginTop:h,marginRight:d,marginBottom:p,marginLeft:m,width:v,height:y}=o,{projection:g}=i,{insetTop:w,insetRight:$,insetBottom:b,insetLeft:x}=this,{rx:k,ry:M,rx1y1:A,rx1y2:z,rx2y1:E,rx2y2:L}=this;(s||u)&&!g&&Vt(a)&&(s=u=null),(c||f)&&!g&&Vt(l)&&(c=f=null);const R=a?.bandwidth?a.bandwidth():0,S=l?.bandwidth?l.bandwidth():0;return U("svg:g",i).call(ot,this,o,i).call(tt,this,{},0,0).call(O=>O.selectAll().data(e).enter().call(A||z||E||L?N=>N.append("path").call(J,this).call(ia,s&&u?C=>s[C]+(u[C]<s[C]?-$:x):s?C=>s[C]+x:m+x,c&&f?C=>c[C]+(f[C]<c[C]?-b:w):c?C=>c[C]+w:h+w,s&&u?C=>u[C]-(u[C]<s[C]?-x:$):s?C=>s[C]+R-$:v-d-$,c&&f?C=>f[C]-(f[C]<c[C]?-w:b):c?C=>c[C]+S-b:y-p-b,this).call(ct,this,r):N=>N.append("rect").call(J,this).attr("x",s?u?C=>Math.min(s[C],u[C])+x:C=>s[C]+x:m+x).attr("y",c?f?C=>Math.min(c[C],f[C])+w:C=>c[C]+w:h+w).attr("width",s?u?C=>Math.max(0,Math.abs(u[C]-s[C])+R-x-$):R-x-$:v-d-m-$-x).attr("height",c?f?C=>Math.max(0,Math.abs(c[C]-f[C])+S-w-b):S-w-b:y-h-p-w-b).call(Y,"rx",k).call(Y,"ry",M).call(ct,this,r))).node()}};function ra(t,{inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:o=e,insetLeft:i=e}={}){t.insetTop=rt(n),t.insetRight=rt(r),t.insetBottom=rt(o),t.insetLeft=rt(i)}function oa(t,{r:e,rx:n,ry:r,rx1:o=e,ry1:i=e,rx2:a=e,ry2:l=e,rx1y1:s=o!==void 0?+o:i!==void 0?+i:0,rx1y2:c=o!==void 0?+o:l!==void 0?+l:0,rx2y1:u=a!==void 0?+a:i!==void 0?+i:0,rx2y2:f=a!==void 0?+a:l!==void 0?+l:0}={}){s||c||u||f?(t.rx1y1=s,t.rx1y2=c,t.rx2y1=u,t.rx2y2=f):(t.rx=mt(n,"auto"),t.ry=mt(r,"auto"))}function ia(t,e,n,r,o,i){const{rx1y1:a,rx1y2:l,rx2y1:s,rx2y2:c}=i;typeof e!="function"&&(e=wt(e)),typeof n!="function"&&(n=wt(n)),typeof r!="function"&&(r=wt(r)),typeof o!="function"&&(o=wt(o));const u=Math.max(Math.abs(a+s),Math.abs(l+c)),f=Math.max(Math.abs(a+l),Math.abs(s+c));t.attr("d",h=>{const d=e(h),p=n(h),m=r(h),v=o(h),y=d>m,g=p>v,w=y?m:d,$=y?d:m,b=g?v:p,x=g?p:v,k=Math.min(1,($-w)/u,(x-b)/f),M=k*(y?g?c:s:g?l:a),A=k*(y?g?l:a:g?c:s),z=k*(y?g?a:l:g?s:c),E=k*(y?g?s:c:g?a:l);return`M${w},${b+ro(M,E)}A${M},${M} 0 0 ${M<0?0:1} ${w+no(M,E)},${b}H${$-no(A,z)}A${A},${A} 0 0 ${A<0?0:1} ${$},${b+ro(A,z)}V${x-ro(z,A)}A${z},${z} 0 0 ${z<0?0:1} ${$-no(z,A)},${x}H${w+no(E,M)}A${E},${E} 0 0 ${E<0?0:1} ${w},${x-ro(E,M)}Z`})}function no(t,e){return e<0?t:Math.abs(t)}function ro(t,e){return e<0?Math.abs(t):t}function aa(t,e){return new eo(t,_c(Xc(e)))}function oo(t,e={}){return Ze(e)||(e={...e,y:pt,x2:q,interval:1}),new eo(t,Jr(Xc(Zr(e))))}function io(t,e={}){return Ze(e)||(e={...e,x:pt,y2:q,interval:1}),new eo(t,Qr(_c(Kr(e))))}const fv={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},hv={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};let Ku=class extends et{constructor(e={}){const{anchor:n=null}=e;super(Cn,void 0,e,n==null?fv:hv),this.anchor=ms(n,"anchor",["top","right","bottom","left"]),ra(this,e),n||oa(this,e)}render(e,n,r,o,i){const{marginTop:a,marginRight:l,marginBottom:s,marginLeft:c,width:u,height:f}=o,{anchor:h,insetTop:d,insetRight:p,insetBottom:m,insetLeft:v}=this,{rx:y,ry:g,rx1y1:w,rx1y2:$,rx2y1:b,rx2y2:x}=this,k=c+v,M=u-l-p,A=a+d,z=f-s-m;return U(h?"svg:line":w||$||b||x?"svg:path":"svg:rect",i).datum(0).call(ot,this,o,i).call(J,this).call(ct,this,r).call(tt,this,{}).call(h==="left"?E=>E.attr("x1",k).attr("x2",k).attr("y1",A).attr("y2",z):h==="right"?E=>E.attr("x1",M).attr("x2",M).attr("y1",A).attr("y2",z):h==="top"?E=>E.attr("x1",k).attr("x2",M).attr("y1",A).attr("y2",A):h==="bottom"?E=>E.attr("x1",k).attr("x2",M).attr("y1",z).attr("y2",z):w||$||b||x?E=>E.call(ia,k,A,M,z,this):E=>E.attr("x",k).attr("y",A).attr("width",M-k).attr("height",z-A).attr("rx",y).attr("ry",g)).node()}};function la(t){return new Ku(t)}const sa={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},dv=new Set(["geometry","href","src","ariaLabel","scales"]);let Ju=class extends et{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&re(e)&&ks(e)&&(n={...n,title:q});const{x:r,y:o,x1:i,x2:a,y1:l,y2:s,anchor:c,preferredAnchor:u="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:m,fontWeight:v,lineHeight:y=1,lineWidth:g=20,frameAnchor:w,format:$,textAnchor:b="start",textOverflow:x,textPadding:k=8,title:M,pointerSize:A=12,pathFilter:z="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:i!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:l!=null&&s!=null?null:o,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:a==null},y1:{value:l,scale:"y",optional:s==null},x2:{value:a,scale:"x",optional:i==null},y2:{value:s,scale:"y",optional:l==null},title:{value:M,optional:!0}},n,sa),this.anchor=Jo(c,"anchor"),this.preferredAnchor=Jo(u,"preferredAnchor"),this.frameAnchor=Bn(w),this.textAnchor=mt(b,"middle"),this.textPadding=+k,this.pointerSize=+A,this.pathFilter=xt(z),this.lineHeight=+y,this.lineWidth=+g,this.textOverflow=Qc(x),this.monospace=!!f,this.fontFamily=xt(h),this.fontSize=rt(d),this.fontStyle=xt(p),this.fontVariant=xt(m),this.fontWeight=xt(v);for(const E in sa)E in this.channels&&(this[E]=sa[E]);this.splitLines=ou(this),this.clipLine=iu(this),this.format=typeof $=="string"||typeof $=="function"?{title:$}:{...$}}render(e,n,r,o,i){const a=this,{x:l,y:s,fx:c,fy:u}=n,{ownerSVGElement:f,document:h}=i,{anchor:d,monospace:p,lineHeight:m,lineWidth:v}=this,{textPadding:y,pointerSize:g,pathFilter:w}=this,{marginTop:$,marginLeft:b}=o,{x1:x,y1:k,x2:M,y2:A,x:z=x??M,y:E=k??A}=r,L=c?c(e.fx)-b:0,R=u?u(e.fy)-$:0,[S,O]=Ht(this,o),N=Tc(r,S),C=Ic(r,O),D=p?Zi:Ui,T=D(sn);let I,W;"title"in r?(I=tf.call(this,{title:r.channels.title},n),W=gv):(I=tf.call(this,r.channels,n),W=$v);const j=U("svg:g",i).call(ot,this,o,i).call(nu,this).call(tt,this,{x:z&&l,y:E&&s}).call(V=>V.selectAll().data(e).enter().append("g").attr("transform",_=>`translate(${Math.round(N(_))},${Math.round(C(_))})`).call(J,this).call(_=>_.append("path").attr("filter",w)).call(_=>_.append("text").each(function(B){const P=Kt(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const X=W.call(a,B,e,I,n,r);if(typeof X=="string")for(const Z of a.splitLines(X))F(P,{value:a.clipLine(Z)});else{const Z=new Set;for(const K of X){const{label:nt=""}=K;nt&&Z.has(nt)||(Z.add(nt),F(P,K))}}})));function F(V,{label:_,value:B,color:P,opacity:X}){_??="",B??="";const Z=P!=null||X!=null;let K,nt=v*100;const[ft]=cn(_,nt,D,T);if(ft>=0)_=_.slice(0,ft).trimEnd()+sn,K=B.trim(),B="";else{(_||!B&&!Z)&&(B=" "+B);const[dt]=cn(B,nt-D(_),D,T);dt>=0&&(K=B.trim(),B=B.slice(0,dt).trimEnd()+sn)}const at=V.append("tspan").attr("x",0).attr("dy",`${m}em`).text("\u200B");_&&at.append("tspan").attr("font-weight","bold").text(_),B&&at.append(()=>h.createTextNode(B)),Z&&at.append("tspan").text(" \u25A0").attr("fill",P).attr("fill-opacity",X).style("user-select","none"),K&&at.append("title").text(K)}function G(){const{width:V,height:_}=o.facet??o;j.selectChildren().each(function(B){let{x:P,width:X,height:Z}=this.getBBox();X=Math.round(X),Z=Math.round(Z);let K=d;if(K===void 0){const at=N(B)+L,dt=C(B)+R,yt=at+X+g+y*2<V,kt=at-X-g-y*2>0,Se=dt+Z+g+y*2<_,Ee=dt-Z-g-y*2>0;K=yt&&kt?Se&&Ee?a.preferredAnchor:Ee?"bottom":"top":Se&&Ee?yt?"left":"right":(yt||kt)&&(Se||Ee)?`${Ee?"bottom":"top"}-${yt?"left":"right"}`:a.preferredAnchor}const nt=this.firstChild,ft=this.lastChild;if(nt.setAttribute("d",yv(K,g,y,X,Z)),P)for(const at of ft.childNodes)at.setAttribute("x",-P);ft.setAttribute("y",`${+pv(K,ft.childNodes.length,m).toFixed(6)}em`),ft.setAttribute("transform",`translate(${mv(K,g,y,X,Z)})`)}),j.attr("visibility",null)}return e.length&&(j.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(G):typeof requestAnimationFrame<"u"&&requestAnimationFrame(G)),j.node()}};function Qu(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Wt(e,n)),new Ju(t,{...r,x:e,y:n})}function pv(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function mv(t,e,n,r,o){switch(t){case"middle":return[-r/2,o/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,o/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,o/2]}}function yv(t,e,n,r,o){const i=r+n*2,a=o+n*2;switch(t){case"middle":return`M${-i/2},${-a/2}h${i}v${a}h${-i}z`;case"top-left":return`M0,0l${e},${e}h${i-e}v${a}h${-i}z`;case"top":return`M0,0l${e/2},${e/2}h${(i-e)/2}v${a}h${-i}v${-a}h${(i-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-i}v${a}h${i}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-i}v${a}h${i}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${i-e}v${-a}h${-i}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(i-e)/2}v${-a}h${-i}v${a}h${(i-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-i}v${-a}h${i}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${i}v${a}h${-i}v${e/2-a/2}z`}}function tf(t,e){const n={};let r=this.format;r=ef(r,t,"x"),r=ef(r,t,"y"),this.format=r;for(const o in r){const i=r[o];if(!(i===null||i===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const a=yi(t,o);a&&(n[o]=a)}}for(const o in t){if(o in n||o in r||dv.has(o)||(o==="x"||o==="y")&&t.geometry)continue;const i=yi(t,o);if(i){if(i.scale==null&&i.defaultScale==="color")continue;n[o]=i}}this.facet&&(e.fx&&!("fx"in r)&&(n.fx=!0),e.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const i=this.format[o];if(typeof i=="string"){const a=n[o]?.value??e[o]?.domain()??[];this.format[o]=(Lt(a)?zo:To)(i)}else if(i===void 0||i===!0){const a=e[o];this.format[o]=a?.bandwidth?ta(a,a.domain()):on}}return n}function ef(t,e,n){if(!(n in t))return t;const r=`${n}1`,o=`${n}2`;if((r in t||!(r in e))&&(o in t||!(o in e)))return t;const i=Object.entries(t),a=t[n];return i.splice(i.findIndex(([l])=>l===n)+1,0,[r,a],[o,a]),Object.fromEntries(i)}function gv(t,e,{title:n}){return this.format.title(n.value[t],t)}function*$v(t,e,n,r,o){for(const i in n){if(i==="fx"||i==="fy"){yield{label:ao(r,n,i),value:this.format[i](e[i],t)};continue}if(i==="x1"&&"x2"in n||i==="y1"&&"y2"in n)continue;const a=n[i];if(i==="x2"&&"x1"in n)yield{label:rf(r,n,"x"),value:nf(this.format.x2,n.x1,a,t)};else if(i==="y2"&&"y1"in n)yield{label:rf(r,n,"y"),value:nf(this.format.y2,n.y1,a,t)};else{const l=a.value[t],s=a.scale;if(!vt(l)&&s==null)continue;yield{label:ao(r,n,i),value:this.format[i](l,t),color:s==="color"?o[i][t]:null,opacity:s==="opacity"?o[i][t]:null}}}}function nf(t,e,n,r){return n.hint?.length?`${t(n.value[r]-e.value[r],r)}`:`${t(e.value[r],r)}\u2013${t(n.value[r],r)}`}function rf(t,e,n){const r=ao(t,e,`${n}1`,n),o=ao(t,e,`${n}2`,n);return r===o?r:`${r}\u2013${o}`}function ao(t,e,n,r=n){const o=e[n],i=t[o?.scale??n];return String(i?.label??o?.label??r)}function of(t={}){const{facet:e,style:n,title:r,subtitle:o,caption:i,ariaLabel:a,ariaDescription:l}=t,s=Fi(t.className),c=t.marks===void 0?[]:lf(t.marks);c.push(...Av(c));const u=kv(e,t),f=new Map;for(const T of c){const I=cf(T,u,t);I&&f.set(T,I)}const h=new Map;u&&Qn(h,[u],t),Qn(h,f,t);const d=lf(Lv(c,h,t));for(const T of d){const I=cf(T,u,t);I&&f.set(T,I)}c.unshift(...d);let p=vg(h,t);if(p!==void 0){const T=u?Ni(p,u):void 0;for(const W of c){if(W.facet===null||W.facet==="super")continue;const j=f.get(W);j!==void 0&&(j.facetsIndex=W.fx!=null||W.fy!=null?Ni(p,j):T)}const I=new Set;for(const{facetsIndex:W}of f.values())W?.forEach((j,F)=>{j?.length>0&&I.add(F)});p.forEach(0<I.size&&I.size<p.length?(W,j)=>W.empty=!I.has(j):W=>W.empty=!1);for(const W of c)if(W.facet==="exclude"){const j=f.get(W);j!==void 0&&(j.facetsIndex=bg(j.facetsIndex))}}for(const T of st.keys())Ne(t[T])&&T!=="fx"&&T!=="fy"&&h.set(T,[]);const m=new Map;for(const T of c){if(m.has(T))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:I,channels:W}=f.get(T)??{},{data:j,facets:F,channels:G}=T.initialize(I,W,t);ca(G,t),m.set(T,{data:j,facets:F,channels:G})}const v=ki(Qn(h,m,t),t),y=c$(v,c,t);fg(v,y);const g=uc(v),{fx:w,fy:$}=g,b=w||$?hc(v,y):y,x=w||$?Nv(g,y):y,k=qr(t),M=k.document,A=Zl("svg").call(M.documentElement);let z=A;k.ownerSVGElement=A,k.className=s,k.projection=Cg(t,b),k.path=function(){return zn(this.projection??Wg(g))},k.filterFacets=(T,I)=>Ni(p,{channels:I,groups:zi(T,I)}),k.getMarkState=T=>{const I=m.get(T),W=f.get(T);return{...I,channels:{...I.channels,...W?.channels}}},k.dispatchValue=T=>{z.value!==T&&(z.value=T,z.dispatchEvent(new k.document.defaultView.Event("input",{bubbles:!0})))};const E=new Set;for(const[T,I]of m)if(T.initializer!=null){const W=T.facet==="super"?x:b,j=T.initializer(I.data,I.facets,I.channels,g,W,k);if(j.data!==void 0&&(I.data=j.data),j.facets!==void 0&&(I.facets=j.facets),j.channels!==void 0){const{fx:F,fy:G,...V}=j.channels;bv(V),Object.assign(I.channels,V);for(const _ of Object.values(V)){const{scale:B}=_;B!=null&&!iy(st.get(B))&&(sf(_,t),E.add(B))}(F!=null||G!=null)&&f.set(T,!0)}}if(E.size){const T=new Map;Qn(T,m,t,F=>E.has(F)),Qn(h,m,t,F=>E.has(F));const I=Rv(ki(T,t),v),{scales:W,...j}=uc(I);Object.assign(v,I),Object.assign(g,j),Object.assign(g.scales,W)}let L,R;p!==void 0&&(L={x:w?.domain(),y:$?.domain()},p=xg(p,L),R=wg(w,$,y));for(const[T,I]of m)I.values=T.scale(I.channels,g,k);const{width:S,height:O}=y;Kt(A).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",S).attr("height",O).attr("viewBox",`0 0 ${S} ${O}`).attr("aria-label",a).attr("aria-description",l).call(T=>T.append("style").text(`:where(.${s}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${s} text),
:where(.${s} tspan) {
  white-space: pre;
}`)).call(Di,n);for(const T of c){const{channels:I,values:W,facets:j}=m.get(T);if(p===void 0||T.facet==="super"){let F=null;if(j&&(F=j[0],F=T.filter(F,I,W),F.length===0))continue;const G=T.render(F,g,W,x,k);if(G==null)continue;A.appendChild(G)}else{let F;for(const G of p){if(!(T.facetAnchor?.(p,L,G)??!G.empty))continue;let V=null;if(j){const B=f.has(T);if(V=j[B?G.i:0],V=T.filter(V,I,W),V.length===0)continue;!B&&V===j[0]&&(V=Te(V)),V.fx=G.x,V.fy=G.y,V.fi=G.i}const _=T.render(V,g,W,b,k);if(_!=null){(F??=Kt(A).append("g")).append(()=>_).datum(G);for(const B of["aria-label","aria-description","aria-hidden","transform"])_.hasAttribute(B)&&(F.attr(B,_.getAttribute(B)),_.removeAttribute(B))}}F?.selectChildren().each(R)}}const N=H$(v,k,t),{figure:C=r!=null||o!=null||i!=null||N.length>0}=t;C&&(z=M.createElement("figure"),z.className=`${s}-figure`,z.style.maxWidth="initial",r!=null&&z.append(af(M,r,"h2")),o!=null&&z.append(af(M,o,"h3")),z.append(...N,A),i!=null&&z.append(vv(M,i)),"value"in A&&(z.value=A.value,delete A.value)),z.scale=$g(g.scales),z.legend=X$(v,k,t);const D=Hy();return D>0&&Kt(A).append("text").attr("x",S).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("\u26A0\uFE0F").append("title").text(`${D.toLocaleString("en-US")} warning${D===1?"":"s"}. Please check the console.`),z}function af(t,e,n){if(e.ownerDocument)return e;const r=t.createElement(n);return r.append(e),r}function vv(t,e){const n=t.createElement("figcaption");return n.append(e),n}function lf(t){return t.flat(1/0).filter(e=>e!=null).map(xv)}function xv(t){return typeof t.render=="function"?t:new wv(t)}let wv=class extends et{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}};function ca(t,e){for(const n in t)sf(t[n],e);return t}function sf(t,e){const{scale:n,transform:r=!0}=t;if(n==null||!r)return;const{type:o,percent:i,interval:a,transform:l=i?s=>s==null?NaN:s*100:ws(a,o)}=e[n]??{};l!=null&&(t.value=Q(t.value,l),t.transform=!1)}function bv(t){for(const e in t)Ys(e,t[e])}function Qn(t,e,n,r=Xm){for(const{channels:o}of e.values())for(const i in o){const a=o[i],{scale:l}=a;if(l!=null&&r(l))if(l==="projection"){if(!Tg(n)){const s=n.x?.domain===void 0,c=n.y?.domain===void 0;if(s||c){const[u,f]=Bg(a);s&&ua(t,"x",u),c&&ua(t,"y",f)}}}else ua(t,l,a)}return t}function ua(t,e,n){const r=t.get(e);r!==void 0?r.push(n):t.set(e,[n])}function kv(t,e){if(t==null)return;const{x:n,y:r}=t;if(n==null&&r==null)return;const o=Ue(t.data);if(o==null)throw new Error("missing facet data");const i={};n!=null&&(i.fx=Yn(o,{value:n,scale:"fx"})),r!=null&&(i.fy=Yn(o,{value:r,scale:"fy"})),ca(i,e);const a=zi(o,i);return{channels:i,groups:a,data:t.data}}function cf(t,e,n){if(t.facet===null||t.facet==="super")return;const{fx:r,fy:o}=t;if(r!=null||o!=null){const s=Ue(t.data??r??o);if(s===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(s===null)return;const c={};return r!=null&&(c.fx=Yn(s,{value:r,scale:"fx"})),o!=null&&(c.fy=Yn(s,{value:o,scale:"fy"})),ca(c,n),{channels:c,groups:zi(s,c)}}if(e===void 0)return;const{channels:i,groups:a,data:l}=e;if(t.facet!=="auto"||t.data===l)return{channels:i,groups:a};l.length>0&&(a.size>1||a.size===1&&i.fx&&i.fy&&[...a][0][1].size>1)&&Tn(Ue(t.data))===Tn(l)&&se(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn\u2019t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Mv(t,e={}){return Mt({...e,x:null,y:null},(n,r,o,i,a,l)=>l.getMarkState(t))}function Av(t){const e=[];for(const n of t){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:o,preferredAnchor:i}=r;o=/^x$/i.test(o)?Pi:/^y$/i.test(o)?Pr:Yi,r=o(Mv(n,r)),r.title=null,i===void 0&&(r.preferredAnchor=o===Pr?"left":"bottom");const a=Qu(n.data,r);a.facet=n.facet,a.facetAnchor=n.facetAnchor,e.push(a)}}return e}function Lv(t,e,n){let{projection:r,x:o={},y:i={},fx:a={},fy:l={},axis:s,grid:c,facet:u={},facet:{axis:f=s,grid:h}=u,x:{axis:d=s,grid:p=d===null?null:c}=o,y:{axis:m=s,grid:v=m===null?null:c}=i,fx:{axis:y=f,grid:g=y===null?null:h}=a,fy:{axis:w=f,grid:$=w===null?null:h}=l}=n;(r||!Ne(o)&&!uf("x",t))&&(d=p=null),(r||!Ne(i)&&!uf("y",t))&&(m=v=null),e.has("fx")||(y=g=null),e.has("fy")||(w=$=null),d===void 0&&(d=!co(t,"x")),m===void 0&&(m=!co(t,"y")),y===void 0&&(y=!co(t,"fx")),w===void 0&&(w=!co(t,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),y===!0&&(y=d==="top"||d===null?"bottom":"top"),w===!0&&(w=m==="right"||m===null?"left":"right");const b=[];return so(b,$,zu,l),lo(b,w,bu,"right","left",u,l),so(b,g,Eu,a),lo(b,y,ku,"top","bottom",u,a),so(b,v,Lu,i),lo(b,m,Ji,"left","right",n,i),so(b,p,Su,o),lo(b,d,Qi,"bottom","top",n,o),b}function lo(t,e,n,r,o,i,a){if(!e)return;const l=zv(e);a=Sv(l?r:e,i,a);const{line:s}=a;(n===Ji||n===Qi)&&s&&!en(s)&&t.push(la(Ev(a))),t.push(n(a)),l&&t.push(n({...a,anchor:o,label:null}))}function so(t,e,n,r){!e||en(e)||t.push(n(Ov(e,r)))}function zv(t){return/^\s*both\s*$/i.test(t)}function Sv(t,e,{line:n=e.line,ticks:r,tickSize:o,tickSpacing:i,tickPadding:a,tickFormat:l,tickRotate:s,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:r,tickSize:o,tickSpacing:i,tickPadding:a,tickFormat:l,tickRotate:s,fontVariant:c,ariaLabel:u,ariaDescription:f,label:h,labelAnchor:d,labelArrow:p,labelOffset:m}}function Ev(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function Ov(t,{stroke:e=In(t)?t:void 0,ticks:n=Cv(t)?t:void 0,tickSpacing:r,ariaLabel:o,ariaDescription:i}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:o,ariaDescription:i}}function Cv(t){switch(typeof t){case"number":return!0;case"string":return!In(t)}return re(t)||typeof t?.range=="function"}function co(t,e){const n=`${e}-axis `;return t.some(r=>r.ariaLabel?.startsWith(n))}function uf(t,e){for(const n of e)for(const r in n.channels){const{scale:o}=n.channels[r];if(o===t||o==="projection")return!0}return!1}function Rv(t,e){for(const n in t){const r=t[n],o=e[n];r.label===void 0&&o&&(r.label=o.label)}return t}function Nv({fx:t,fy:e},n){const{marginTop:r,marginRight:o,marginBottom:i,marginLeft:a,width:l,height:s}=Mi(n),c=t&&ff(t),u=e&&ff(e);return{marginTop:e?u[0]:r,marginRight:t?l-c[1]:o,marginBottom:e?s-u[1]:i,marginLeft:t?c[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:s}}function ff(t){const e=t.domain();if(e.length===0)return[0,t.bandwidth()];let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const Tv=new Map([["basis",nm],["basis-closed",rm],["basis-open",om],["bundle",im],["bump-x",am],["bump-y",lm],["cardinal",sm],["cardinal-closed",cm],["cardinal-open",um],["catmull-rom",fm],["catmull-rom-closed",hm],["catmull-rom-open",dm],["linear",Wo],["linear-closed",pm],["monotone-x",mm],["monotone-y",ym],["natural",gm],["step",$m],["step-after",vm],["step-before",xm]]);function fa(t=Wo,e){if(typeof t=="function")return t;const n=Tv.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function hf(t=pn,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?pn:fa(t,e)}function pn(t){return Wo(t)}function ke(t={y:"count"},e={}){[t,e]=ma(t,e);const{x:n,y:r}=e;return pa(uo(n,e,q),null,null,r,t,Zn(e))}function Me(t={x:"count"},e={}){[t,e]=ma(t,e);const{x:n,y:r}=e;return pa(null,uo(r,e,q),n,null,t,Kn(e))}function je(t={fill:"count"},e={}){[t,e]=ma(t,e);const{x:n,y:r}=Iv(e);return pa(n,r,null,null,t,Zn(Kn(e)))}function df(t,e,n={}){if(n?.interval==null)return n;const{reduce:r=pi}=n,o={filter:null};return n[e]!=null&&(o[e]=r),n[`${e}1`]!=null&&(o[`${e}1`]=r),n[`${e}2`]!=null&&(o[`${e}2`]=r),t(o,n)}function ha(t={}){return df(ke,"y",We(t,"x"))}function da(t={}){return df(Me,"x",We(t,"y"))}function pa(t,e,n,r,{data:o=di,filter:i=Nr,sort:a,reverse:l,...s}={},c={}){t=pf(t),e=pf(e),s=Bv(s,c),o=$f(o,q),a=a==null?void 0:yf("sort",a,c),i=i==null?void 0:gf("filter",i,c),n!=null&&$e(s,"x","x1","x2")&&(n=null),r!=null&&$e(s,"y","y1","y2")&&(r=null);const[u,f]=Et(t),[h,d]=Et(t),[p,m]=Et(e),[v,y]=Et(e),[g,w]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[$,b]=Et(g),{x,y:k,z:M,fill:A,stroke:z,x1:E,x2:L,y1:R,y2:S,domain:O,cumulative:N,thresholds:C,interval:D,...T}=c,[I,W]=Et(M),[j]=At(A),[F]=At(z),[G,V]=Et(j),[_,B]=Et(F);return{..."z"in c&&{z:I||M},..."fill"in c&&{fill:G||A},..."stroke"in c&&{stroke:_||z},...jt(T,(P,X,Z)=>{const K=zr(H(P,g),Z?.[w]),nt=H(P,M),ft=H(P,j),at=H(P,F),dt=hi(s,{z:nt,fill:ft,stroke:at}),yt=[],kt=[],Se=K&&b([]),Ee=nt&&W([]),_h=ft&&V([]),Xh=at&&B([]),Ga=t&&f([]),Gh=t&&d([]),Va=e&&m([]),Vh=e&&y([]),Hh=Fv(t,e,P);let Uh=0;for(const Ye of s)Ye.initialize(P);a&&a.initialize(P),i&&i.initialize(P);for(const Ye of X){const Ha=[];for(const Pe of s)Pe.scope("facet",Ye);a&&a.scope("facet",Ye),i&&i.scope("facet",Ye);for(const[Pe,Zh]of Ie(Ye,dt))for(const[Kh,sr]of Ie(Zh,K))for(const[Dt,Zt]of Hh(sr))if(dt&&(Zt.z=Pe),!(i&&!i.reduce(Dt,Zt))){Ha.push(Uh++),kt.push(o.reduceIndex(Dt,P,Zt)),K&&Se.push(Kh),nt&&Ee.push(dt===nt?Pe:nt[(Dt.length>0?Dt:sr)[0]]),ft&&_h.push(dt===ft?Pe:ft[(Dt.length>0?Dt:sr)[0]]),at&&Xh.push(dt===at?Pe:at[(Dt.length>0?Dt:sr)[0]]),Ga&&(Ga.push(Zt.x1),Gh.push(Zt.x2)),Va&&(Va.push(Zt.y1),Vh.push(Zt.y2));for(const Jh of s)Jh.reduce(Dt,Zt);a&&a.reduce(Dt,Zt)}yt.push(Ha)}return Ws(yt,a,l),{data:kt,facets:yt}}),...!$e(s,"x")&&(u?{x1:u,x2:h,x:Lr(u,h)}:{x,x1:E,x2:L}),...!$e(s,"y")&&(p?{y1:p,y2:v,y:Lr(p,v)}:{y:k,y1:R,y2:S}),...$&&{[w]:$},...Object.fromEntries(s.map(({name:P,output:X})=>[P,X]))}}function ma({cumulative:t,domain:e,thresholds:n,interval:r,...o},i){return[o,{cumulative:t,domain:e,thresholds:n,interval:r,...i}]}function uo(t,{cumulative:e,domain:n,thresholds:r,interval:o},i){return t={...Qe(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=r),t.interval===void 0&&(t.interval=o),t.value===void 0&&(t.value=i),t.thresholds=mf(t.thresholds,t.interval),t}function Iv(t){let{x:e,y:n}=t;return e=uo(e,t),n=uo(n,t),[e.value,n.value]=Wt(e.value,n.value),{x:e,y:n}}function pf(t){if(t==null)return;const{value:e,cumulative:n,domain:r=gt,thresholds:o}=t,i=a=>{let l=H(a,e),s;if(Lt(l)||jv(o)){l=Q(l,ps,Float64Array);let[u,f]=typeof r=="function"?r(l):r,h=typeof o=="function"&&!Je(o)?o(l,u,f):o;typeof h=="number"&&(h=bm(u,f,h)),Je(h)&&(r===gt&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f))),s=h}else{l=St(l);let[u,f]=typeof r=="function"?r(l):r,h=typeof o=="function"&&!Je(o)?o(l,u,f):o;if(typeof h=="number")if(r===gt){let d=km(u,f,h);if(isFinite(d))if(d>0){let p=Math.round(u/d),m=Math.round(f/d);p*d<=u||--p,m*d>f||++m;let v=m-p+1;h=new Float64Array(v);for(let y=0;y<v;++y)h[y]=(p+y)*d}else if(d<0){d=-d;let p=Math.round(u*d),m=Math.round(f*d);p/d<=u||--p,m/d>f||++m;let v=m-p+1;h=new Float64Array(v);for(let y=0;y<v;++y)h[y]=(p+y)/d}else h=[u];else h=[u]}else h=Oo(u,f,h);else Je(h)&&(r===gt&&(u=h.floor(u),f=h.offset(h.floor(f))),h=h.range(u,h.offset(f)));s=h}const c=[];if(s.length===1)c.push([s[0],s[0]]);else for(let u=1;u<s.length;++u)c.push([s[u-1],s[u]]);return c.bin=(n<0?qv:n>0?Dv:ya)(c,s,l),c};return i.label=Xt(e),i}function mf(t,e,n=vf){if(t===void 0)return e===void 0?n:Ke(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return wm;case"scott":return Jl;case"sturges":return Kl;case"auto":return vf}return br(t)}return t}function Bv(t,e){return Rs(t,e,yf)}function yf(t,e,n){return ui(t,e,n,gf)}function gf(t,e,n){return fi(t,e,n,$f)}function $f(t,e){return Rr(t,e,Wv)}function Wv(t){switch(`${t}`.toLowerCase()){case"x":return Yv;case"x1":return _v;case"x2":return Xv;case"y":return Pv;case"y1":return Gv;case"y2":return Vv;case"z":return Ds}throw new Error(`invalid bin reduce: ${t}`)}function vf(t,e,n){return Math.min(200,Jl(t,e,n))}function jv(t){return Hm(t)||re(t)&&Lt(t)}function Fv(t,e,n){const r=t?.(n),o=e?.(n);return r&&o?function*(i){const a=r.bin(i);for(const[l,[s,c]]of r.entries()){const u=o.bin(a[l]);for(const[f,[h,d]]of o.entries())yield[u[f],{data:n,x1:s,y1:h,x2:c,y2:d}]}}:r?function*(i){const a=r.bin(i);for(const[l,[s,c]]of r.entries())yield[a[l],{data:n,x1:s,x2:c}]}:function*(i){const a=o.bin(i);for(const[l,[s,c]]of o.entries())yield[a[l],{data:n,y1:s,y2:c}]}}function ya(t,e,n){return e=St(e),r=>{const o=t.map(()=>[]);for(const i of r)o[Mm(e,n[i])-1]?.push(i);return o}}function Dv(t,e,n){const r=ya(t,e,n);return o=>{const i=r(o);for(let a=1,l=i.length;a<l;++a){const s=i[a-1],c=i[a];for(const u of s)c.push(u)}return i}}function qv(t,e,n){const r=ya(t,e,n);return o=>{const i=r(o);for(let a=i.length-2;a>=0;--a){const l=i[a+1],s=i[a];for(const c of l)s.push(c)}return i}}function xf(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const Yv={reduceIndex(t,e,{x1:n,x2:r}){return xf(n,r)}},Pv={reduceIndex(t,e,{y1:n,y2:r}){return xf(n,r)}},_v={reduceIndex(t,e,{x1:n}){return n}},Xv={reduceIndex(t,e,{x2:n}){return n}},Gv={reduceIndex(t,e,{y1:n}){return n}},Vv={reduceIndex(t,e,{y2:n}){return n}},Hv={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let fo=class extends et{constructor(e,n={}){const{x1:r,y1:o,x2:i,y2:a,z:l,curve:s,tension:c}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:o,scale:"y"},x2:{value:i,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:ge(n),optional:!0}},n,Hv),this.z=l,this.curve=fa(s,c)}filter(e){return e}render(e,n,r,o,i){const{x1:a,y1:l,x2:s=a,y2:c=l}=r;return U("svg:g",i).call(ot,this,o,i).call(tt,this,n,0,0).call(u=>u.selectAll().data(Ec(e,[a,l,s,c],this,r)).enter().append("path").call(J,this).call(Yr,this,r).attr("d",jo().curve(this.curve).defined(f=>f>=0).x0(f=>a[f]).y0(f=>l[f]).x1(f=>s[f]).y1(f=>c[f]))).node()}};function ga(t,e){return e===void 0?mn(t,{x:Mr,y:Rn}):new fo(t,e)}function tr(t,e){const{y:n=pt,...r}=da(e);return new fo(t,Jr(Zr({...r,y1:n,y2:void 0},n===pt?"x2":"x")))}function mn(t,e){const{x:n=pt,...r}=ha(e);return new fo(t,Qr(Kr({...r,x1:n,x2:void 0},n===pt?"y2":"y")))}const Uv={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};let wf=class extends et{constructor(e,n={}){const{x1:r,y1:o,x2:i,y2:a,curve:l,tension:s}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:o,scale:"y"},x2:{value:i,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,Uv),this.curve=hf(l,s),an(this,n)}project(e,n,r){this.curve!==pn&&super.project(e,n,r)}render(e,n,r,o,i){const{x1:a,y1:l,x2:s=a,y2:c=l}=r,{curve:u}=this;return U("svg:g",i).call(ot,this,o,i).call(tt,this,n).call(f=>f.selectAll().data(e).enter().append("path").call(J,this).attr("d",u===pn&&i.projection?Zv(i.path(),a,l,s,c):h=>{const d=Jt(),p=u(d);return p.lineStart(),p.point(a[h],l[h]),p.point(s[h],c[h]),p.lineEnd(),d}).call(ct,this,r).call(Un,this,r,i)).node()}};function Zv(t,e,n,r,o){return e=St(e),n=St(n),r=St(r),o=St(o),i=>t({type:"LineString",coordinates:[[e[i],n[i]],[r[i],o[i]]]})}function bf(t,{x:e,x1:n,x2:r,y:o,y1:i,y2:a,...l}={}){return[n,r]=ho(e,n,r),[i,a]=ho(o,i,a),new wf(t,{...l,x1:n,x2:r,y1:i,y2:a})}function ho(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}const Kv={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class kf extends et{constructor(e,n={}){const{x1:r,y1:o,x2:i,y2:a,bend:l=0,headAngle:s=60,headLength:c=8,inset:u=0,insetStart:f=u,insetEnd:h=u,sweep:d}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:o,scale:"y"},x2:{value:i,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,Kv),this.bend=l===!0?22.5:Math.max(-90,Math.min(90,l)),this.headAngle=+s,this.headLength=+c,this.insetStart=+f,this.insetEnd=+h,this.sweep=Jv(d)}render(e,n,r,o,i){const{x1:a,y1:l,x2:s=a,y2:c=l,SW:u}=r,{strokeWidth:f,bend:h,headAngle:d,headLength:p,insetStart:m,insetEnd:v}=this,y=u?$=>u[$]:wt(f===void 0?1:f),g=d*_r/2,w=p/1.5;return U("svg:g",i).call(ot,this,o,i).call(tt,this,n).call($=>$.selectAll().data(e).enter().append("path").call(J,this).attr("d",b=>{let x=a[b],k=l[b],M=s[b],A=c[b];const z=Math.hypot(M-x,A-k);if(z<=m+v)return null;let E=Math.atan2(A-k,M-x);const L=Math.min(w*y(b),z/3),R=this.sweep(x,k,M,A)*h*_r,S=Math.hypot(z/Math.tan(R),z)/2;if(m||v)if(S<1e5){const G=Math.sign(R),[V,_]=Qv([x,k],[M,A],S,G);if(m&&([x,k]=Mf([V,_,S],[x,k,m],-G*Math.sign(m))),v){const[B,P]=Mf([V,_,S],[M,A,v],G*Math.sign(v));E+=Math.atan2(P-_,B-V)-Math.atan2(A-_,M-V),M=B,A=P}}else{const G=M-x,V=A-k,_=Math.hypot(G,V);m&&(x+=G/_*m,k+=V/_*m),v&&(M-=G/_*v,A-=V/_*v)}const O=E+R,N=O+g,C=O-g,D=M-L*Math.cos(N),T=A-L*Math.sin(N),I=M-L*Math.cos(C),W=A-L*Math.sin(C),j=S<1e5?`A${S},${S} 0,0,${R>0?1:0} `:"L",F=L?`M${D},${T}L${M},${A}L${I},${W}`:"";return`M${x},${k}${j}${M},${A}${F}`}).call(ct,this,r)).node()}}function Jv(t=1){if(typeof t=="number")return wt(Math.sign(t));if(typeof t=="function")return(e,n,r,o)=>Math.sign(t(e,n,r,o));switch(Ot(t,"sweep",["+x","-x","+y","-y"])){case"+x":return(e,n,r)=>cr(e,r);case"-x":return(e,n,r)=>_e(e,r);case"+y":return(e,n,r,o)=>cr(n,o);case"-y":return(e,n,r,o)=>_e(n,o)}}function Qv([t,e],[n,r],o,i){const a=n-t,l=r-e,s=Math.hypot(a,l),c=i*Math.sqrt(o*o-s*s/4)/s;return[(t+n)/2-l*c,(e+r)/2+a*c]}function Mf([t,e,n],[r,o,i],a){const l=r-t,s=o-e,c=Math.hypot(l,s),u=(l*l+s*s-i*i+n*n)/(2*c),f=a*Math.sqrt(n*n-u*u);return[t+(l*u+s*f)/c,e+(s*u-l*f)/c]}function t0(t,{x:e,x1:n,x2:r,y:o,y1:i,y2:a,...l}={}){return[n,r]=ho(e,n,r),[i,a]=ho(o,i,a),new kf(t,{...l,x1:n,x2:r,y1:i,y2:a})}const e0={ariaLabel:"bar"};let $a=class extends et{constructor(e,n,r={},o=e0){super(e,n,r,o),ra(this,r),oa(this,r)}render(e,n,r,o,i){const{rx:a,ry:l,rx1y1:s,rx1y2:c,rx2y1:u,rx2y2:f}=this,h=this._x(n,r,o),d=this._y(n,r,o),p=this._width(n,r,o),m=this._height(n,r,o);return U("svg:g",i).call(ot,this,o,i).call(this._transform,this,n).call(v=>v.selectAll().data(e).enter().call(s||c||u||f?y=>y.append("path").call(J,this).call(ia,h,d,Af(h,p),Af(d,m),this).call(ct,this,r):y=>y.append("rect").call(J,this).attr("x",h).attr("width",p).attr("y",d).attr("height",m).call(Y,"rx",a).call(Y,"ry",l).call(ct,this,r))).node()}_x(e,{x:n},{marginLeft:r}){const{insetLeft:o}=this;return n?i=>n[i]+o:r+o}_y(e,{y:n},{marginTop:r}){const{insetTop:o}=this;return n?i=>n[i]+o:r+o}_width({x:e},{x:n},{marginRight:r,marginLeft:o,width:i}){const{insetLeft:a,insetRight:l}=this,s=n&&e?e.bandwidth():i-r-o;return Math.max(0,s-a-l)}_height({y:e},{y:n},{marginTop:r,marginBottom:o,height:i}){const{insetTop:a,insetBottom:l}=this,s=n&&e?e.bandwidth():i-r-o;return Math.max(0,s-a-l)}};function Af(t,e){return typeof t=="function"&&typeof e=="function"?n=>t(n)+e(n):typeof t=="function"?n=>t(n)+e:typeof e=="function"?n=>t+e(n):t+e}let va=class extends $a{constructor(e,n={},r){const{x1:o,x2:i,y:a}=n;super(e,{x1:{value:o,scale:"x"},x2:{value:i,scale:"x"},y:{value:a,scale:"y",type:"band",optional:!0}},n,r)}_transform(e,n,{x:r}){e.call(tt,n,{x:r},0,0)}_x({x:e},{x1:n,x2:r},{marginLeft:o}){const{insetLeft:i}=this;return Vt(e)?o+i:a=>Math.min(n[a],r[a])+i}_width({x:e},{x1:n,x2:r},{marginRight:o,marginLeft:i,width:a}){const{insetLeft:l,insetRight:s}=this;return Vt(e)?a-o-i-l-s:c=>Math.max(0,Math.abs(r[c]-n[c])-l-s)}},xa=class extends $a{constructor(e,n={},r){const{x:o,y1:i,y2:a}=n;super(e,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:o,scale:"x",type:"band",optional:!0}},n,r)}_transform(e,n,{y:r}){e.call(tt,n,{y:r},0,0)}_y({y:e},{y1:n,y2:r},{marginTop:o}){const{insetTop:i}=this;return Vt(e)?o+i:a=>Math.min(n[a],r[a])+i}_height({y:e},{y1:n,y2:r},{marginTop:o,marginBottom:i,height:a}){const{insetTop:l,insetBottom:s}=this;return Vt(e)?a-o-i-l-s:c=>Math.max(0,Math.abs(r[c]-n[c])-l-s)}};function Fe(t,e={}){return Ze(e)||(e={...e,y:pt,x2:q}),new va(t,Jr(Vi(Zr(e))))}function De(t,e={}){return Ze(e)||(e={...e,x:pt,y2:q}),new xa(t,Qr(Hi(Kr(e))))}const n0={ariaLabel:"cell"};let po=class extends $a{constructor(e,{x:n,y:r,...o}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},o,n0)}_transform(e,n){e.call(tt,n,{},0,0)}};function yn(t,{x:e,y:n,...r}={}){return[e,n]=Wt(e,n),new po(t,{...r,x:e,y:n})}function r0(t,{x:e=pt,fill:n,stroke:r,...o}={}){return n===void 0&&At(r)[0]===void 0&&(n=q),new po(t,{...o,x:e,fill:n,stroke:r})}function o0(t,{y:e=pt,fill:n,stroke:r,...o}={}){return n===void 0&&At(r)[0]===void 0&&(n=q),new po(t,{...o,y:e,fill:n,stroke:r})}const i0={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function wa(t){return t.sort===void 0&&t.reverse===void 0?Os({channel:"-r"},t):t}let mo=class extends et{constructor(e,n={}){const{x:r,y:o,r:i,rotate:a,symbol:l=So,frameAnchor:s}=n,[c,u]=ht(a,0),[f,h]=cy(l),[d,p]=ht(i,f==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},r:{value:d,scale:"r",filter:Qt,optional:!0},rotate:{value:c,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},wa(n),i0),this.r=p,this.rotate=u,this.symbol=h,this.frameAnchor=Bn(s);const{channels:m}=this,{symbol:v}=m;if(v){const{fill:y,stroke:g}=m;v.hint={fill:y?y.value===v.value?"color":"currentColor":this.fill??"currentColor",stroke:g?g.value===v.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,o,i){const{x:a,y:l}=n,{x:s,y:c,r:u,rotate:f,symbol:h}=r,{r:d,rotate:p,symbol:m}=this,[v,y]=Ht(this,o),g=m===So,w=u?void 0:d*d*Math.PI;return vr(d)&&(e=[]),U("svg:g",i).call(ot,this,o,i).call(tt,this,{x:s&&a,y:c&&l}).call($=>$.selectAll().data(e).enter().append(g?"circle":"path").call(J,this).call(g?b=>{b.attr("cx",s?x=>s[x]:v).attr("cy",c?x=>c[x]:y).attr("r",u?x=>u[x]:d)}:b=>{b.attr("transform",Jn`translate(${s?x=>s[x]:v},${c?x=>c[x]:y})${f?x=>` rotate(${f[x]})`:p?` rotate(${p})`:""}`).attr("d",u&&h?x=>{const k=Jt();return h[x].draw(k,u[x]*u[x]*Math.PI),k}:u?x=>{const k=Jt();return m.draw(k,u[x]*u[x]*Math.PI),k}:h?x=>{const k=Jt();return h[x].draw(k,w),k}:(()=>{const x=Jt();return m.draw(x,w),x})())}).call(ct,this,r)).node()}};function Ae(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Wt(e,n)),new mo(t,{...r,x:e,y:n})}function a0(t,{x:e=q,...n}={}){return new mo(t,Vc({...n,x:e}))}function l0(t,{y:e=q,...n}={}){return new mo(t,Gc({...n,y:e}))}function s0(t,e){return Ae(t,{...e,symbol:"circle"})}function c0(t,e){return Ae(t,{...e,symbol:"hexagon"})}const u0={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let yo=class extends et{constructor(e,n={}){const{x:r,y:o,z:i,curve:a,tension:l}=n;super(e,{x:{value:r,scale:"x"},y:{value:o,scale:"y"},z:{value:ge(n),optional:!0}},n,u0),this.z=i,this.curve=hf(a,l),an(this,n)}filter(e){return e}project(e,n,r){this.curve!==pn&&super.project(e,n,r)}render(e,n,r,o,i){const{x:a,y:l}=r,{curve:s}=this;return U("svg:g",i).call(ot,this,o,i).call(tt,this,n).call(c=>c.selectAll().data(Ec(e,[a,l],this,r)).enter().append("path").call(J,this).call(Yr,this,r).call(m$,this,r,i).attr("d",s===pn&&i.projection?f0(i.path(),a,l):Am().curve(s).defined(u=>u>=0).x(u=>a[u]).y(u=>l[u]))).node()}};function f0(t,e,n){return e=St(e),n=St(n),r=>{let o=[];const i=[o];for(const a of r)a===-1?(o=[],i.push(o)):o.push([e[a],n[a]]);return t({type:"MultiLineString",coordinates:i})}}function go(t,{x:e,y:n,...r}={}){return[e,n]=Wt(e,n),new yo(t,{...r,x:e,y:n})}function er(t,{x:e=q,y:n=pt,...r}={}){return new yo(t,da({...r,x:e,y:n}))}function nr(t,{x:e=pt,y:n=q,...r}={}){return new yo(t,ha({...r,x:e,y:n}))}function Lf(t,e){e=d0(e);const{x:n,y:r,color:o,size:i}=e,a=$o(t,n),l=$o(t,r),s=$o(t,o),c=$o(t,i);let{fx:u,fy:f,x:{value:h,reduce:d,zero:p,...m},y:{value:v,reduce:y,zero:g,...w},color:{value:$,color:b,reduce:x},size:{value:k,reduce:M},mark:A}=e;if(d===void 0&&(d=y==null&&h==null&&k==null&&v!=null?"count":null),y===void 0&&(y=d==null&&v==null&&k==null&&h!=null?"count":null),M===void 0&&k==null&&x==null&&d==null&&y==null&&(h==null||ut(a))&&(v==null||ut(l))&&(M="count"),p===void 0&&(p=vo(d)?!0:void 0),g===void 0&&(g=vo(y)?!0:void 0),h==null&&v==null)throw new Error("must specify x or y");if(d!=null&&v==null)throw new Error("reducing x requires y");if(y!=null&&h==null)throw new Error("reducing y requires x");A===void 0&&(A=k!=null||M!=null?"dot":vo(d)||vo(y)||x!=null?"bar":h!=null&&v!=null?ut(a)||ut(l)||d==null&&y==null&&!rr(a)&&!rr(l)?"dot":"line":h!=null||v!=null?"rule":null);let z,E,L;switch(A){case"dot":L=Ae,E="stroke";break;case"line":L=a&&l||d!=null||y!=null?g||y!=null||a&&rr(a)?nr:p||d!=null||l&&rr(l)?er:go:a?er:nr,E="stroke",Sf(s)&&(z=null);break;case"area":L=!(g||y!=null)&&(p||d!=null||l&&rr(l))?tr:mn,E="fill",Sf(s)&&(z=null);break;case"rule":L=a?xe:we,E="stroke";break;case"bar":L=d!=null?ut(l)?zf(d)&&a&&ut(a)?yn:Fe:oo:y!=null?ut(a)?zf(y)&&l&&ut(l)?yn:De:io:x!=null||M!=null?a&&ut(a)&&l&&ut(l)?yn:a&&ut(a)?De:l&&ut(l)?Fe:aa:a&&tn(a)&&!(l&&tn(l))?Fe:l&&tn(l)&&!(a&&tn(a))?De:yn,E="fill";break;default:throw new Error(`invalid mark: ${A}`)}let R={fx:u,fy:f,x:a??void 0,y:l??void 0,[E]:s??b,z,r:c??void 0,tip:!0},S,O={[E]:x??void 0,r:M??void 0};if(d!=null&&y!=null)throw new Error("cannot reduce both x and y");return y!=null?(O.y=y,S=ut(a)?Dn:ke):d!=null?(O.x=d,S=ut(l)?qn:Me):(x!=null||M!=null)&&(a&&l?S=ut(a)&&ut(l)?ci:ut(a)?Me:ut(l)?ke:je:a?S=ut(a)?Dn:ke:l&&(S=ut(l)?qn:Me)),(S===je||S===ke)&&(R.x={value:a,...m}),(S===je||S===Me)&&(R.y={value:l,...w}),p===void 0&&(p=a&&!(S===je||S===ke)&&(L===Fe||L===tr||L===oo||L===we)),g===void 0&&(g=l&&!(S===je||S===Me)&&(L===De||L===mn||L===io||L===xe)),{fx:u??null,fy:f??null,x:{value:h??null,reduce:d??null,zero:!!p,...m},y:{value:v??null,reduce:y??null,zero:!!g,...w},color:{value:$??null,reduce:x??null,...b!==void 0&&{color:b}},size:{value:k??null,reduce:M??null},mark:A,markImpl:Ef[L],markOptions:R,transformImpl:Ef[S],transformOptions:O,colorMode:E}}function h0(t,e){const n=Lf(t,e),{fx:r,fy:o,x:{zero:i},y:{zero:a},markOptions:l,transformOptions:s,colorMode:c}=n,u=ba[n.markImpl],f=ba[n.transformImpl],h=r!=null||o!=null?la({strokeOpacity:.1}):null,d=[i?xe([0]):null,a?we([0]):null],p=u(t,f?f(s,l):l);return c==="stroke"?It(h,d,p):It(h,p,d)}function rr(t){let e,n;for(const r of t){if(r==null)continue;if(e===void 0){e=r;continue}const o=Math.sign(cr(e,r));if(o){if(n!==void 0&&o!==n)return!1;e=r,n=o}}return!0}function d0({x:t,y:e,color:n,size:r,fx:o,fy:i,mark:a}={}){return _t(t)||(t=gn(t)),_t(e)||(e=gn(e)),_t(n)||(n=In(n)?{color:n}:gn(n)),_t(r)||(r=gn(r)),_t(o)&&({value:o}=gn(o)),_t(i)&&({value:i}=gn(i)),a!=null&&(a=`${a}`.toLowerCase()),{x:t,y:e,color:n,size:r,fx:o,fy:i,mark:a}}function $o(t,e){const n=H(t,e.value);return n&&(n.label=Xt(e.value)),n}function gn(t){return p0(t)?{reduce:t}:{value:t}}function vo(t){return/^(?:distinct|count|sum|proportion)$/i.test(t)}function zf(t){return/^(?:first|last|mode)$/i.test(t)}function p0(t){if(t==null)return!1;if(typeof t.reduceIndex=="function"||typeof t.reduce=="function"&&Ct(t)||/^p\d{2}$/i.test(t))return!0;switch(`${t}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function Sf(t){return t?new Mn(t).size>t.length>>1:!1}const ba={dot:Ae,line:go,lineX:er,lineY:nr,areaX:tr,areaY:mn,ruleX:xe,ruleY:we,barX:Fe,barY:De,rect:aa,rectX:oo,rectY:io,cell:yn,bin:je,binX:ke,binY:Me,group:ci,groupX:Dn,groupY:qn},Ef=Object.fromEntries(Object.entries(ba).map(([t,e])=>[e,t]));function ka(t,e={}){let{x:n,x1:r,x2:o}=e;n===void 0&&r===void 0&&o===void 0&&(e={...e,x:n=q});const i={};return n!=null&&(i.x=t),r!=null&&(i.x1=t),o!=null&&(i.x2=t),Ut(i,e)}function Ma(t,e={}){let{y:n,y1:r,y2:o}=e;n===void 0&&r===void 0&&o===void 0&&(e={...e,y:n=q});const i={};return n!=null&&(i.y=t),r!=null&&(i.y1=t),o!=null&&(i.y2=t),Ut(i,e)}function Ut(t={},e={}){const n=ge(e),r=Object.entries(t).map(([o,i])=>{const a=xs(o,e);if(a==null)throw new Error(`missing channel: ${o}`);const[l,s]=Rt(a);return{key:o,input:a,output:l,setOutput:s,map:m0(i)}});return{...jt(e,(o,i)=>{const a=H(o,n),l=r.map(({input:c})=>H(o,c)),s=r.map(({setOutput:c})=>c(new Array(o.length)));for(const c of i)for(const u of a?Oe(c,f=>a[f]).values():[c])r.forEach(({map:f},h)=>f.mapIndex(u,l[h],s[h]));return{data:o,facets:i}}),...Object.fromEntries(r.map(({key:o,output:i})=>[o,i]))}}function m0(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&Ct(t))return y0(t);if(typeof t=="function")return Aa(Zo(t));switch(`${t}`.toLowerCase()){case"cumsum":return $0;case"rank":return Aa((e,n)=>Ql(e,r=>n[r]));case"quantile":return Aa((e,n)=>g0(e,r=>n[r]))}throw new Error(`invalid map: ${t}`)}function y0(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function g0(t,e){const n=Lm(t,e)-1;return Ql(t,e).map(r=>r/n)}function Aa(t){return{mapIndex(e,n,r){const o=t(e,n);if(o.length!==e.length)throw new Error("map function returned a mismatched length");for(let i=0,a=e.length;i<a;++i)r[e[i]]=o[i]}}}const $0={mapIndex(t,e,n){let r=0;for(const o of t)n[o]=r+=e[o]}};function v0(t={},e){return arguments.length===1&&(e=t),ka(xo(t),e)}function x0(t={},e){return arguments.length===1&&(e=t),Ma(xo(t),e)}function xo(t={}){typeof t=="number"&&(t={k:t});let{k:e,reduce:n,shift:r,anchor:o,strict:i}=t;if(o===void 0&&r!==void 0&&(o=b0(r),se(`Warning: the shift option is deprecated; please use anchor "${o}" instead.`)),!((e=Math.floor(e))>0))throw new Error(`invalid k: ${e}`);return k0(n)(e,w0(o,e),i)}function w0(t="middle",e){switch(`${t}`.toLowerCase()){case"middle":return e-1>>1;case"start":return 0;case"end":return e-1}throw new Error(`invalid anchor: ${t}`)}function b0(t){switch(`${t}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${t}`)}function k0(t="mean"){if(typeof t=="string"){if(/^p\d{2}$/i.test(t))return wo(Ho(t));switch(t.toLowerCase()){case"deviation":return wo(fr);case"max":return bo((e,n)=>zt(e,r=>n[r]));case"mean":return M0;case"median":return wo(An);case"min":return bo((e,n)=>Nt(e,r=>n[r]));case"mode":return bo((e,n)=>sl(e,r=>n[r]));case"sum":return Of;case"variance":return wo(cl);case"difference":return z0;case"ratio":return S0;case"first":return E0;case"last":return O0}}if(typeof t!="function")throw new Error(`invalid reduce: ${t}`);return bo(Zo(t))}function wo(t){return(e,n,r)=>r?{mapIndex(o,i,a){const l=c=>i[c]==null?NaN:+i[c];let s=0;for(let c=0;c<e-1;++c)isNaN(l(c))&&++s;for(let c=0,u=o.length-e+1;c<u;++c)isNaN(l(c+e-1))&&++s,a[o[c+n]]=s===0?t(Te(o,c,c+e),l):NaN,isNaN(l(c))&&--s}}:{mapIndex(o,i,a){const l=s=>i[s]==null?NaN:+i[s];for(let s=-n;s<0;++s)a[o[s+n]]=t(Te(o,0,s+e),l);for(let s=0,c=o.length-n;s<c;++s)a[o[s+n]]=t(Te(o,s,s+e),l)}}}function bo(t){return(e,n,r)=>r?{mapIndex(o,i,a){let l=0;for(let s=0;s<e-1;++s)l+=vt(i[o[s]]);for(let s=0,c=o.length-e+1;s<c;++s)l+=vt(i[o[s+e-1]]),l===e&&(a[o[s+n]]=t(Te(o,s,s+e),i)),l-=vt(i[o[s]])}}:{mapIndex(o,i,a){for(let l=-n;l<0;++l)a[o[l+n]]=t(Te(o,0,l+e),i);for(let l=0,s=o.length-n;l<s;++l)a[o[l+n]]=t(Te(o,l,l+e),i)}}}function Of(t,e,n){return n?{mapIndex(r,o,i){let a=0,l=0;for(let s=0;s<t-1;++s){const c=o[r[s]];c===null||isNaN(c)?++a:l+=+c}for(let s=0,c=r.length-t+1;s<c;++s){const u=o[r[s]],f=o[r[s+t-1]];f===null||isNaN(f)?++a:l+=+f,i[r[s+e]]=a===0?l:NaN,u===null||isNaN(u)?--a:l-=+u}}}:{mapIndex(r,o,i){let a=0;const l=r.length;for(let s=0,c=Math.min(l,t-e-1);s<c;++s)a+=+o[r[s]]||0;for(let s=-e,c=l-e;s<c;++s)a+=+o[r[s+t-1]]||0,i[r[s+e]]=a,a-=+o[r[s]]||0}}}function M0(t,e,n){if(n){const r=Of(t,e,n);return{mapIndex(o,i,a){r.mapIndex(o,i,a);for(let l=0,s=o.length-t+1;l<s;++l)a[o[l+e]]/=t}}}else return{mapIndex(r,o,i){let a=0,l=0;const s=r.length;for(let c=0,u=Math.min(s,t-e-1);c<u;++c){let f=o[r[c]];f!==null&&!isNaN(f=+f)&&(a+=f,++l)}for(let c=-e,u=s-e;c<u;++c){let f=o[r[c+t-1]],h=o[r[c]];f!==null&&!isNaN(f=+f)&&(a+=f,++l),i[r[c+e]]=a/l,h!==null&&!isNaN(h=+h)&&(a-=h,--l)}}}}function A0(t,e,n,r){for(let o=n+r;n<o;++n){const i=t[e[n]];if(vt(i))return i}}function L0(t,e,n,r){for(let o=n+r-1;o>=n;--o){const i=t[e[o]];if(vt(i))return i}}function Cf(t,e,n,r){for(let o=n+r;n<o;++n){let i=t[e[n]];if(i!==null&&!isNaN(i=+i))return i}}function Rf(t,e,n,r){for(let o=n+r-1;o>=n;--o){let i=t[e[o]];if(i!==null&&!isNaN(i=+i))return i}}function z0(t,e,n){return n?{mapIndex(r,o,i){for(let a=0,l=r.length-t;a<l;++a){const s=o[r[a]],c=o[r[a+t-1]];i[r[a+e]]=s===null||c===null?NaN:c-s}}}:{mapIndex(r,o,i){for(let a=-e,l=r.length-t+e+1;a<l;++a)i[r[a+e]]=Rf(o,r,a,t)-Cf(o,r,a,t)}}}function S0(t,e,n){return n?{mapIndex(r,o,i){for(let a=0,l=r.length-t;a<l;++a){const s=o[r[a]],c=o[r[a+t-1]];i[r[a+e]]=s===null||c===null?NaN:c/s}}}:{mapIndex(r,o,i){for(let a=-e,l=r.length-t+e+1;a<l;++a)i[r[a+e]]=Rf(o,r,a,t)/Cf(o,r,a,t)}}}function E0(t,e,n){return n?{mapIndex(r,o,i){for(let a=0,l=r.length-t;a<l;++a)i[r[a+e]]=o[r[a]]}}:{mapIndex(r,o,i){for(let a=-e,l=r.length-t+e+1;a<l;++a)i[r[a+e]]=A0(o,r,a,t)}}}function O0(t,e,n){return n?{mapIndex(r,o,i){for(let a=0,l=r.length-t;a<l;++a)i[r[a+e]]=o[r[a+t-1]]}}:{mapIndex(r,o,i){for(let a=-e,l=r.length-t+e+1;a<l;++a)i[r[a+e]]=L0(o,r,a,t)}}}const ue={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function C0(t,{x:e=q,y:n,k:r=ue.k,color:o=ue.color,opacity:i=ue.opacity,fill:a=o,fillOpacity:l=i,stroke:s=o,strokeOpacity:c,strokeWidth:u,...f}={}){return It(lt(a)?null:tr(t,Ut({x1:qe({k:-r,...f}),x2:qe({k:r,...f})},{x1:e,x2:e,y:n,fill:a,fillOpacity:l,...f})),lt(s)?null:er(t,Ut({x:qe(f)},{x:e,y:n,stroke:s,strokeOpacity:c,strokeWidth:u,...f})))}function R0(t,{x:e,y:n=q,k:r=ue.k,color:o=ue.color,opacity:i=ue.opacity,fill:a=o,fillOpacity:l=i,stroke:s=o,strokeOpacity:c,strokeWidth:u,...f}={}){return It(lt(a)?null:mn(t,Ut({y1:qe({k:-r,...f}),y2:qe({k:r,...f})},{x:e,y1:n,y2:n,fill:a,fillOpacity:l,...f})),lt(s)?null:nr(t,Ut({y:qe(f)},{x:e,y:n,stroke:s,strokeOpacity:c,strokeWidth:u,...f})))}function qe({n:t=ue.n,k:e=0,strict:n=ue.strict,anchor:r=ue.anchor}={}){return xo({k:t,reduce:o=>ur(o)+e*(fr(o)||0),strict:n,anchor:r})}const N0={ariaLabel:"tick",fill:null,stroke:"currentColor"};let Nf=class extends et{constructor(e,n,r){super(e,n,r,N0),an(this,r)}render(e,n,r,o,i){return U("svg:g",i).call(ot,this,o,i).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(J,this).attr("x1",this._x1(n,r,o)).attr("x2",this._x2(n,r,o)).attr("y1",this._y1(n,r,o)).attr("y2",this._y2(n,r,o)).call(ct,this,r).call(Un,this,r,i)).node()}},Tf=class extends Nf{constructor(e,n={}){const{x:r,y:o,inset:i=0,insetTop:a=i,insetBottom:l=i}=n;super(e,{x:{value:r,scale:"x"},y:{value:o,scale:"y",type:"band",optional:!0}},n),this.insetTop=rt(a),this.insetBottom=rt(l)}_transform(e,n,{x:r}){e.call(tt,n,{x:r},bt,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:o}=this;return n&&e?i=>n[i]+o:r+o}_y2({y:e},{y:n},{height:r,marginBottom:o}){const{insetBottom:i}=this;return n&&e?a=>n[a]+e.bandwidth()-i:r-o-i}},If=class extends Nf{constructor(e,n={}){const{x:r,y:o,inset:i=0,insetRight:a=i,insetLeft:l=i}=n;super(e,{y:{value:o,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=rt(a),this.insetLeft=rt(l)}_transform(e,n,{y:r}){e.call(tt,n,{y:r},0,bt)}_x1({x:e},{x:n},{marginLeft:r}){const{insetLeft:o}=this;return n&&e?i=>n[i]+o:r+o}_x2({x:e},{x:n},{width:r,marginRight:o}){const{insetRight:i}=this;return n&&e?a=>n[a]+e.bandwidth()-i:r-o-i}_y1(e,{y:n}){return r=>n[r]}_y2(e,{y:n}){return r=>n[r]}};function Bf(t,{x:e=q,...n}={}){return new Tf(t,{...n,x:e})}function Wf(t,{y:e=q,...n}={}){return new If(t,{...n,y:e})}function T0(t,{x:e=q,y:n=null,r,fill:o="#ccc",fillOpacity:i,stroke:a="currentColor",strokeOpacity:l,strokeWidth:s=2,sort:c,...u}={}){const f=n!=null?qn:si;return It(we(t,f({x1:La,x2:za},{x:e,y:n,stroke:a,strokeOpacity:l,...u})),Fe(t,f({x1:"p25",x2:"p75"},{x:e,y:n,fill:o,fillOpacity:i,...u})),Bf(t,f({x:"p50"},{x:e,y:n,stroke:a,strokeOpacity:l,strokeWidth:s,sort:c,...u})),Ae(t,Ut({x:jf},{x:e,y:n,z:n,r,stroke:a,strokeOpacity:l,...u})))}function I0(t,{y:e=q,x:n=null,r,fill:o="#ccc",fillOpacity:i,stroke:a="currentColor",strokeOpacity:l,strokeWidth:s=2,sort:c,...u}={}){const f=n!=null?Dn:si;return It(xe(t,f({y1:La,y2:za},{x:n,y:e,stroke:a,strokeOpacity:l,...u})),De(t,f({y1:"p25",y2:"p75"},{x:n,y:e,fill:o,fillOpacity:i,...u})),Wf(t,f({y:"p50"},{x:n,y:e,stroke:a,strokeOpacity:l,strokeWidth:s,sort:c,...u})),Ae(t,Ut({y:jf},{x:n,y:e,z:n,r,stroke:a,strokeOpacity:l,...u})))}function jf(t){const e=La(t),n=za(t);return t.map(r=>r<e||r>n?r:NaN)}function La(t){const e=Ff(t)*2.5-Df(t)*1.5;return Nt(t,n=>n>=e?n:NaN)}function za(t){const e=Df(t)*2.5-Ff(t)*1.5;return zt(t,n=>n<=e?n:NaN)}function Ff(t){return bn(t,.25)}function Df(t){return bn(t,.75)}const B0={ariaLabel:"raster",stroke:null,pixelSize:1};function $n(t,e){const n=+t;if(isNaN(n))throw new Error(`invalid ${e}: ${t}`);return n}function qf(t,e){const n=Math.floor(t);if(isNaN(n))throw new Error(`invalid ${e}: ${t}`);return n}let Yf=class extends et{constructor(e,n,r={},o){let{width:i,height:a,x:l,y:s,x1:c=l==null?0:void 0,y1:u=s==null?0:void 0,x2:f=l==null?i:void 0,y2:h=s==null?a:void 0,pixelSize:d=o.pixelSize,blur:p=0,interpolate:m}=r;if(i!=null&&(i=qf(i,"width")),a!=null&&(a=qf(a,"height")),c!=null&&(c=$n(c,"x1")),u!=null&&(u=$n(u,"y1")),f!=null&&(f=$n(f,"x2")),h!=null&&(h=$n(h,"y2")),l==null&&(c==null||f==null))throw new Error("missing x");if(s==null&&(u==null||h==null))throw new Error("missing y");e!=null&&i!=null&&a!=null&&(l===void 0&&c!=null&&f!=null&&(l=X0(c,f,i)),s===void 0&&u!=null&&h!=null&&(s=G0(u,h,i,a))),super(e,{x:{value:l,scale:"x",optional:!0},y:{value:s,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:f==null?null:[f],scale:"x",optional:!0,filter:null},y2:{value:h==null?null:[h],scale:"y",optional:!0,filter:null},...n},r,o),this.width=i,this.height=a,this.pixelSize=$n(d,"pixelSize"),this.blur=$n(p,"blur"),this.interpolate=l==null||s==null?null:j0(m)}};class Pf extends Yf{constructor(e,n={}){const{imageRendering:r}=n;if(e==null){const{fill:o,fillOpacity:i}=n;ht(i)[0]!==void 0&&(n=Sa("fillOpacity",n)),At(o)[0]!==void 0&&(n=Sa("fill",n))}super(e,void 0,n,B0),this.imageRendering=mt(r,"auto")}scale(e,{color:n,...r},o){return super.scale(e,r,o)}render(e,n,r,o,i){const a=n[r.channels.fill?.scale]??(O=>O),{x:l,y:s}=r,{document:c}=i,[u,f,h,d]=Xf(r,o,i),p=h-u,m=d-f,{pixelSize:v,width:y=Math.round(Math.abs(p)/v),height:g=Math.round(Math.abs(m)/v)}=this,w=y*g;let{fill:$,fillOpacity:b}=r,x=0;if(this.interpolate){const O=y/p,N=g/m,C=Q(l,T=>(T-u)*O,Float64Array),D=Q(s,T=>(T-f)*N,Float64Array);$&&($=this.interpolate(e,y,g,C,D,$)),b&&(b=this.interpolate(e,y,g,C,D,b))}else this.data==null&&e&&(x=e.fi*w);const k=c.createElement("canvas");k.width=y,k.height=g;const M=k.getContext("2d"),A=M.createImageData(y,g),z=A.data;let{r:E,g:L,b:R}=Sn(this.fill)??{r:0,g:0,b:0},S=(this.fillOpacity??1)*255;for(let O=0;O<w;++O){const N=O<<2;if($){const C=a($[O+x]);if(C==null){z[N+3]=0;continue}({r:E,g:L,b:R}=Sn(C))}b&&(S=b[O+x]*255),z[N+0]=E,z[N+1]=L,z[N+2]=R,z[N+3]=S}return this.blur>0&&zm(A,this.blur),M.putImageData(A,0,0),U("svg:g",i).call(ot,this,o,i).call(tt,this,n).call(O=>O.append("image").attr("transform",`translate(${u},${f}) scale(${Math.sign(h-u)},${Math.sign(d-f)})`).attr("width",Math.abs(p)).attr("height",Math.abs(m)).attr("preserveAspectRatio","none").call(Y,"image-rendering",this.imageRendering).call(J,this).attr("xlink:href",k.toDataURL())).node()}}function _f(t,e,n){arguments.length<3&&(n=e,e=null);let{x:r,y:o,[t]:i,...a}=n;return r===void 0&&o===void 0&&Zm(e)&&(r=Mr,o=Rn,i===void 0&&(i=Gm)),[e,{...a,x:r,y:o,[t]:i}]}function W0(){const[t,e]=_f("fill",...arguments);return new Pf(t,t==null||e.fill!==void 0||e.fillOpacity!==void 0?e:{...e,fill:q})}function Xf({x1:t,y1:e,x2:n,y2:r},o,{projection:i}){const{width:a,height:l,marginTop:s,marginRight:c,marginBottom:u,marginLeft:f}=o;return[t&&i==null?t[0]:f,e&&i==null?e[0]:s,n&&i==null?n[0]:a-c,r&&i==null?r[0]:l-u]}function Gf({x1:t,y1:e,x2:n,y2:r},o,i,a){const l={};return t&&(l.x1=t),e&&(l.y1=e),n&&(l.x2=n),r&&(l.y2=r),Xf(Tr(l,o),i,a)}function Sa(t,e={}){const{[t]:n}=e;if(typeof n!="function")throw new Error(`invalid ${t}: not a function`);return Mt({...e,[t]:void 0},function(r,o,i,a,l,s){const{x:c,y:u}=a;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[f,h,d,p]=Gf(i,a,l,s),m=d-f,v=p-h,{pixelSize:y}=this,{width:g=Math.round(Math.abs(m)/y),height:w=Math.round(Math.abs(v)/y)}=e,$=new Array(g*w*(o?o.length:1)),b=m/g,x=v/w;let k=0;for(const M of o??[void 0])for(let A=.5;A<w;++A)for(let z=.5;z<g;++z,++k)$[k]=n(c.invert(f+z*b),u.invert(h+A*x),M);return{data:$,facets:o,channels:{[t]:{value:$,scale:"auto"}}}})}function j0(t){if(typeof t=="function")return t;if(t==null)return Ea;switch(`${t}`.toLowerCase()){case"none":return Ea;case"nearest":return Hf;case"barycentric":return Vf();case"random-walk":return Uf()}throw new Error(`invalid interpolate: ${t}`)}function Ea(t,e,n,r,o,i){const a=new Array(e*n);for(const l of t)r[l]<0||r[l]>=e||o[l]<0||o[l]>=n||(a[Math.floor(o[l])*e+Math.floor(r[l])]=i[l]);return a}function Vf({random:t=Eo(42)}={}){return(e,n,r,o,i,a)=>{const{points:l,triangles:s,hull:c}=Xe.from(e,d=>o[d],d=>i[d]),u=new a.constructor(n*r).fill(NaN),f=new Uint8Array(n*r),h=_0(a,t);for(let d=0;d<s.length;d+=3){const p=s[d],m=s[d+1],v=s[d+2],y=l[2*p],g=l[2*m],w=l[2*v],$=l[2*p+1],b=l[2*m+1],x=l[2*v+1],k=Math.min(y,g,w),M=Math.max(y,g,w),A=Math.min($,b,x),z=Math.max($,b,x),E=(b-x)*(y-w)+($-x)*(w-g);if(!E)continue;const L=a[e[p]],R=a[e[m]],S=a[e[v]];for(let O=Math.floor(k);O<M;++O)for(let N=Math.floor(A);N<z;++N){if(O<0||O>=n||N<0||N>=r)continue;const C=O+.5,D=N+.5,T=Math.sign(E),I=(b-x)*(C-w)+(D-x)*(w-g);if(I*T<0)continue;const W=(x-$)*(C-w)+(D-x)*(y-w);if(W*T<0)continue;const j=E-(I+W);if(j*T<0)continue;const F=O+n*N;u[F]=h(L,I/E,R,W/E,S,j/E,O,N),f[F]=1}}return F0(u,f,o,i,a,n,r,c,e,h),u}}function F0(t,e,n,r,o,i,a,l,s,c){n=Float64Array.from(l,d=>n[s[d]]),r=Float64Array.from(l,d=>r[s[d]]),o=Array.from(l,d=>o[s[d]]);const u=n.length,f=Array.from({length:u},(d,p)=>q0(p,n,r));let h=0;for(let d=0;d<a;++d){const p=d+.5;for(let m=0;m<i;++m){const v=m+i*d;if(!e[v]){const y=m+.5;for(let g=0;g<u;++g){const w=(u+h+(g%2?(g+1)/2:-g/2))%u;if(f[w](y,p)){const $=D0(n.at(w-1),r.at(w-1),n[w],r[w],y,p);t[v]=c(o.at(w-1),$,o[w],1-$,o[w],0,m,d),h=w;break}}}}}}function D0(t,e,n,r,o,i){const a=n-t,l=r-e,s=a*(n-o)+l*(r-i),c=a*(o-t)+l*(i-e);return s>0&&c>0?s/(s+c):+(s>c)}function or(t,e,n,r){return t*r-n*e}function q0(t,e,n){const r=e.length,o=e.at(t-2),i=n.at(t-2),a=e.at(t-1),l=n.at(t-1),s=e[t],c=n[t],u=e.at(t+1-r),f=n.at(t+1-r),h=a-s,d=l-c,p=o-a,m=i-l,v=s-u,y=c-f,g=Math.hypot(h,d),w=Math.hypot(p,m),$=Math.hypot(v,y);return(b,x)=>{const k=b-a,M=x-l,A=b-s,z=x-c;return or(k,M,A,z)>-1e-6&&or(k,M,h,d)*w-or(k,M,p,m)*g>-1e-6&&or(A,z,v,y)*g-or(A,z,h,d)*$<=0}}function Hf(t,e,n,r,o,i){const a=new i.constructor(e*n),l=Xe.from(t,u=>r[u],u=>o[u]);let s,c;for(let u=.5,f=0;u<n;++u){c=s;for(let h=.5;h<e;++h,++f)c=l.find(h,u,c),h===.5&&(s=c),a[f]=i[t[c]]}return a}function Uf({random:t=Eo(42),minDistance:e=.5,maxSteps:n=2}={}){return(r,o,i,a,l,s)=>{const c=new s.constructor(o*i),u=Xe.from(r,p=>a[p],p=>l[p]);let f,h,d;for(let p=.5,m=0;p<i;++p){h=f;for(let v=.5;v<o;++v,++m){let y=v,g=p;d=h=u.find(y,g,h),v===.5&&(f=h);let w,$=0;for(;(w=Math.hypot(a[r[d]]-y,l[r[d]]-g))>e&&$<n;){const b=t(v,p,$)*2*Math.PI;y+=Math.cos(b)*w,g+=Math.sin(b)*w,d=u.find(y,g,d),++$}c[m]=s[r[d]]}}return c}}function Y0(t,e,n,r,o,i){return e*t+r*n+i*o}function P0(t){return(e,n,r,o,i,a,l,s)=>{const c=t(l,s);return c<n?e:c<n+o?r:i}}function _0(t,e){return tn(t)||Lt(t)?Y0:P0(e)}function X0(t,e,n){return{transform(r){const o=r.length,i=new Float64Array(o),a=(e-t)/n,l=t+a/2;for(let s=0;s<o;++s)i[s]=s%n*a+l;return i}}}function G0(t,e,n,r){return{transform(o){const i=o.length,a=new Float64Array(i),l=(e-t)/r,s=t+l/2;for(let c=0;c<i;++c)a[c]=Math.floor(c/n)%r*l+s;return a}}}const Zf={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};let Kf=class extends Yf{constructor(e,{smooth:n=!0,value:r,...o}={}){const i=Sc({},o,Zf);if(r===void 0){for(const l in i)if(i[l].value!=null){if(r!==void 0)throw new Error("ambiguous contour value");r=o[l],o[l]="value"}}if(r!=null){const l={transform:s=>s.map(c=>c.value),label:Xt(r)};for(const s in i)o[s]==="value"&&(o[s]=l)}if(e==null){if(r==null)throw new Error("missing contour value");o=Sa("value",{value:r,...o}),r=null}else{let{interpolate:l}=o;r===void 0&&(r=q),l===void 0&&(o.interpolate="nearest")}super(e,{value:{value:r,optional:!0}},V0(o),Zf);const a={geometry:{value:q}};for(const l in this.channels){const s=this.channels[l],{scale:c}=s;c==="x"||c==="y"||l==="value"||(a[l]=s,delete this.channels[l])}this.contourChannels=a,this.smooth=!!n}filter(e,{x:n,y:r,value:o,...i},a){return super.filter(e,i,a)}render(e,n,r,o,i){const{geometry:a}=r,l=zn();return U("svg:g",i).call(ot,this,o,i).call(tt,this,n).call(s=>{s.selectAll().data(e).enter().append("path").call(J,this).attr("d",c=>l(a[c])).call(ct,this,r)}).node()}};function V0({thresholds:t,interval:e,...n}){return t=mf(t,e,Kl),Mt(n,function(r,o,i,a,l,s){const[c,u,f,h]=Gf(i,a,l,s),d=f-c,p=h-u,{pixelSize:m,width:v=Math.round(Math.abs(d)/m),height:y=Math.round(Math.abs(p)/m)}=this,g=v/d,w=y/p,$=i.value.value,b=[];if(this.interpolate){const{x:z,y:E}=Gn(i,a,s),L=Q(z,N=>(N-c)*g,Float64Array),R=Q(E,N=>(N-u)*w,Float64Array),S=[i.x,i.y,i.value],O=[L,R,$];for(const N of o){const C=this.filter(N,S,O);b.push(this.interpolate(C,v,y,L,R,$))}}else if(o){const z=v*y,E=o.length;for(let L=0;L<E;++L)b.push($.slice(L*z,L*z+z))}else b.push($);if(this.blur>0)for(const z of b)Sm({data:z,width:v,height:y},this.blur);const x=H0(t,$,...Z0(b));if(x===null)throw new Error(`unsupported thresholds: ${t}`);const{contour:k}=Em().size([v,y]).smooth(this.smooth),M=[],A=[];for(const z of b)A.push(wn(M.length,M.push(...Q(x,E=>k(z,E)))));for(const{coordinates:z}of M)for(const E of z)for(const L of E)for(const R of L)R[0]=R[0]/g+c,R[1]=R[1]/w+u;return{data:M,facets:A,channels:qs(this.contourChannels,M)}})}function H0(t,e,n,r){if(typeof t?.range=="function")return t.range(t.floor(n),r);if(typeof t=="function"&&(t=t(e,n,r)),typeof t!="number")return me(t);const o=Oo(...Om(n,r,t),t);for(;o[o.length-1]>=r;)o.pop();for(;o[1]<n;)o.shift();return o}function U0(){return new Kf(..._f("value",...arguments))}function Z0(t){return[Nt(t,e=>Nt(e,Jf)),zt(t,e=>zt(e,Jf))]}function Jf(t){return isFinite(t)?t:NaN}function K0(t,e){return Oa(Yi,t,e)}function J0(t,e={}){return Oa(Pi,t,e)}function Q0(t,e={}){return Oa(Pr,t,e)}function Oa(t,e,n={}){const{x:r,y:o,maxRadius:i}=n,a=t({px:r,py:o,maxRadius:i}),l=[];r!=null&&l.push(xe(e,th("x",{...a,inset:-6},n))),o!=null&&l.push(we(e,th("y",{...a,inset:-6},n))),r!=null&&l.push(ln(e,eh("x",{...a,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),o!=null&&l.push(ln(e,eh("y",{...a,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const s of l)s.ariaLabel=`crosshair ${s.ariaLabel}`;return It(...l)}function Qf(t,{channels:e,...n},{facet:r,facetAnchor:o,fx:i,fy:a,[t]:l,channels:s,transform:c,initializer:u}){return{...n,facet:r,facetAnchor:o,fx:i,fy:a,[t]:l,channels:{...e,...s},transform:c,initializer:tx(t,u)}}function tx(t,e){return e==null?e:function(n,r,{x:o,y:i,px:a,py:l,...s},...c){const{channels:{x:u,y:f,...h}={},...d}=e.call(this,n,r,{...s,x:a,y:l},...c);return{channels:{...h,...u&&{px:u,...t==="x"&&{x:u}},...f&&{py:f,...t==="y"&&{y:f}}},...d}}}function th(t,e,n){const{color:r="currentColor",opacity:o=.2,ruleStroke:i=r,ruleStrokeOpacity:a=o,ruleStrokeWidth:l}=n;return{...Qf(t,e,n),stroke:i,strokeOpacity:a,strokeWidth:l}}function eh(t,e,n){const{color:r="currentColor",textFill:o=r,textFillOpacity:i,textStroke:a="var(--plot-background)",textStrokeOpacity:l,textStrokeWidth:s=5}=n;return{...Qf(t,e,ex(t,n)),fill:o,fillOpacity:i,stroke:a,strokeOpacity:l,strokeWidth:s}}function ex(t,e){return Mt(e,(n,r,o)=>({channels:{text:{value:yi(o,t)?.value}}}))}const nx={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},rx={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},ox={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},ix={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},ax={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};let lx=class extends et{constructor(e,n={}){const{x:r,y:o,z:i,curve:a,tension:l}=n;super(e,{x:{value:r,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:i,optional:!0}},n,nx),this.curve=fa(a,l),an(this,n)}render(e,n,r,o,i){const{x:a,y:l}=n,{x:s,y:c,z:u}=r,{curve:f}=this,[h,d]=Ht(this,o),p=s?g=>s[g]:wt(h),m=c?g=>c[g]:wt(d),v=this;function y(g){let w=-1;const $=[],b={};for(const S in r)b[S]=[];const x=[],k=[],M=[],A=[];function z(S,O){S=g[S],O=g[O],$.push(++w),x[w]=p(S),M[w]=m(S),k[w]=p(O),A[w]=m(O);for(const N in r)b[N].push(r[N][O])}const{halfedges:E,hull:L,triangles:R}=Xe.from(g,p,m);for(let S=0;S<E.length;++S){const O=E[S];O>S&&z(R[S],R[O])}for(let S=0;S<L.length;++S)z(L[S],L[(S+1)%L.length]);Kt(this).selectAll().data($).enter().append("path").call(J,v).attr("d",S=>{const O=Jt(),N=f(O);return N.lineStart(),N.point(x[S],M[S]),N.point(k[S],A[S]),N.lineEnd(),O}).call(ct,v,b).call(Un,v,b,i)}return U("svg:g",i).call(ot,this,o,i).call(tt,this,{x:s&&a,y:c&&l}).call(u?g=>g.selectAll().data(Oe(e,w=>u[w]).values()).enter().append("g").each(y):g=>g.datum(e).each(y)).node()}},Ca=class extends et{constructor(e,n={},r,o=({z:i})=>i){const{x:i,y:a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},z:{value:o(n),optional:!0}},n,r)}render(e,n,r,o,i){const{x:a,y:l}=n,{x:s,y:c,z:u}=r,[f,h]=Ht(this,o),d=s?y=>s[y]:wt(f),p=c?y=>c[y]:wt(h),m=this;function v(y){const g=Xe.from(y,d,p);Kt(this).append("path").datum(y[0]).call(J,m).attr("d",m._render(g,o)).call(ct,m,r)}return U("svg:g",i).call(ot,this,o,i).call(tt,this,{x:s&&a,y:c&&l}).call(u?y=>y.selectAll().data(Oe(e,g=>u[g]).values()).enter().append("g").each(v):y=>y.datum(e).each(v)).node()}},sx=class extends Ca{constructor(e,n={}){super(e,n,rx),this.fill="none"}_render(e){return e.render()}};class cx extends Ca{constructor(e,n={}){super(e,n,ox,ge)}_render(e){return e.renderHull()}}let ux=class extends et{constructor(e,n={}){const{x:r,y:o,z:i}=n;super(e,{x:{value:r,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:i,optional:!0}},Mt(n,function(a,l,s,c,u,f){let{x:h,y:d,z:p}=s;({x:h,y:d}=Gn(s,c,f)),p=p?.value;const m=new Array((h??d).length).fill(null),[v,y]=Ht(this,u),g=h?$=>h[$]:wt(v),w=d?$=>d[$]:wt(y);for(let $ of l){h&&($=$.filter(b=>vt(g(b)))),d&&($=$.filter(b=>vt(w(b))));for(const[,b]of Ie($,p)){const x=Xe.from(b,g,w),k=nh(x,u);for(let M=0,A=b.length;M<A;++M)m[b[M]]=k.renderCell(M)}}return{data:a,facets:l,channels:{cells:{value:m}}}}),ix)}render(e,n,r,o,i){const{x:a,y:l}=n,{x:s,y:c,cells:u}=r;return U("svg:g",i).call(ot,this,o,i).call(tt,this,{x:s&&a,y:c&&l}).call(f=>{f.selectAll().data(e).enter().append("path").call(J,this).attr("d",h=>u[h]).call(ct,this,r)}).node()}};class fx extends Ca{constructor(e,n){super(e,n,ax),this.fill="none"}_render(e,n){return nh(e,n).render()}}function nh(t,e){const{width:n,height:r,marginTop:o,marginRight:i,marginBottom:a,marginLeft:l}=e;return t.voronoi([l,o,n-i,r-a])}function ir(t,e,{x:n,y:r,...o}={}){return[n,r]=Wt(n,r),new t(e,{...o,x:n,y:r})}function hx(t,e){return ir(lx,t,e)}function dx(t,e){return ir(sx,t,e)}function px(t,e){return ir(cx,t,e)}function mx(t,{x:e,y:n,initializer:r,...o}={}){return ir(ux,t,{...jt({...o,x:e,y:n},Yu),initializer:r})}function yx(t,e){return ir(fx,t,e)}const gx={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};let rh=class extends et{constructor(e,{x:n,y:r,z:o,weight:i,fill:a,stroke:l,...s}={}){const c=oh(a)&&(a="currentColor",!0),u=oh(l)&&(l="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:ge({z:o,fill:a,stroke:l}),optional:!0},weight:{value:i,optional:!0}},xx({...s,fill:a,stroke:l},c,u),gx),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=o}filter(e){return e}render(e,n,r,o,i){const{contours:a}=r,l=zn();return U("svg:g",i).call(ot,this,o,i).call(tt,this,{}).call(s=>s.selectAll().data(e).enter().append("path").call(J,this).call(ct,this,r).attr("d",c=>l(a[c]))).node()}};function $x(t,{x:e,y:n,...r}={}){return[e,n]=Wt(e,n),new rh(t,{...r,x:e,y:n})}const vx=new Set(["x","y","z","weight"]);function xx(t,e,n){let{bandwidth:r,thresholds:o}=t;return r=r===void 0?20:+r,o=o===void 0?20:typeof o?.[Symbol.iterator]=="function"?St(o):+o,Mt(t,function(i,a,l,s,c,u){const f=l.weight?St(l.weight.value):null,h=l.z?.value,{z:d}=this,[p,m]=Ht(this,c),{width:v,height:y}=c,{x:g,y:w}=Gn(l,s,u),$=Object.fromEntries(Object.entries(l).filter(([L])=>!vx.has(L)).map(([L,R])=>[L,{...R,value:[]}])),b=e&&[],x=n&&[],k=Cm().x(g?L=>g[L]:p).y(w?L=>w[L]:m).weight(f?L=>f[L]:1).size([v,y]).bandwidth(r),M=[];for(const L of a){const R=[];M.push(R);for(const S of h?ji(L,h,d):[L]){const O=k.contours(S);R.push([S,O])}}let A=o;if(!(A instanceof kr)){let L=0;for(const R of M)for(const[,S]of R){const O=S.max;O>L&&(L=O)}A=Float64Array.from({length:o-1},(R,S)=>L*100*(S+1)/o)}const z=[],E=[];for(const L of M){const R=[];z.push(R);for(const[S,O]of L)for(const N of A){R.push(E.length),E.push(O(N/100)),b&&b.push(N),x&&x.push(N);for(const C in $)$[C].value.push(l[C].value[S[0]])}}return b&&b.push(0),x&&x.push(0),{data:i,facets:z,channels:{...$,...b&&{fill:{value:b,scale:"color"}},...x&&{stroke:{value:x,scale:"color"}},contours:{value:E}}}})}function oh(t){return/^density$/i.test(t)}function wx(t,e){return ih("x",t,e)}function bx(t,e){return ih("y",t,e)}function ih(t,e,{x1:n,x2:r,y1:o,y2:i,x:a=n===void 0&&r===void 0?t==="y"?pt:q:void 0,y:l=o===void 0&&i===void 0?t==="x"?pt:q:void 0,fill:s,positiveFill:c="#3ca951",negativeFill:u="#4269d0",fillOpacity:f=1,positiveFillOpacity:h=f,negativeFillOpacity:d=f,stroke:p,strokeOpacity:m,z:v=At(p)[0],clip:y,tip:g,render:w,...$}={}){return[n,r]=ah(a,n,r),[o,i]=ah(l,o,i),n===r&&o===i&&(t==="y"?o=fe(0):n=fe(0)),{tip:g}=We({tip:g},t==="y"?"x":"y"),It(lt(c)?null:Object.assign(ga(e,{x1:n,x2:r,y1:o,y2:i,z:v,fill:c,fillOpacity:h,render:Hn(w,lh(t,!0)),clip:y,...$}),{ariaLabel:"positive difference"}),lt(u)?null:Object.assign(ga(e,{x1:n,x2:r,y1:o,y2:i,z:v,fill:u,fillOpacity:d,render:Hn(w,lh(t,!1)),clip:y,...$}),{ariaLabel:"negative difference"}),go(e,{x:r,y:i,z:v,stroke:p,strokeOpacity:m,tip:g,clip:!0,...$}))}function ah(t,e,n){return e===void 0&&n===void 0?e=n=fe(t):e===void 0?(n=fe(n),e=t===void 0?n:fe(t)):n===void 0?(e=fe(e),n=t===void 0?e:fe(t)):(e=fe(e),n=fe(n)),[e,n]}function fe(t){let e;const{value:n,label:r=Xt(n)}=Qe(t);return{transform:o=>e||(e=H(o,n)),label:r}}function lh(t,e){const n=t==="x"?"y":"x",r=`${n}1`,o=`${n}2`,i=`${t}1`,a=`${t}2`;return(l,s,c,u,f,h)=>{const{[r]:d,[o]:p}=c,m=new Float32Array(d.length),v=new Float32Array(p.length),y=u[t==="y"?"height":"width"];(e===fc(s[t])<0?m:v).fill(y);const g=h(l,s,{...c,[o]:d,[a]:v},u,f),w=h(l,s,{...c,[r]:p,[i]:m},u,f),$=g.querySelector("g")??g,b=w.querySelector("g")??w;for(let x=0;$.firstChild;x+=2){const k=Wi(),M=U("svg:clipPath",f).attr("id",k).node();M.appendChild($.firstChild),b.childNodes[x].setAttribute("clip-path",`url(#${k})`),b.insertBefore(M,b.childNodes[x])}return w}}function sh({geometry:t=q,...e}={}){const n=rn(r=>H(r,t));return Mt({...e,x:null,y:null,geometry:{transform:n}},(r,o,i,a,l,s)=>{const c=n(r),u=c.length,f=new Float64Array(u),h=new Float64Array(u),{centroid:d}=s.path();for(let p=0;p<u;++p)[f[p],h[p]]=d(c[p]);return{data:r,facets:o,channels:{x:{value:f,scale:null,source:null},y:{value:h,scale:null,source:null}}}})}function kx({geometry:t=q,...e}={}){const n=rn(o=>H(o,t)),r=rn(o=>H(n(o),Rm));return{...e,x:{transform:o=>Float64Array.from(r(o),([i])=>i)},y:{transform:o=>Float64Array.from(r(o),([,i])=>i)},geometry:{transform:n}}}const Mx={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let ch=class extends et{constructor(e,n={}){const[r,o]=ht(n.r,3);super(e,{x:{value:n.tip?n.x:null,scale:"x",optional:!0},y:{value:n.tip?n.y:null,scale:"y",optional:!0},r:{value:r,scale:"r",filter:Qt,optional:!0},geometry:{value:n.geometry,scale:"projection"}},wa(n),Mx),this.r=o}render(e,n,r,o,i){const{geometry:a,r:l}=r,s=i.path(),{r:c}=this;return vr(c)?e=[]:c!==void 0&&s.pointRadius(c),U("svg:g",i).call(ot,this,o,i).call(tt,this,n).call(u=>{u.selectAll().data(e).enter().append("path").call(J,this).attr("d",l?f=>s.pointRadius(l[f])(a[f]):f=>s(a[f])).call(ct,this,r)}).node()}};function Ra(t,e={}){return e.tip&&e.x===void 0&&e.y===void 0?e=sh(e):e.geometry===void 0&&(e={...e,geometry:q}),new ch(t,e)}function Ax({strokeWidth:t=1.5,...e}={}){return Ra({type:"Sphere"},{strokeWidth:t,...e})}function Lx({strokeOpacity:t=.1,...e}={}){return Ra(Nm(),{strokeOpacity:t,...e})}const ar=.5,lr=0;function zx(t={fill:"count"},{binWidth:e,...n}={}){const{z:r}=n;return e=e===void 0?20:rt(e),t=Ns(t,n),$e(t,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!$e(t,"r")&&(n.r=e/2),Mt(n,(o,i,a,l,s,c)=>{let{x:u,y:f,z:h,fill:d,stroke:p,symbol:m}=a;if(u===void 0)throw new Error("missing channel: x");if(f===void 0)throw new Error("missing channel: y");({x:u,y:f}=Gn(a,l,c)),h=h?h.value:H(o,r),d=d?.value,p=p?.value,m=m?.value;const v=hi(t,{z:h,fill:d,stroke:p,symbol:m}),y=h&&[],g=d&&[],w=p&&[],$=m&&[],b=[],x=[],k=[];let M=-1;for(const L of t)L.initialize(o);for(const L of i){const R=[];for(const S of t)S.scope("facet",L);for(const[S,O]of Ie(L,v))for(const{index:N,extent:C}of Sx(o,O,u,f,e)){R.push(++M),x.push(C.x),k.push(C.y),h&&y.push(v===h?S:h[N[0]]),d&&g.push(v===d?S:d[N[0]]),p&&w.push(v===p?S:p[N[0]]),m&&$.push(v===m?S:m[N[0]]);for(const D of t)D.reduce(N,C)}b.push(R)}const A=a.x.scale,z=a.y.scale,E={x:{value:x,source:l[A]?{value:Q(x,l[A].invert),scale:A}:null},y:{value:k,source:l[z]?{value:Q(k,l[z].invert),scale:z}:null},...h&&{z:{value:y}},...d&&{fill:{value:g,scale:"auto"}},...p&&{stroke:{value:w,scale:"auto"}},...m&&{symbol:{value:$,scale:"auto"}},...Object.fromEntries(t.map(({name:L,output:R})=>[L,{scale:"auto",label:R.label,radius:L==="r"?e/2:void 0,value:R.transform()}]))};return{data:o,facets:b,channels:E}})}function Sx(t,e,n,r,o){const i=o*(1.5/Ss),a=new Map;for(const l of e){let s=n[l],c=r[l];if(isNaN(s)||isNaN(c))continue;let u=Math.round(c=(c-lr)/i),f=Math.round(s=(s-ar)/o-(u&1)/2),h=c-u;if(Math.abs(h)*3>1){let m=s-f,v=f+(s<f?-1:1)/2,y=u+(c<u?-1:1),g=s-v,w=c-y;m*m+h*h>g*g+w*w&&(f=v+(u&1?1:-1)/2,u=y)}const d=`${f},${u}`;let p=a.get(d);p===void 0&&(p={index:[],extent:{data:t,x:(f+(u&1)/2)*o+ar,y:u*i+lr}},a.set(d,p)),p.index.push(l)}return a.values()}const Ex={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function Ox(t){return new uh(t)}class uh extends et{constructor({binWidth:e=20,clip:n=!0,...r}={}){super(Cn,void 0,{clip:n,...r},Ex),this.binWidth=rt(e)}render(e,n,r,o,i){const{binWidth:a}=this,{marginTop:l,marginRight:s,marginBottom:c,marginLeft:u,width:f,height:h}=o,d=u-ar,p=f-s-ar,m=l-lr,v=h-c-lr,y=a/2,g=y*Es,w=g/2,$=y*2,b=g*1.5,x=Math.floor(d/$),k=Math.ceil(p/$),M=Math.floor((m+w)/b),A=Math.ceil((v-w)/b)+1,z=`m0,${Le(-g)}l${Le(y)},${Le(w)}v${Le(g)}l${Le(-y)},${Le(w)}`;let E=z;for(let L=M;L<A;++L)for(let R=x;R<k;++R)E+=`M${Le(R*$+(L&1)*y)},${Le(L*b)}${z}`;return U("svg:g",i).datum(0).call(ot,this,o,i).call(tt,this,{},bt+ar,bt+lr).call(L=>L.append("path").call(J,this).call(ct,this,r).attr("d",E)).node()}}function Le(t){return Math.round(t*1e3)/1e3}const Cx={ariaLabel:"image",fill:null,stroke:null};function Rx(t){return/^\.*\//.test(t)}function Nx(t){return/^(blob|data|file|http|https):/i.test(t)}function Tx(t){return typeof t=="string"&&(Rx(t)||Nx(t))?[void 0,t]:[t,void 0]}class fh extends et{constructor(e,n={}){let{x:r,y:o,r:i,width:a,height:l,rotate:s,src:c,preserveAspectRatio:u,crossOrigin:f,frameAnchor:h,imageRendering:d}=n;i==null&&(i=void 0),i===void 0&&a===void 0&&l===void 0?a=l=16:a===void 0&&l!==void 0?a=l:l===void 0&&a!==void 0&&(l=a);const[p,m]=Tx(c),[v,y]=ht(i),[g,w]=ht(a,y!==void 0?y*2:void 0),[$,b]=ht(l,y!==void 0?y*2:void 0),[x,k]=ht(s,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},r:{value:v,scale:"r",filter:Qt,optional:!0},width:{value:g,filter:Qt,optional:!0},height:{value:$,filter:Qt,optional:!0},rotate:{value:x,optional:!0},src:{value:p,optional:!0}},wa(n),Cx),this.src=m,this.width=w,this.rotate=k,this.height=b,this.r=y,this.preserveAspectRatio=mt(u,"xMidYMid"),this.crossOrigin=xt(f),this.frameAnchor=Bn(h),this.imageRendering=mt(d,"auto")}render(e,n,r,o,i){const{x:a,y:l}=n,{x:s,y:c,width:u,height:f,r:h,rotate:d,src:p}=r,{r:m,width:v,height:y,rotate:g}=this,[w,$]=Ht(this,o);return U("svg:g",i).call(ot,this,o,i).call(tt,this,{x:s&&a,y:c&&l}).call(b=>b.selectAll().data(e).enter().append("image").call(J,this).attr("x",hh(s,u,h,w,v,m)).attr("y",hh(c,f,h,$,y,m)).attr("width",u?x=>u[x]:v!==void 0?v:h?x=>h[x]*2:m*2).attr("height",f?x=>f[x]:y!==void 0?y:h?x=>h[x]*2:m*2).attr("transform",d?x=>`rotate(${d[x]})`:g?`rotate(${g})`:null).attr("transform-origin",d||g?Jn`${s?x=>s[x]:w}px ${c?x=>c[x]:$}px`:null).call(Y,"href",p?x=>p[x]:this.src).call(Y,"preserveAspectRatio",this.preserveAspectRatio).call(Y,"crossorigin",this.crossOrigin).call(Y,"image-rendering",this.imageRendering).call(Y,"clip-path",h?x=>`circle(${h[x]}px)`:m!==void 0?`circle(${m}px)`:null).call(ct,this,r)).node()}}function hh(t,e,n,r,o,i){return e&&t?a=>t[a]-e[a]/2:e?a=>r-e[a]/2:t&&o!==void 0?a=>t[a]-o/2:o!==void 0?r-o/2:n&&t?a=>t[a]-n[a]:n?a=>r-n[a]:t?a=>t[a]-i:r-i}function Ix(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Wt(e,n)),new fh(t,{...r,x:e,y:n})}function Bx(t,e,n){var r=1e-8,o=e-1,i=n-1,a=0,l,s,c,u,f,h,d,p;if(t<=0)return 0;if(t>=1)return 1;for(l=Math.log(e/(e+n)),s=Math.log(n/(e+n)),c=Math.exp(e*l)/e,u=Math.exp(n*s)/n,d=c+u,t<c/d?h=Math.pow(e*d*t,1/e):h=1-Math.pow(n*d*(1-t),1/n),p=-vn(e)-vn(n)+vn(e+n);a<10;a++){if(h===0||h===1)return h;if(f=Wx(h,e,n)-t,c=Math.exp(o*Math.log(h)+i*Math.log(1-h)+p),u=f/c,h-=c=u/(1-.5*Math.min(1,u*(o/h-i/(1-h)))),h<=0&&(h=.5*(h+c)),h>=1&&(h=.5*(h+c+1)),Math.abs(c)<r*h&&a>0)break}return h}function Wx(t,e,n){var r=t===0||t===1?0:Math.exp(vn(e+n)-vn(e)-vn(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*dh(t,e,n)/e:1-r*dh(1-t,n,e)/n}function dh(t,e,n){var r=1e-30,o=1,i=e+n,a=e+1,l=e-1,s=1,c=1-i*t/a,u,f,h,d;for(Math.abs(c)<r&&(c=r),c=1/c,d=c;o<=100&&(u=2*o,f=o*(n-o)*t/((l+u)*(e+u)),c=1+f*c,Math.abs(c)<r&&(c=r),s=1+f/s,Math.abs(s)<r&&(s=r),c=1/c,d*=c*s,f=-(e+o)*(i+o)*t/((e+u)*(a+u)),c=1+f*c,Math.abs(c)<r&&(c=r),s=1+f/s,Math.abs(s)<r&&(s=r),c=1/c,h=c*s,d*=h,!(Math.abs(h-1)<3e-7));o++);return d}function vn(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,o,i,a;for(a=(i=o=t)+5.5,a-=(o+.5)*Math.log(a);e<6;e++)r+=n[e]/++i;return Math.log(2.506628274631*r/o)-a}function jx(t,e){var n=Bx(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const Fx={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let ph=class extends et{constructor(e,n={}){const{x:r,y:o,z:i,ci:a=.95,precision:l=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:o,scale:"y"},z:{value:ge(n),optional:!0}},n,Fx),this.z=i,this.ci=+a,this.precision=+l,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${a}`);if(!(this.precision>0))throw new Error(`invalid precision: ${l}`)}render(e,n,r,o,i){const{x:a,y:l,z:s}=r,{ci:c}=this;return U("svg:g",i).call(ot,this,o,i).call(tt,this,n).call(u=>u.selectAll().data(s?ji(e,s,this.z):[e]).enter().call(f=>f.append("path").attr("fill","none").call(J,this).call(Yr,this,{...r,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,a,l)).call(c&&!en(this.fill)?h=>h.select(Dx).attr("stroke","none").call(J,this).call(Yr,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,a,l)):()=>{}))).node()}};function Dx(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Ce.svg,"path"),this)}let qx=class extends ph{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:o,precision:i}=this,[a,l]=gt(e,u=>r[u]),s=ko(e,r,n),c=mh(e,r,n,(1-o)/2,s);return jo().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(wn(a,l-i/2,i).concat(l))}_renderLine(e,n,r){const[o,i]=gt(e,l=>r[l]),a=ko(e,r,n);return`M${a(o)},${o}L${a(i)},${i}`}},Yx=class extends ph{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:o,precision:i}=this,[a,l]=gt(e,u=>n[u]),s=ko(e,n,r),c=mh(e,n,r,(1-o)/2,s);return jo().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(wn(a,l-i/2,i).concat(l))}_renderLine(e,n,r){const[o,i]=gt(e,l=>n[l]),a=ko(e,n,r);return`M${o},${a(o)}L${i},${a(i)}`}};function Px(t,{y:e=pt,x:n=q,stroke:r,fill:o=lt(r)?"currentColor":r,...i}={}){return new qx(t,da({...i,x:n,y:e,fill:o,stroke:r}))}function _x(t,{x:e=pt,y:n=q,stroke:r,fill:o=lt(r)?"currentColor":r,...i}={}){return new Yx(t,ha({...i,x:e,y:n,fill:o,stroke:r}))}function ko(t,e,n){let r=0,o=0,i=0,a=0;for(const u of t){const f=e[u],h=n[u];r+=f,o+=h,i+=f*h,a+=f*f}const l=t.length,s=(l*i-r*o)/(l*a-r*r),c=(o-s*r)/l;return u=>s*u+c}function mh(t,e,n,r,o){const i=qt(t,u=>e[u])/t.length;let a=0,l=0;for(const u of t)a+=(e[u]-i)**2,l+=(n[u]-o(e[u]))**2;const s=Math.sqrt(l/(t.length-2)),c=jx(r,t.length-2);return(u,f)=>{const h=o(u),d=s*Math.sqrt(1/t.length+(u-i)**2/a);return h+f*c*d}}function Na({path:t=q,delimiter:e,frameAnchor:n,treeLayout:r=yr,treeSort:o,treeSeparation:i,treeAnchor:a,treeFilter:l,...s}={}){a=Ta(a),o=gh(o),l!=null&&(l=Ba(l)),n===void 0&&(n=a.frameAnchor);const c=vh(e),u=zh(s,Ba),[f,h]=Rt(),[d,p]=Rt();return{x:f,y:d,frameAnchor:n,...jt(s,(m,v)=>{const y=c(H(m,t)),g=h([]),w=p([]);let $=-1;const b=[],x=[],k=ts().path(z=>y[z]),M=te(m)?z=>z.data=m[z.data]:z=>z.data=m.get(z.data),A=r();A.nodeSize&&A.nodeSize([1,1]),A.separation&&i!==void 0&&A.separation(i??Vo);for(const z of u)z[Ao]=z[Ah]([]);for(const z of v){const E=[],L=k(z.filter(R=>y[R]!=null)).each(M);o!=null&&L.sort(o),A(L);for(const R of L.descendants())if(!(l!=null&&!l(R))){E.push(++$),b[$]=R.data,a.position(R,$,g,w);for(const S of u)S[Ao][$]=S[Lh](R)}x.push(E)}return{data:b,facets:x}}),...Object.fromEntries(u)}}function yh({path:t=q,delimiter:e,curve:n="bump-x",stroke:r="#555",strokeWidth:o=1.5,strokeOpacity:i=.5,treeLayout:a=yr,treeSort:l,treeSeparation:s,treeAnchor:c,treeFilter:u,...f}={}){c=Ta(c),l=gh(l),u!=null&&(u=bh(u)),f={curve:n,stroke:r,strokeWidth:o,strokeOpacity:i,...f};const h=vh(e),d=zh(f,bh),[p,m]=Rt(),[v,y]=Rt(),[g,w]=Rt(),[$,b]=Rt();return{x1:p,x2:v,y1:g,y2:$,...jt(f,(x,k)=>{const M=h(H(x,t)),A=m([]),z=y([]),E=w([]),L=b([]);let R=-1;const S=[],O=[],N=ts().path(D=>M[D]),C=a();C.nodeSize&&C.nodeSize([1,1]),C.separation&&s!==void 0&&C.separation(s??Vo);for(const D of d)D[Ao]=D[Ah]([]);for(const D of k){const T=[],I=N(D.filter(W=>M[W]!=null)).each(W=>W.data=x[W.data]);l!=null&&I.sort(l),C(I);for(const{source:W,target:j}of I.links())if(!(u!=null&&!u(j,W))){T.push(++R),S[R]=j.data,c.position(W,R,A,E),c.position(j,R,z,L);for(const F of d)F[Ao][R]=F[Lh](j,W)}O.push(T)}return{data:S,facets:O}}),...Object.fromEntries(d)}}function Ta(t="left"){switch(`${t}`.trim().toLowerCase()){case"left":return Xx;case"right":return Gx}throw new Error(`invalid tree anchor: ${t}`)}const Xx={frameAnchor:"left",dx:6,position({x:t,y:e},n,r,o){r[n]=e,o[n]=-t}},Gx={frameAnchor:"right",dx:-6,position({x:t,y:e},n,r,o){r[n]=-e,o[n]=-t}};function gh(t){return t==null||typeof t=="function"?t:`${t}`.trim().toLowerCase().startsWith("node:")?$h(Ba(t)):$h(Vx(t))}function $h(t){return(e,n)=>Tt(t(e),t(n))}function Vx(t){return e=>e.data?.[t]}function vh(t="/"){if(t=`${t}`,t==="/")return n=>n;if(t.length!==1)throw new Error("delimiter must be exactly one character");const e=t.charCodeAt(0);return n=>n.map(r=>Hx(r,e))}const Ia=92,xh=47;function Hx(t,e){if(e===Ia)throw new Error("delimiter cannot be backslash");let n=!1;for(let r=0,o=t.length;r<o;++r){switch(t.charCodeAt(r)){case Ia:if(!n){n=!0;continue}break;case e:n?(t=t.slice(0,r-1)+t.slice(r),--r,--o):t=t.slice(0,r)+"/"+t.slice(r+1);break;case xh:n?(t=t.slice(0,r)+"\\\\"+t.slice(r),r+=2,o+=2):(t=t.slice(0,r)+"\\"+t.slice(r),++r,++o);break}n=!1}return t}function Ux(t){let e=!1;for(let n=0,r=t.length;n<r;++n){switch(t.charCodeAt(n)){case Ia:if(!e){e=!0;continue}case xh:e&&(t=t.slice(0,n-1)+t.slice(n),--n,--r);break}e=!1}return t}function wh(t){return Ct(t)&&typeof t.node=="function"}function Zx(t){return Ct(t)&&typeof t.link=="function"}function Ba(t){if(wh(t))return t.node;if(t=`${t}`.trim().toLowerCase(),!!t.startsWith("node:")){switch(t){case"node:name":return ja;case"node:path":return Wa;case"node:internal":return kh;case"node:external":return Mh;case"node:depth":return Fa;case"node:height":return Da}throw new Error(`invalid node value: ${t}`)}}function bh(t){if(wh(t))return t.node;if(Zx(t))return t.link;if(t=`${t}`.trim().toLowerCase(),!(!t.startsWith("node:")&&!t.startsWith("parent:"))){switch(t){case"parent:name":return Mo(ja);case"parent:path":return Mo(Wa);case"parent:depth":return Mo(Fa);case"parent:height":return Mo(Da);case"node:name":return ja;case"node:path":return Wa;case"node:internal":return kh;case"node:external":return Mh;case"node:depth":return Fa;case"node:height":return Da}throw new Error(`invalid link value: ${t}`)}}function Wa(t){return t.id}function ja(t){return Kx(t.id)}function Fa(t){return t.depth}function Da(t){return t.height}function kh(t){return!!t.children}function Mh(t){return!t.children}function Mo(t){return(e,n)=>n==null?void 0:t(n)}function Kx(t){let e=t.length;for(;--e>0&&!Jx(t,e););return Ux(t.slice(e+1))}function Jx(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}const Ah=2,Lh=3,Ao=4;function zh(t,e){const n=[];for(const r in t){const o=t[r],i=e(o);i!==void 0&&n.push([r,...Rt(o),i])}return n}function Sh(t,{fill:e,stroke:n,strokeWidth:r,strokeOpacity:o,strokeLinejoin:i,strokeLinecap:a,strokeMiterlimit:l,strokeDasharray:s,strokeDashoffset:c,marker:u,markerStart:f=u,markerEnd:h=u,dot:d=lt(f)&&lt(h),text:p="node:name",textStroke:m="var(--plot-background)",title:v="node:path",dx:y,dy:g,textAnchor:w,treeLayout:$=yr,textLayout:b=$===yr||$===es?"mirrored":"normal",tip:x,...k}={}){if(y===void 0&&(y=Ta(k.treeAnchor).dx),w!==void 0)throw new Error("textAnchor is not a configurable tree option");b=Ot(b,"textLayout",["mirrored","normal"]);function M(A){return ln(t,Na({treeLayout:$,text:p,fill:e===void 0?"currentColor":e,stroke:m,dx:y,dy:g,title:v,...A,...k}))}return It(bf(t,yh({treeLayout:$,markerStart:f,markerEnd:h,stroke:n!==void 0?n:e===void 0?"node:internal":e,strokeWidth:r,strokeOpacity:o,strokeLinejoin:i,strokeLinecap:a,strokeMiterlimit:l,strokeDasharray:s,strokeDashoffset:c,...k})),d?Ae(t,Na({treeLayout:$,fill:e===void 0?"node:internal":e,title:v,tip:x,...k})):null,p!=null?b==="mirrored"?[M({textAnchor:"start",treeFilter:"node:external"}),M({textAnchor:"end",treeFilter:"node:internal",dx:-y})]:M():null)}function Qx(t,e){return Sh(t,{...e,treeLayout:es})}const Eh={ariaLabel:"waffle"};let Oh=class extends va{constructor(e,{unit:n=1,gap:r=1,round:o,multiple:i,...a}={}){super(e,Rh("x",a),Eh),this.unit=Math.max(0,n),this.gap=+r,this.round=Nh(o),this.multiple=Th(i)}};class Ch extends xa{constructor(e,{unit:n=1,gap:r=1,round:o,multiple:i,...a}={}){super(e,Rh("y",a),Eh),this.unit=Math.max(0,n),this.gap=+r,this.round=Nh(o),this.multiple=Th(i)}}function Rh(t,e){const n=t==="y"?"x":"y",r=`${t}1`,o=`${t}2`;return Mt(t1(e),function(i,a,l,s,c){const{round:u,unit:f}=this,h=l[r].value,d=l[o].value,p=Tr({...n in l&&{[n]:l[n]},[r]:l[r],[o]:l[o]},s),m=this[t==="y"?"_width":"_height"](s,p,c),v=this[t==="y"?"_x":"_y"](s,p,c),y=f*r1(s.scales[t]),{multiple:g=Math.max(1,Math.floor(Math.sqrt(m/y)))}=this,w=Math.min(m/g,y*g),$=y*g,b=(m-g*w)/2,x=typeof v=="function"?N=>v(N)+b:v+b,k=s[t](0),M=t==="y"?([N,C])=>[N*w,-C*$]:([N,C])=>[C*$,N*w],A=typeof x=="function"?N=>x(N)-m/2:()=>x,[z,E]=t==="y"?[0,1]:[1,0],L=d.length,R=new Array(L),S=new Float64Array(L),O=new Float64Array(L);for(let N=0;N<L;++N){R[N]=qa(u(h[N]/f),u(d[N]/f),g).map(M);const C=R[N].pop();S[N]=C[z]+A(N),O[N]=C[E]+k}return{channels:{polygon:{value:R,source:null,filter:null},[`c${n}`]:{value:[w,x],source:null,filter:null},[`c${t}`]:{value:[$,k],source:null,filter:null},[n]:{value:S,scale:null,source:null},[r]:{value:O,scale:null,source:l[r]},[o]:{value:O,scale:null,source:l[o]}}}})}function t1({render:t,...e}){return{...e,render:Hn(t,function(n,r,o,i,a){const{gap:l,rx:s,ry:c}=this,{channels:u,ariaLabel:f,href:h,title:d,...p}=o,{document:m}=a,v=u.polygon.value,[y,g]=u.cx.value,[w,$]=u.cy.value,b=Hg(),x=m.createElementNS(Ce.svg,"pattern");x.setAttribute("width",y),x.setAttribute("height",w),x.setAttribute("patternUnits","userSpaceOnUse");const k=x.appendChild(m.createElementNS(Ce.svg,"rect"));return k.setAttribute("x",l/2),k.setAttribute("y",l/2),k.setAttribute("width",y-l),k.setAttribute("height",w-l),s!=null&&k.setAttribute("rx",s),c!=null&&k.setAttribute("ry",c),U("svg:g",a).call(ot,this,i,a).call(this._transform,this,r).call(M=>M.selectAll().data(n).enter().append(()=>x.cloneNode(!0)).attr("id",A=>`${b}-${A}`).select("rect").call(J,this).call(ct,this,p)).call(M=>M.selectAll().data(n).enter().append("path").attr("transform",Jn`translate(${g},${$})`).attr("d",A=>`M${v[A].join("L")}Z`).attr("fill",A=>`url(#${b}-${A})`).attr("stroke",this.stroke==null?null:"none").call(ct,this,{ariaLabel:f,href:h,title:d})).node()})}}function qa(t,e,n){if(e<t)return qa(e,t,n);if(t<0)return e1(t,e,n,Math.ceil(-Math.min(t,e)/n));const r=Math.floor(t%n),o=Math.ceil(t%n),i=Math.floor(e%n),a=Math.ceil(e%n),l=Math.floor(t/n),s=Math.ceil(t/n),c=Math.floor(e/n),u=Math.ceil(e/n),f=[];return u>s&&f.push([0,s]),f.push([r,s],[r,l+t%1],[o,l+t%1]),t%n>n-1||(f.push([o,l]),c>l&&f.push([n,l])),c>l&&f.push([n,c]),f.push([a,c],[a,c+e%1],[i,c+e%1]),e%n<1||(f.push([i,u]),u>s&&f.push([0,u])),f.push(n1(t,e,n)),f}function e1(t,e,n,r){return qa(t+r*n,e+r*n,n).map(([o,i])=>[o,i-r])}function n1(t,e,n){const r=Math.floor(e/n)-Math.floor(t/n);return r===0?Ya(t,e,n):r===1?Math.floor(e%n)>Math.ceil(t%n)?[(Math.floor(e%n)+Math.ceil(t%n))/2,Math.floor(e/n)]:e%n>n-t%n?Ya(e-e%n,e,n):Ya(t,n*Math.ceil(t/n),n):[n/2,(Math.round(t/n)+Math.round(e/n))/2]}function Ya(t,e,n){const r=Math.floor(e)-Math.floor(t);return r===0?[Math.floor(t%n)+.5,Math.floor(t/n)+(t+e)/2%1]:r===1?e%1-t%1>.5?[Math.ceil(t%n),Math.floor(e/n)+(t%1+e%1)/2]:e%1>1-t%1?[Math.floor(e%n)+.5,Math.floor(e/n)+e%1/2]:[Math.floor(t%n)+.5,Math.floor(t/n)+(1+t%1)/2]:[Math.ceil(t%n)+Math.ceil(Math.floor(e)-Math.ceil(t))/2,Math.floor(t/n)+(e>=1+t?.5:(t+e)/2%1)]}function Nh(t){if(t===void 0||t===!1)return Number;if(t===!0)return Math.round;if(typeof t!="function")throw new Error(`invalid round: ${t}`);return t}function Th(t){return t===void 0?void 0:Math.max(1,Math.floor(t))}function r1({domain:t,range:e}){return Ih(e)/Ih(t)}function Ih(t){const[e,n]=gt(t);return n-e}function o1(t,{tip:e,...n}={}){return Ze(n)||(n={...n,y:pt,x2:q}),new Oh(t,{tip:Bh(e),...Jr(Vi(Zr(n)))})}function i1(t,{tip:e,...n}={}){return Ze(n)||(n={...n,x:pt,y2:q}),new Ch(t,{tip:Bh(e),...Qr(Hi(Kr(n)))})}function Bh(t){return t===!0?{maxRadius:1/0}:Ct(t)&&t.maxRadius===void 0?{...t,maxRadius:1/0}:void 0}const a1=({marginLeft:t})=>[1,t],l1=({width:t,marginRight:e})=>[-1,t-e],s1=({width:t,marginLeft:e,marginRight:n})=>[0,(e+t-n)/2],c1=({marginTop:t})=>[1,t],u1=({height:t,marginBottom:e})=>[-1,t-e],f1=({height:t,marginTop:e,marginBottom:n})=>[0,(e+t-n)/2];function Wh(t){return typeof t=="string"?{anchor:t}:t}function h1(t={},e={}){arguments.length===1&&([t,e]=jh(t));let{anchor:n="left",padding:r=1,r:o=e.r}=Wh(t);switch(`${n}`.toLowerCase()){case"left":n=a1;break;case"right":n=l1;break;case"middle":n=s1;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return Fh("x","y",n,rt(r),o,e)}function d1(t={},e={}){arguments.length===1&&([t,e]=jh(t));let{anchor:n="bottom",padding:r=1,r:o=e.r}=Wh(t);switch(`${n}`.toLowerCase()){case"top":n=c1;break;case"bottom":n=u1;break;case"middle":n=f1;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return Fh("y","x",n,rt(r),o,e)}function jh(t){const{anchor:e,padding:n,...r}=t,{r:o}=r;return[{anchor:e,padding:n,r:o},r]}function Fh(t,e,n,r,o,i){if(o!=null&&typeof o!="number"){let{channels:a,sort:l,reverse:s}=i;a=Qo(a),a?.r===void 0&&(i={...i,channels:{...a,r:{value:o,scale:"r"}}}),l===void 0&&s===void 0&&(i.sort={channel:"-r"})}return Mt(i,function(a,l,s,c,u,f){let{[e]:h,r:d}=s;if(!s[e])throw new Error(`missing channel: ${e}`);({[e]:h}=Gn(s,c,f));const p=d?void 0:o!==void 0?rt(o):this.r!==void 0?this.r:3;d&&(d=H(d.value,c[d.scale]||q,Float64Array));let[m,v]=n(u);const y=m?m1:p1,g=new Float64Array(h.length),w=d?$=>d[$]:()=>p;for(let $ of l){const b=Bm();$=$.filter(d?k=>$r(h[k])&&Qt(d[k]):k=>$r(h[k]));const x=new Float64Array(2*$.length+2);for(const k of $){const M=w(k),A=m?M+r:0,z=h[k]-M,E=h[k]+M;let L=2;b.queryInterval(z-r,E+r,([,,S])=>{const O=g[S]-A,N=h[k]-h[S],C=r+(d?d[k]+d[S]:2*p),D=Math.sqrt(C*C-N*N);x[L++]=O-D,x[L++]=O+D});let R=x.slice(0,L);m&&(R=R.filter(S=>S>=0));t:for(const S of R.sort(y)){for(let O=0;O<L;O+=2)if(x[O]+1e-6<S&&S<x[O+1]-1e-6)continue t;g[k]=S+A;break}b.insert([z,E,k])}}m||(m=1);for(const $ of l)for(const b of $)g[b]=g[b]*m+v;return{data:a,facets:l,channels:{[t]:{value:g,source:null},[e]:{value:h,source:s[e]},...d&&{r:{value:d,source:s.r}}}}})}function p1(t,e){return Math.abs(t)-Math.abs(e)}function m1(t,e){return t-e}function y1(t,e){return arguments.length===1&&({basis:t,...e}=t),ka(Pa(t),e)}function g1(t,e){return arguments.length===1&&({basis:t,...e}=t),Ma(Pa(t),e)}function Pa(t){if(t===void 0)return Dh;if(typeof t=="function")return Lo(Zo(t));if(/^p\d{2}$/i.test(t))return xn(Ho(t));switch(`${t}`.toLowerCase()){case"deviation":return x1;case"first":return Dh;case"last":return v1;case"max":return w1;case"mean":return b1;case"median":return k1;case"min":return M1;case"sum":return A1;case"extent":return $1}throw new Error(`invalid basis: ${t}`)}function Lo(t){return{mapIndex(e,n,r){const o=+t(e,n);for(const i of e)r[i]=n[i]===null?NaN:n[i]/o}}}function xn(t){return Lo((e,n)=>t(e,r=>n[r]))}const $1={mapIndex(t,e,n){const[r,o]=gt(t,a=>e[a]),i=o-r;for(const a of t)n[a]=e[a]===null?NaN:(e[a]-r)/i}},Dh=Lo((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(vt(r))return r}}),v1=Lo((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(vt(r))return r}}),x1={mapIndex(t,e,n){const r=ur(t,i=>e[i]),o=fr(t,i=>e[i]);for(const i of t)n[i]=e[i]===null?NaN:o?(e[i]-r)/o:0}},w1=xn(zt),b1=xn(ur),k1=xn(An),M1=xn(Nt),A1=xn(qt);function L1(t,e){return qh("x",t,e)}function z1(t,e){return qh("y",t,e)}function qh(t,e,n={}){let r,o=1;if(typeof e=="number")o=e,r=(c,u)=>+c+u;else{if(typeof e=="string"){const c=e.startsWith("-")?-1:1;[e,o]=Po(e.replace(/^[+-]/,"")),o*=c}e=Sr(e),r=(c,u)=>e.offset(c,u)}const i=`${t}1`,a=`${t}2`,l=Ut({[i]:c=>c.map(u=>r(u,o)),[a]:c=>c},n),s=l[a].transform;return l[a].transform=()=>{const c=s(),[u,f]=gt(c);return c.domain=o<0?[u,r(f,o)]:[r(u,o),f],c},l}function S1(t,e={}){if(typeof t=="string")switch(t.toLowerCase()){case"first":return Yh(e);case"last":return Ph(e)}if(typeof t=="function")return ze(null,t,e);let n,r;for(n in t){if(r!==void 0)throw new Error("ambiguous selector; multiple inputs");r=E1(t[n])}if(r===void 0)throw new Error(`invalid selector: ${t}`);return ze(n,r,e)}function E1(t){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"min":return _a;case"max":return Xa}throw new Error(`unknown selector: ${t}`)}function Yh(t){return ze(null,T1,t)}function Ph(t){return ze(null,I1,t)}function O1(t){return ze("x",_a,t)}function C1(t){return ze("y",_a,t)}function R1(t){return ze("x",Xa,t)}function N1(t){return ze("y",Xa,t)}function*T1(t){yield t[0]}function*I1(t){yield t[t.length-1]}function*_a(t,e){yield Tm(t,n=>e[n])}function*Xa(t,e){yield Bo(t,n=>e[n])}function ze(t,e,n){if(t!=null){if(n[t]==null)throw new Error(`missing channel: ${t}`);t=n[t]}const r=ge(n);return jt(n,(o,i)=>{const a=H(o,r),l=H(o,t),s=[];for(const c of i){const u=[];for(const f of a?Oe(c,h=>a[h]).values():[c])for(const h of e(f,l))u.push(h);s.push(u)}return{data:o,facets:s}})}et.prototype.plot=function({marks:t=[],...e}={}){return of({...e,marks:[...t,this]})};export{fo as Area,kf as Arrow,va as BarX,xa as BarY,po as Cell,Kf as Contour,rh as Density,mo as Dot,Ku as Frame,ch as Geo,uh as Hexgrid,fh as Image,yo as Line,wf as Link,et as Mark,Pf as Raster,eo as Rect,Uc as RuleX,Zc as RuleY,Gr as Text,Tf as TickX,If as TickY,Ju as Tip,Vr as Vector,Oh as WaffleX,Ch as WaffleY,ga as area,tr as areaX,mn as areaY,t0 as arrow,h0 as auto,Lf as autoSpec,ku as axisFx,bu as axisFy,Qi as axisX,Ji as axisY,Fe as barX,De as barY,je as bin,ke as binX,Me as binY,qe as bollinger,C0 as bollingerX,R0 as bollingerY,T0 as boxX,I0 as boxY,yn as cell,r0 as cellX,o0 as cellY,sh as centroid,s0 as circle,Qx as cluster,Rt as column,U0 as contour,K0 as crosshair,J0 as crosshairX,Q0 as crosshairY,hx as delaunayLink,dx as delaunayMesh,$x as density,wx as differenceX,bx as differenceY,h1 as dodgeX,d1 as dodgeY,Ae as dot,a0 as dotX,l0 as dotY,uy as filter,Ay as find,zc as formatIsoDate,Pg as formatMonth,Lc as formatNumber,_g as formatWeekday,la as frame,Ra as geo,kx as geoCentroid,Lx as graticule,Eu as gridFx,zu as gridFy,Su as gridX,Lu as gridY,ci as group,Dn as groupX,qn as groupY,si as groupZ,c0 as hexagon,zx as hexbin,Ox as hexgrid,px as hull,q as identity,Ix as image,pt as indexOf,Mt as initializer,Hf as interpolateNearest,Ea as interpolateNone,Vf as interpolatorBarycentric,Uf as interpolatorRandomWalk,_$ as legend,go as line,er as lineX,nr as lineY,Px as linearRegressionX,_x as linearRegressionY,bf as link,Ut as map,ka as mapX,Ma as mapY,It as marks,Pa as normalize,y1 as normalizeX,g1 as normalizeY,bs as numberInterval,of as plot,Yi as pointer,Pi as pointerX,Pr as pointerY,W0 as raster,aa as rect,oo as rectX,io as rectY,fy as reverse,xe as ruleX,we as ruleY,gg as scale,S1 as select,Yh as selectFirst,Ph as selectLast,R1 as selectMaxX,N1 as selectMaxY,O1 as selectMinX,C1 as selectMinY,L1 as shiftX,z1 as shiftY,hy as shuffle,Os as sort,Ax as sphere,R$ as spike,Pu as stackX,U$ as stackX1,Z$ as stackX2,_u as stackY,K$ as stackY1,J$ as stackY2,ln as text,tu as textX,eu as textY,Bf as tickX,Wf as tickY,_o as timeInterval,Qu as tip,jt as transform,Sh as tree,yh as treeLink,Na as treeNode,br as utcInterval,H as valueof,mu as vector,yu as vectorX,gu as vectorY,mx as voronoi,yx as voronoiMesh,o1 as waffleX,i1 as waffleY,xo as window,v0 as windowX,x0 as windowY};
